import{c as N,a as t,f as m,t as D,s as ue,e as Wt}from"../chunks/zguDtZw-.js";import{o as wt,a as Qt}from"../chunks/hybYrdok.js";import{p as jt,f as n,a as Bt,h as b,s,c as f,e as q,b as be,g as c,r as g,t as oe,u as me,d as Ge,i as Xt}from"../chunks/SIFgIYqZ.js";import{p as Je,i as fe,a as Yt,b as It,s as St}from"../chunks/D4OMRqmI.js";import{c as o}from"../chunks/BmbK19Nn.js";import{e as er,b as mt,j as tr}from"../chunks/CCdH-GF7.js";import{U as rr,T as Ue,E as ar}from"../chunks/D2ZQhq98.js";import{B as xe}from"../chunks/DsjzulNM.js";import{A as sr}from"../chunks/m9ItHG6J.js";import{A as or,a as lr}from"../chunks/iMjrFJrG.js";import{C as dt}from"../chunks/BUTdIsFV.js";import{C as ut,a as nr,b as ir}from"../chunks/B9HEA4Xl.js";import{i as Ae,g as dr}from"../chunks/CGNubMbN.js";import{t as E}from"../chunks/BJCWvCOq.js";import"../chunks/CWlk9DSI.js";import{D as Kt,a as Ot,b as Ht,c as ur,R as Nt}from"../chunks/UVnX9grY.js";import{I as kt}from"../chunks/87Ty6o0e.js";import{L as Ct}from"../chunks/DUYgD2_s.js";import{R as cr,A as vr,a as mr,b as fr,D as Dt,F as gr}from"../chunks/DzaAsv10.js";import{R as pr,S as _r,a as $r,b as hr}from"../chunks/C73rBIzk.js";import{D as Zt}from"../chunks/BNz4MoZq.js";import{L as ft}from"../chunks/BjTWgG3-.js";import{f as zt}from"../chunks/BR-g04mS.js";import{R as Ut,T as At,D as Rt,G as yr}from"../chunks/CNwxKbLf.js";import{o as Tt}from"../chunks/BUdkjQ9d.js";import{S as Mt}from"../chunks/mAxAJ61f.js";import{I as xr}from"../chunks/xhhyndDT.js";import{h as Ve,t as We}from"../chunks/CHemGuYG.js";import{a as Et}from"../chunks/DGZIYs0n.js";import{M as br,m as Pr}from"../chunks/XF4Z48D_.js";import{A as Qe,S as wr}from"../chunks/DJtaXGK5.js";import{t as Lt}from"../chunks/BXZ-8GCb.js";import{H as ct}from"../chunks/B3rBFWl_.js";import{C as Ir}from"../chunks/CX4OS9M0.js";import{D as Sr}from"../chunks/DLcUb980.js";import{C as kr}from"../chunks/DivMWeKY.js";import{D as vt}from"../chunks/CuZ1HGtB.js";import{T as Cr}from"../chunks/BhZTThSR.js";import{D as Ft}from"../chunks/CWU1czEL.js";var Dr=m("<!> <!>",1),zr=m("<span> </span>"),Ur=m("<!> <!>",1),Ar=m(`<div class="grid gap-4 pt-2"><div class="flex flex-col gap-2"><!> <!> <p class="text-xs text-muted-foreground mt-1">Specifies architecture/OS for multi-arch images. Default uses your system's platform.</p></div></div>`),Rr=m("<!> <!>",1),Tr=m('<div class="mt-4"><div class="flex justify-between text-xs mb-1"><span>Pulling image...</span> <span> </span></div> <div class="w-full bg-secondary rounded-full overflow-hidden size-2"><div class="bg-primary h-full transition-all duration-300 ease-in-out"></div></div> <p class="text-xs text-muted-foreground mt-1">This may take a while depending on the image size and your internet connection.</p></div>'),Mr=m('<div class="absolute inset-0 flex items-center justify-center"><svg class="absolute w-full h-full" viewBox="0 0 100 100"><circle class="text-primary-400/20" cx="50" cy="50" r="45" fill="none" stroke="currentColor" stroke-width="8"></circle><circle class="text-primary-500" cx="50" cy="50" r="45" fill="none" stroke="currentColor" stroke-width="8" stroke-linecap="round" transform="rotate(-90 50 50)"></circle></svg> <!></div> <span class="opacity-0">Pull Image</span>',1),Er=m("<!> <!>",1),Lr=m('<!> <form class="grid gap-4 py-4"><div class="flex flex-col gap-2"><!> <div class="flex items-center gap-2"><div class="flex-1"><!></div> <div class="flex items-center"><span class="text-lg font-medium text-muted-foreground">:</span></div> <div class="w-1/3"><!></div></div></div> <!></form> <!> <!>',1);function Fr(Xe,re){jt(re,!0);function Ke(Y){return ae=>{ae.preventDefault(),Y(ae)}}function Oe(){Re(!1)}let Re=Je(re,"open",15,!1),ce=Je(re,"isPulling",3,!1),Q=Je(re,"pullProgress",3,0),Te=Je(re,"onSubmit",3,Y=>console.log("Pull submitted:",Y)),X=be(""),le=be("latest"),u=be("");const ve=[{label:"Default",value:""},{label:"linux/amd64",value:"linux/amd64"},{label:"linux/arm64",value:"linux/arm64"},{label:"linux/arm/v7",value:"linux/arm/v7"},{label:"windows/amd64",value:"windows/amd64"}];function ge(){if(!c(X).trim())return;let Y=c(X).trim(),ae=c(le).trim();if(Y.includes(":")){const ne=Y.split(":");Y=ne[0],ne.length>1&&ne[1].trim()!==""&&(ae=ne[1].trim())}ae||(ae="latest"),Te()({imageRef:Y,tag:ae,platform:c(u)||void 0,registryUrl:void 0})}var Pe=N(),ye=n(Pe);return o(ye,()=>Nt,(Y,ae)=>{ae(Y,{get open(){return Re()},set open(ne){Re(ne)},children:(ne,gt)=>{var He=N(),Ye=n(He);o(Ye,()=>Kt,(et,tt)=>{tt(et,{class:"sm:max-w-[500px]",children:(rt,pt)=>{var Ne=Lr(),ie=n(Ne);o(ie,()=>Ot,(r,a)=>{a(r,{"data-testid":"pull-docker-image-header",children:(i,l)=>{var v=Dr(),$=n(v);o($,()=>Ht,(h,d)=>{d(h,{"data-testid":"pull-docker-image-header",children:(y,p)=>{b();var w=D("Pull Docker Image");t(y,w)},$$slots:{default:!0}})});var P=s($,2);o(P,()=>Zt,(h,d)=>{d(h,{children:(y,p)=>{b();var w=D("Enter the image reference you want to pull from a registry.");t(y,w)},$$slots:{default:!0}})}),t(i,v)},$$slots:{default:!0}})});var we=s(ie,2),Me=me(()=>Ke(ge)),Ie=f(we),Ze=f(Ie);Ct(Ze,{for:"image-ref",children:(r,a)=>{b();var i=D("Image");t(r,i)},$$slots:{default:!0}});var Se=s(Ze,2),ke=f(Se),at=f(ke);kt(at,{id:"image-ref",placeholder:"e.g., nginx or myregistry.com/ubuntu",required:!0,get disabled(){return ce()},get value(){return c(X)},set value(r){q(X,r,!0)}}),g(ke);var Ee=s(ke,4),st=f(Ee);kt(st,{id:"image-tag",placeholder:"latest",get disabled(){return ce()},get value(){return c(le)},set value(r){q(le,r,!0)}}),g(Ee),g(Se),g(Ie);var ot=s(Ie,2);o(ot,()=>cr,(r,a)=>{a(r,{type:"single",class:"w-full",children:(i,l)=>{var v=N(),$=n(v);o($,()=>vr,(P,h)=>{h(P,{value:"advanced",children:(d,y)=>{var p=Rr(),w=n(p);o(w,()=>mr,(C,_)=>{_(C,{children:(S,U)=>{b();var x=D("Advanced Settings");t(S,x)},$$slots:{default:!0}})});var L=s(w,2);o(L,()=>fr,(C,_)=>{_(C,{children:(S,U)=>{var x=Ar(),F=f(x),G=f(F);Ct(G,{for:"platform",children:(A,W)=>{b();var z=D("Platform");t(A,z)},$$slots:{default:!0}});var j=s(G,2);o(j,()=>pr,(A,W)=>{W(A,{type:"single",get disabled(){return ce()},get value(){return c(u)},set value(z){q(u,z,!0)},children:(z,pe)=>{var k=Ur(),B=n(k);o(B,()=>_r,(ee,I)=>{I(ee,{class:"w-full",id:"platform",children:(K,te)=>{var T=zr(),M=f(T,!0);g(T),oe(O=>ue(M,O),[()=>{var O;return((O=ve.find(se=>se.value===c(u)))==null?void 0:O.label)||"Select platform"}]),t(K,T)},$$slots:{default:!0}})});var R=s(B,2);o(R,()=>$r,(ee,I)=>{I(ee,{children:(K,te)=>{var T=N(),M=n(T);er(M,17,()=>ve,O=>O.value,(O,se)=>{var de=N(),Ce=n(de);o(Ce,()=>hr,(J,V)=>{V(J,{get value(){return c(se).value},children:(H,De)=>{b();var Z=D();oe(()=>ue(Z,c(se).label)),t(H,Z)},$$slots:{default:!0}})}),t(O,de)}),t(K,T)},$$slots:{default:!0}})}),t(z,k)},$$slots:{default:!0}})}),b(2),g(F),g(x),t(S,x)},$$slots:{default:!0}})}),t(d,p)},$$slots:{default:!0}})}),t(i,v)},$$slots:{default:!0}})}),g(we);var Le=s(we,2);{var lt=r=>{var a=Tr(),i=f(a),l=s(f(i),2),v=f(l);g(l),g(i);var $=s(i,2),P=f($);g($),b(2),g(a),oe(h=>{ue(v,`${h??""}%`),tr(P,`width: ${Q()??""}%`)},[()=>Math.round(Q())]),t(r,a)};fe(Le,r=>{ce()&&r(lt)})}var e=s(Le,2);o(e,()=>ur,(r,a)=>{a(r,{children:(i,l)=>{var v=Er(),$=n(v);xe($,{variant:"outline",onclick:Oe,get disabled(){return ce()},children:(d,y)=>{b();var p=D("Cancel");t(d,p)},$$slots:{default:!0}});var P=s($,2);const h=me(()=>ce()||!c(X).trim());xe(P,{type:"submit",onclick:ge,get disabled(){return c(h)},class:"relative",children:(d,y)=>{var p=N(),w=n(p);{var L=_=>{var S=Mr(),U=n(S),x=f(U),F=s(f(x));mt(F,"stroke-dasharray",283),g(x);var G=s(x,2);ft(G,{class:"animate-spin size-4"}),g(U),b(2),oe(()=>mt(F,"stroke-dashoffset",283*(1-Q()/100))),t(_,S)},C=_=>{var S=D("Pull Image");t(_,S)};fe(w,_=>{ce()?_(L):_(C,!1)})}t(d,p)},$$slots:{default:!0}}),t(i,v)},$$slots:{default:!0}})}),Wt("submit",we,function(...r){var a;(a=c(Me))==null||a.apply(this,r)}),t(rt,Ne)},$$slots:{default:!0}})}),t(ne,He)},$$slots:{default:!0}})}),t(Xe,Pe),Bt({onClose:Oe})}var jr=m("<!> <!> <!>",1),Br=m('<div><p class="text-sm font-medium text-muted-foreground">Total Images</p> <p class="text-2xl font-bold"> </p></div> <div class="bg-blue-500/10 p-2 rounded-full"><!></div>',1),Kr=m('<div><p class="text-sm font-medium text-muted-foreground">Total Size</p> <p class="text-2xl font-bold"> </p></div> <div class="bg-purple-500/10 p-2 rounded-full"><!></div>',1),Or=m("<!> Filter <!>",1),Hr=m("<!> <!> <!>",1),Nr=m("<!> <!>",1),Zr=m('<div class="flex items-center justify-between"><div><!></div> <div class="flex items-center gap-2"><!> <!> <!> <!> <!></div></div>'),qr=m('<div class="flex items-center gap-2"><div class="flex items-center flex-1"><!> <a class="font-medium hover:underline shrink truncate"> </a></div></div>'),Gr=m('<span class="sr-only">Open menu</span> <!>',1),Jr=m("<!> Inspect",1),Vr=m("<!> Pulling...",1),Wr=m("<!> Pull",1),Qr=m("<!> Remove",1),Xr=m("<!> <!> <!>",1),Yr=m("<!> <!>",1),ea=m("<!> <!> <!> <!> <!> <!>",1),ta=m("<!> <!>",1),ra=m("<!> Pull Image",1),aa=m('<div class="flex flex-col items-center justify-center py-12 px-6 text-center border rounded-lg bg-card"><!> <p class="text-lg font-medium">No images found</p> <p class="text-sm text-muted-foreground mt-1 max-w-md">Pull a new image using the "Pull Image" button above or use the Docker CLI</p> <div class="flex gap-3 mt-4"><!></div></div>'),sa=m("<!> <!>",1),oa=m("<!> Pruning...",1),la=m('<!> <div class="flex justify-end gap-3 pt-6"><!> <!></div>',1),na=m('<div class="space-y-6"><div class="flex flex-col sm:flex-row justify-between sm:items-center gap-4"><div><h1 class="text-3xl font-bold tracking-tight">Container Images</h1> <p class="text-sm text-muted-foreground mt-1">View and Manage your Container Images</p></div></div> <!> <div class="grid grid-cols-1 sm:grid-cols-2 gap-4"><!> <!></div> <!> <!> <!></div>');function Ga(Xe,re){jt(re,!0);const[Ke,Oe]=Yt(),Re=()=>It(Pr,"$maturityStore",Ke),ce=()=>It(Et,"$settingsStore",Ke);let Q=me(()=>re.data.images||[]),Te=Ge(re.data.error),X=be(Ge([])),le=Ge({showUsed:!0,showUnused:!0}),u=Ge({pulling:!1,removing:!1,refreshing:!1,pruning:!1,checking:!1});Xt(()=>{re.data.settings&&Et.update(e=>({...e,...re.data.settings}))});const ve=new xr;let ge=be(!1),Pe=be(0),ye=be(!1);const Y=me(()=>{var e;return((e=c(Q))==null?void 0:e.length)||0}),ae=me(()=>{var e;return((e=c(Q))==null?void 0:e.reduce((r,a)=>r+(a.Size||0),0))||0}),ne=me(()=>c(Q).map(e=>{const r=Re().maturityData[e.Id];return{...e,maturity:r||e.maturity}})),gt=me(()=>c(ne).filter(e=>le.showUsed&&e.inUse||le.showUnused&&!e.inUse));wt(async()=>{await He()});async function He(){const e=c(Q).filter(r=>r.repo!=="<none>"&&r.tag!=="<none>").slice(0,20).map(r=>r.Id);if(e.length!==0){u.checking=!0;try{for(let a=0;a<e.length;a+=5){const i=e.slice(a,a+5);await ve.checkMaturityBatch(i),a+5<e.length&&await new Promise(l=>setTimeout(l,50))}}catch(r){console.error("Error loading maturity data:",r)}finally{u.checking=!1}}}async function Ye(e){const{imageRef:r,tag:a="latest",platform:i,registryUrl:l}=e;u.pulling=!0,q(Pe,0);try{let $=`/api/images/pull-stream/${encodeURIComponent(r)}?tag=${a}`;if(i&&($+=`&platform=${encodeURIComponent(i)}`),l){const d=(ce().registryCredentials||[]).find(y=>y.url===l);d&&d.username?E.info(`Attempting pull from ${d.url} with user ${d.username}`):l!=="docker.io"&&l!==""&&E.error(`Credentials not found for ${l}. Attempting unauthenticated pull.`)}const P=new EventSource($);P.onmessage=h=>{const d=JSON.parse(h.data);if(d.error){P.close(),E.error(`Pull failed: ${d.error}`),u.pulling=!1;return}if(d.type==="info"||d.type==="warning"){d.type==="info"&&E.info(d.message),d.type==="warning"&&E.error(d.message);return}if(d.progress!==void 0&&q(Pe,d.progress,!0),d.complete){P.close();const y=`${r}:${a}`;E.success(`Image "${y}" pulled successfully.`),q(ge,!1),setTimeout(async()=>{await Ae()},500),u.pulling=!1}},P.onerror=h=>{console.error("EventSource error:",h),P.close(),E.error("Connection to server lost while pulling image"),u.pulling=!1}}catch(v){console.error("Failed to pull image:",v),E.error(`Failed to pull image: ${v instanceof Error?v.message:String(v)}`),u.pulling=!1}}async function et(){Tt({title:"Delete Selected Images",message:`Are you sure you want to delete ${c(X).length} selected image(s)? This action cannot be undone. Images currently used by containers will not be deleted.
`,confirm:{label:"Delete",destructive:!0,action:async()=>{var a;u.removing=!0;let e=0,r=0;for(const i of c(X)){const l=c(Q).find($=>$.Id===i),v=((a=l==null?void 0:l.RepoTags)==null?void 0:a[0])||i.substring(0,12);if(l!=null&&l.inUse){E.error(`Image "${v}" is in use and cannot be deleted.`),r++;continue}await Ve({result:await We(ve.remove(i)),message:`Failed to delete image "${v}"`,setLoadingState:$=>u.removing=$,onSuccess:async()=>{E.success(`Image "${v}" deleted successfully.`),e++}})}console.log(`Finished deleting. Success: ${e}, Failed: ${r}`),e>0&&setTimeout(async()=>{await Ae()},500),q(X,[],!0)}}})}async function tt(){u.pruning=!0,await Ve({result:await We(ve.prune()),message:"Failed to Prune Images",setLoadingState:e=>u.pruning=e,onSuccess:async e=>{q(ye,!1),E.success((e==null?void 0:e.message)??"Images pruned successfully."),await Ae()}})}async function rt(e){if(!e){E.error("Cannot pull image without a repository tag");return}let[r,a]=e.split(":");a=a||"latest",await Ve({result:await We(ve.pull(r,a)),message:`Failed to pull image "${e}"`,setLoadingState:i=>u.pulling=i,onSuccess:async()=>{E.success(`Image "${e}" pulled successfully.`),await Ae()}})}async function pt(e){var i;const r=c(Q).find(l=>l.Id===e),a=((i=r==null?void 0:r.RepoTags)==null?void 0:i[0])||e.substring(0,12);Tt({title:"Delete Image",message:`Are you sure you want to delete ${a}? This action cannot be undone.`,confirm:{label:"Delete",destructive:!0,action:async()=>{await Ve({result:await We(ve.remove(e)),message:"Failed to Remove Image",setLoadingState:l=>u.removing=l,onSuccess:async()=>{E.success(`Image "${a}" deleted successfully.`),await Ae()}})}}})}async function Ne(e=!1){u.checking=!0;try{const a=await(await fetch("/api/images/maturity",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({force:e})})).json();a.success?(E.success(a.message),a.stats&&console.log("Maturity check stats:",a.stats),await Ae()):E.error(`Manual check failed: ${a.error}`)}catch(r){console.error("Manual maturity check error:",r),E.error("Failed to trigger manual maturity check")}finally{u.checking=!1}}let ie=null;wt(()=>{ie=new IntersectionObserver(e=>{e.forEach(r=>{if(r.isIntersecting){const a=r.target.getAttribute("data-image-id");a&&we(a)}})},{rootMargin:"200px"}),setTimeout(()=>{document.querySelectorAll("[data-image-id]").forEach(e=>{ie==null||ie.observe(e)})},100)}),Qt(()=>{ie==null||ie.disconnect()});async function we(e){try{await ve.checkMaturity(e)}catch(r){console.error(`Error loading maturity for image ${e}:`,r)}}var Me=na(),Ie=s(f(Me),2);{var Ze=e=>{var r=N(),a=n(r);o(a,()=>sr,(i,l)=>{l(i,{variant:"destructive",children:(v,$)=>{var P=jr(),h=n(P);Ir(h,{class:"mr-2 size-4"});var d=s(h,2);o(d,()=>or,(p,w)=>{w(p,{children:(L,C)=>{b();var _=D("Error Loading Images");t(L,_)},$$slots:{default:!0}})});var y=s(d,2);o(y,()=>lr,(p,w)=>{w(p,{children:(L,C)=>{b();var _=D();oe(()=>ue(_,Te)),t(L,_)},$$slots:{default:!0}})}),t(v,P)},$$slots:{default:!0}})}),t(e,r)};fe(Ie,e=>{Te&&e(Ze)})}var Se=s(Ie,2),ke=f(Se);o(ke,()=>dt,(e,r)=>{r(e,{children:(a,i)=>{var l=N(),v=n(l);o(v,()=>ut,($,P)=>{P($,{class:"p-4 flex items-center justify-between",children:(h,d)=>{var y=Br(),p=n(y),w=s(f(p),2),L=f(w,!0);g(w),g(p);var C=s(p,2),_=f(C);ct(_,{class:"text-blue-500 size-5"}),g(C),oe(()=>ue(L,c(Y))),t(h,y)},$$slots:{default:!0}})}),t(a,l)},$$slots:{default:!0}})});var at=s(ke,2);o(at,()=>dt,(e,r)=>{r(e,{children:(a,i)=>{var l=N(),v=n(l);o(v,()=>ut,($,P)=>{P($,{class:"p-4 flex items-center justify-between",children:(h,d)=>{var y=Kr(),p=n(y),w=s(f(p),2),L=f(w,!0);g(w),g(p);var C=s(p,2),_=f(C);ct(_,{class:"text-purple-500 size-5"}),g(C),oe(S=>ue(L,S),[()=>zt(c(ae))]),t(h,y)},$$slots:{default:!0}})}),t(a,l)},$$slots:{default:!0}})}),g(Se);var Ee=s(Se,2);{var st=e=>{var r=N(),a=n(r);o(a,()=>dt,(i,l)=>{l(i,{class:"border shadow-sm",children:(v,$)=>{var P=ta(),h=n(P);o(h,()=>nr,(y,p)=>{p(y,{class:"px-6",children:(w,L)=>{var C=Zr(),_=f(C),S=f(_);o(S,()=>ir,(z,pe)=>{pe(z,{children:(k,B)=>{b();var R=D("Image List");t(k,R)},$$slots:{default:!0}})}),g(_);var U=s(_,2),x=f(U);o(x,()=>Ut,(z,pe)=>{pe(z,{children:(k,B)=>{var R=Nr(),ee=n(R);o(ee,()=>At,(K,te)=>{te(K,{child:(M,O)=>{xe(M,St(()=>O==null?void 0:O().props,{variant:"outline",children:(de,Ce)=>{var J=Or(),V=n(J);gr(V,{class:"size-4"});var H=s(V,2);kr(H,{class:"size-4"}),t(de,J)},$$slots:{default:!0}}))},$$slots:{child:!0}})});var I=s(ee,2);o(I,()=>Rt,(K,te)=>{te(K,{children:(T,M)=>{var O=Hr(),se=n(O);o(se,()=>Sr,(J,V)=>{V(J,{children:(H,De)=>{b();var Z=D("Image Usage");t(H,Z)},$$slots:{default:!0}})});var de=s(se,2);o(de,()=>Dt,(J,V)=>{V(J,{get checked(){return le.showUsed},onCheckedChange:H=>{le.showUsed=H},children:(H,De)=>{b();var Z=D("Show Used Images");t(H,Z)},$$slots:{default:!0}})});var Ce=s(de,2);o(Ce,()=>Dt,(J,V)=>{V(J,{get checked(){return le.showUnused},onCheckedChange:H=>{le.showUnused=H},children:(H,De)=>{b();var Z=D("Show Unused Images");t(H,Z)},$$slots:{default:!0}})}),t(T,O)},$$slots:{default:!0}})}),t(k,R)},$$slots:{default:!0}})});var F=s(x,2);{var G=z=>{Qe(z,{action:"remove",onClick:()=>et(),get loading(){return u.removing},get disabled(){return u.removing}})};fe(F,z=>{c(X).length>0&&z(G)})}var j=s(F,2);Qe(j,{action:"remove",label:"Prune Unused",onClick:()=>q(ye,!0),get loading(){return u.pruning},loadingLabel:"Pruning...",get disabled(){return u.pruning}});var A=s(j,2);Qe(A,{action:"pull",label:"Pull Image",onClick:()=>q(ge,!0),get loading(){return u.pulling},loadingLabel:"Pulling...",get disabled(){return u.pulling}});var W=s(A,2);Qe(W,{action:"inspect",label:"Check Updates",onClick:()=>Ne(!0),get loading(){return u.checking},loadingLabel:"Checking...",get disabled(){return u.checking}}),g(U),g(C),t(w,C)},$$slots:{default:!0}})});var d=s(h,2);o(d,()=>ut,(y,p)=>{p(y,{children:(w,L)=>{const C=me(()=>({pageSize:Lt.getPageSize("images")}));rr(w,{get data(){return c(gt)},columns:[{accessorKey:"repo",header:"Name"},{accessorKey:"inUse",header:" ",enableSorting:!1},{accessorKey:"tag",header:"Tag"},{accessorKey:"Id",header:"Image ID",enableSorting:!1},{accessorKey:"Size",header:"Size"},{accessorKey:"actions",header:" ",enableSorting:!1}],idKey:"Id",display:{filterPlaceholder:"Search images...",noResultsMessage:"No images found"},get pagination(){return c(C)},onPageSizeChange:S=>{Lt.setPageSize("images",S)},sort:{defaultSort:{id:"repo",desc:!1}},get selectedIds(){return c(X)},set selectedIds(S){q(X,S,!0)},rows:(S,U)=>{let x=()=>U==null?void 0:U().item;var F=ea(),G=n(F);o(G,()=>Ue,(k,B)=>{B(k,{get"data-image-id"(){return x().Id},children:(R,ee)=>{var I=qr(),K=f(I),te=f(K);br(te,{get maturity(){return x().maturity}});var T=s(te,2),M=f(T,!0);g(T),g(K),g(I),oe(()=>{mt(T,"href",`/images/${x().Id??""}/`),ue(M,x().repo)}),t(R,I)},$$slots:{default:!0}})});var j=s(G,2);o(j,()=>Ue,(k,B)=>{B(k,{children:(R,ee)=>{var I=N(),K=n(I);{var te=M=>{Mt(M,{text:"Unused",variant:"amber"})},T=M=>{Mt(M,{text:"In Use",variant:"green"})};fe(K,M=>{x().inUse?M(T,!1):M(te)})}t(R,I)},$$slots:{default:!0}})});var A=s(j,2);o(A,()=>Ue,(k,B)=>{B(k,{children:(R,ee)=>{b();var I=D();oe(()=>ue(I,x().tag)),t(R,I)},$$slots:{default:!0}})});var W=s(A,2);o(W,()=>Ue,(k,B)=>{B(k,{class:"truncate",children:(R,ee)=>{b();var I=D();oe(()=>ue(I,x().Id)),t(R,I)},$$slots:{default:!0}})});var z=s(W,2);o(z,()=>Ue,(k,B)=>{B(k,{children:(R,ee)=>{b();var I=D();oe(K=>ue(I,K),[()=>zt(x().Size)]),t(R,I)},$$slots:{default:!0}})});var pe=s(z,2);o(pe,()=>Ue,(k,B)=>{B(k,{children:(R,ee)=>{var I=N(),K=n(I);o(K,()=>Ut,(te,T)=>{T(te,{children:(M,O)=>{var se=Yr(),de=n(se);o(de,()=>At,(J,V)=>{V(J,{child:(De,Z)=>{xe(De,St(()=>Z==null?void 0:Z().props,{variant:"ghost",size:"icon",class:"relative size-8 p-0",children:(nt,$t)=>{var qe=Gr(),ht=s(n(qe),2);ar(ht,{}),t(nt,qe)},$$slots:{default:!0}}))},$$slots:{child:!0}})});var Ce=s(de,2);o(Ce,()=>Rt,(J,V)=>{V(J,{align:"end",children:(H,De)=>{var Z=N(),_t=n(Z);o(_t,()=>yr,(nt,$t)=>{$t(nt,{children:(qe,ht)=>{var yt=Xr(),xt=n(yt);o(xt,()=>vt,(_e,Fe)=>{Fe(_e,{onclick:()=>dr(`/images/${x().Id}`),children:($e,Pt)=>{var he=Jr(),je=n(he);wr(je,{class:"size-4"}),b(),t($e,he)},$$slots:{default:!0}})});var bt=s(xt,2);const qt=me(()=>{var _e;return u.pulling||!((_e=x().RepoTags)!=null&&_e[0])});o(bt,()=>vt,(_e,Fe)=>{Fe(_e,{onclick:()=>{var $e;return rt(($e=x().RepoTags)==null?void 0:$e[0])},get disabled(){return c(qt)},children:($e,Pt)=>{var he=N(),je=n(he);{var Jt=ze=>{var Be=Vr(),it=n(Be);ft(it,{class:"animate-spin size-4"}),b(),t(ze,Be)},Vt=ze=>{var Be=Wr(),it=n(Be);Ft(it,{class:"size-4"}),b(),t(ze,Be)};fe(je,ze=>{u.pulling?ze(Jt):ze(Vt,!1)})}t($e,he)},$$slots:{default:!0}})});var Gt=s(bt,2);o(Gt,()=>vt,(_e,Fe)=>{Fe(_e,{class:"text-red-500 focus:text-red-700!",onclick:()=>pt(x().Id),children:($e,Pt)=>{var he=Qr(),je=n(he);Cr(je,{class:"size-4"}),b(),t($e,he)},$$slots:{default:!0}})}),t(qe,yt)},$$slots:{default:!0}})}),t(H,Z)},$$slots:{default:!0}})}),t(M,se)},$$slots:{default:!0}})}),t(R,I)},$$slots:{default:!0}})}),t(S,F)},$$slots:{rows:!0}})},$$slots:{default:!0}})}),t(v,P)},$$slots:{default:!0}})}),t(e,r)},ot=(e,r)=>{{var a=i=>{var l=aa(),v=f(l);ct(v,{class:"text-muted-foreground mb-4 opacity-40 size-12"});var $=s(v,6),P=f($);xe(P,{variant:"outline",size:"sm",onclick:()=>q(ge,!0),children:(h,d)=>{var y=ra(),p=n(y);Ft(p,{class:"size-4"}),b(),t(h,y)},$$slots:{default:!0}}),g($),g(l),t(i,l)};fe(e,i=>{Te||i(a)},r)}};fe(Ee,e=>{c(Q)&&c(Q).length>0?e(st):e(ot,!1)})}var Le=s(Ee,2);Fr(Le,{get isPulling(){return u.pulling},get pullProgress(){return c(Pe)},onSubmit:Ye,get open(){return c(ge)},set open(e){q(ge,e,!0)}});var lt=s(Le,2);o(lt,()=>Nt,(e,r)=>{r(e,{get open(){return c(ye)},set open(a){q(ye,a,!0)},children:(a,i)=>{var l=N(),v=n(l);o(v,()=>Kt,($,P)=>{P($,{children:(h,d)=>{var y=la(),p=n(y);o(p,()=>Ot,(_,S)=>{S(_,{children:(U,x)=>{var F=sa(),G=n(F);o(G,()=>Ht,(A,W)=>{W(A,{children:(z,pe)=>{b();var k=D("Prune Unused Images");t(z,k)},$$slots:{default:!0}})});var j=s(G,2);o(j,()=>Zt,(A,W)=>{W(A,{children:(z,pe)=>{b();var k=D("Are you sure you want to remove all unused (dangling) Docker images? This will free up disk space but cannot be undone. Images actively used by containers will not be affected.");t(z,k)},$$slots:{default:!0}})}),t(U,F)},$$slots:{default:!0}})});var w=s(p,2),L=f(w);xe(L,{variant:"outline",onclick:()=>q(ye,!1),get disabled(){return u.pruning},children:(_,S)=>{b();var U=D("Cancel");t(_,U)},$$slots:{default:!0}});var C=s(L,2);xe(C,{variant:"destructive",onclick:tt,get disabled(){return u.pruning},children:(_,S)=>{var U=N(),x=n(U);{var F=j=>{var A=oa(),W=n(A);ft(W,{class:"mr-2 animate-spin size-4"}),b(),t(j,A)},G=j=>{var A=D("Prune Images");t(j,A)};fe(x,j=>{u.pruning?j(F):j(G,!1)})}t(_,U)},$$slots:{default:!0}}),g(w),t(h,y)},$$slots:{default:!0}})}),t(a,l)},$$slots:{default:!0}})}),g(Me),t(Xe,Me),Bt(),Oe()}export{Ga as component};
