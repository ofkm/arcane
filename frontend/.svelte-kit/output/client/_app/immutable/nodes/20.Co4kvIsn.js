import{f as _,e as be,a as e,t as k,c as xe,s as ke}from"../chunks/zguDtZw-.js";import{o as we}from"../chunks/hybYrdok.js";import{p as Ce,a as Pe,s as o,c as P,f as A,g as d,b as W,u as j,h as i,e as I,r as S,t as Se}from"../chunks/SIFgIYqZ.js";import{i as K,a as ye,b as Ae}from"../chunks/D4OMRqmI.js";import{c as u}from"../chunks/BmbK19Nn.js";import{B as Ie}from"../chunks/DsjzulNM.js";import{I as X}from"../chunks/87Ty6o0e.js";import{L}from"../chunks/DUYgD2_s.js";import{S as Z}from"../chunks/bJ_I8NpF.js";import{A as Ue}from"../chunks/m9ItHG6J.js";import{A as Ee,a as De}from"../chunks/iMjrFJrG.js";import{C as ee}from"../chunks/BUTdIsFV.js";import{a as te,b as re,C as oe}from"../chunks/B9HEA4Xl.js";import{C as ae}from"../chunks/B5ui7ZgY.js";import{u as se,a as He,s as je}from"../chunks/DGZIYs0n.js";import{p as ze}from"../chunks/B1ASiaS-.js";import{g as ne}from"../chunks/CGNubMbN.js";import{C as Me}from"../chunks/CCfxTW1_.js";import{C as Be}from"../chunks/CX4OS9M0.js";var Le=_("<!> <!> <!>",1),Te=_("<!> <!>",1),Oe=_('<div class="space-y-3"><!> <!> <p class="text-xs text-muted-foreground">Examples: Unix: <code class="bg-muted/30 px-1 py-0.5 rounded">unix:///var/run/docker.sock</code></p></div>'),Ye=_("<!> <!>",1),qe=_("<!> <!>",1),Fe=_('<div class="px-4"><!> <!> <p class="text-xs text-muted-foreground mt-1">Set between 5-60 minutes.</p></div>'),Ge=_('<div class="flex items-center justify-between rounded-lg border p-4"><div><!> <p class="text-sm text-muted-foreground">Periodically check container status</p></div> <!></div> <!> <div class="flex items-center justify-between rounded-lg border p-4"><div><!> <p class="text-sm text-muted-foreground">Update containers when newer images are available</p></div> <!></div>',1),Je=_("<!> <!>",1),Ke=_('<span class="inline-block border-2 border-t-transparent border-white rounded-full animate-spin size-4"></span>'),Ne=_("<!> Continue <!>",1),Qe=_('<div class="max-w-2xl mx-auto"><h1 class="text-3xl font-bold mb-4">Initial Setup</h1> <p class="mb-6 text-muted-foreground">Configure basic settings for Arcane. You can change these later from the Settings page.</p> <!> <form class="space-y-5"><!> <!> <div class="flex justify-center pt-4"><!></div></form></div>');function ft(le,de){Ce(de,!0);const[ie,ce]=ye(),v=()=>Ae(He,"$settingsStore",ie);let z=W(""),M=W(!1);we(()=>{var r,t,c,w,m;if(!((t=(r=v().onboarding)==null?void 0:r.steps)!=null&&t.password)){ne("/onboarding/welcome");return}se({onboarding:{...v().onboarding,completed:((c=v().onboarding)==null?void 0:c.completed)??!1,completedAt:((w=v().onboarding)==null?void 0:w.completedAt)??"",steps:{...(m=v().onboarding)==null?void 0:m.steps,password:!0}}})});let T=j(()=>v().dockerHost||"unix:///var/run/docker.sock"),B=j(()=>v().pollingEnabled!==void 0?v().pollingEnabled:!0),O=j(()=>v().pollingInterval||10),Y=j(()=>v().autoUpdate!==void 0?v().autoUpdate:!1);const pe="data/stacks";async function ue(){var r;I(M,!0),I(z,"");try{const t={...v()},c={dockerHost:d(T),stacksDirectory:t.stacksDirectory||pe,pollingEnabled:d(B),pollingInterval:parseInt(d(O).toString()),autoUpdate:d(Y),autoUpdateInterval:60,pruneMode:"all",registryCredentials:[],auth:{...t.auth||{},localAuthEnabled:!0,sessionTimeout:30,passwordPolicy:"strong",rbacEnabled:!1},onboarding:{completed:!0,completedAt:new Date().toISOString(),steps:{...((r=t.onboarding)==null?void 0:r.steps)||{},welcome:!0,password:!0,settings:!0}}};se(c),await je(),ne("/onboarding/complete")}catch(t){I(z,t instanceof Error?t.message:"An unexpected error occurred",!0),console.error("Error saving settings:",t)}finally{I(M,!1)}}var q=Qe(),N=o(P(q),4);{var ve=r=>{var t=xe(),c=A(t);u(c,()=>Ue,(w,m)=>{m(w,{class:"mb-6",variant:"destructive",children:(C,y)=>{var f=Le(),h=A(f);Be(h,{class:"mr-2 size-4"});var b=o(h,2);u(b,()=>Ee,(a,s)=>{s(a,{children:(p,n)=>{i();var l=k("Error");e(p,l)},$$slots:{default:!0}})});var E=o(b,2);u(E,()=>De,(a,s)=>{s(a,{children:(p,n)=>{i();var l=k();Se(()=>ke(l,d(z))),e(p,l)},$$slots:{default:!0}})}),e(C,f)},$$slots:{default:!0}})}),e(r,t)};K(N,r=>{d(z)&&r(ve)})}var F=o(N,2),me=j(()=>ze(ue)),Q=P(F);u(Q,()=>ee,(r,t)=>{t(r,{class:"border shadow-sm",children:(c,w)=>{var m=Ye(),C=A(m);u(C,()=>te,(f,h)=>{h(f,{class:"py-4",children:(b,E)=>{var a=Te(),s=A(a);u(s,()=>re,(n,l)=>{l(n,{children:(g,D)=>{i();var x=k("Docker Connection");e(g,x)},$$slots:{default:!0}})});var p=o(s,2);u(p,()=>ae,(n,l)=>{l(n,{children:(g,D)=>{i();var x=k("Configure how Arcane connects to Docker");e(g,x)},$$slots:{default:!0}})}),e(b,a)},$$slots:{default:!0}})});var y=o(C,2);u(y,()=>oe,(f,h)=>{h(f,{class:"pt-0 pb-4",children:(b,E)=>{var a=Oe(),s=P(a);L(s,{for:"dockerHost",class:"text-base block mb-2",children:(n,l)=>{i();var g=k("Docker Host");e(n,g)},$$slots:{default:!0}});var p=o(s,2);X(p,{id:"dockerHost",placeholder:"unix:///var/run/docker.sock",class:"px-4 bg-muted/10 h-12",get value(){return d(T)},set value(n){I(T,n,!0)}}),i(2),S(a),e(b,a)},$$slots:{default:!0}})}),e(c,m)},$$slots:{default:!0}})});var R=o(Q,2);u(R,()=>ee,(r,t)=>{t(r,{class:"border shadow-sm",children:(c,w)=>{var m=Je(),C=A(m);u(C,()=>te,(f,h)=>{h(f,{class:"py-4",children:(b,E)=>{var a=qe(),s=A(a);u(s,()=>re,(n,l)=>{l(n,{children:(g,D)=>{i();var x=k("Monitoring & Updates");e(g,x)},$$slots:{default:!0}})});var p=o(s,2);u(p,()=>ae,(n,l)=>{l(n,{children:(g,D)=>{i();var x=k("Configure how Arcane monitors containers");e(g,x)},$$slots:{default:!0}})}),e(b,a)},$$slots:{default:!0}})});var y=o(C,2);u(y,()=>oe,(f,h)=>{h(f,{class:"space-y-4 pt-0 pb-4",children:(b,E)=>{var a=Ge(),s=A(a),p=P(s),n=P(p);L(n,{for:"pollingSwitch",class:"font-medium",children:($,H)=>{i();var U=k("Container Status Polling");e($,U)},$$slots:{default:!0}}),i(2),S(p);var l=o(p,2);Z(l,{id:"pollingSwitch",get checked(){return d(B)},onCheckedChange:$=>I(B,$,!0)}),S(s);var g=o(s,2);{var D=$=>{var H=Fe(),U=P(H);L(U,{for:"pollingInterval",class:"text-base block mb-2",children:(J,Re)=>{i();var he=k("Polling Interval (minutes)");e(J,he)},$$slots:{default:!0}});var _e=o(U,2);X(_e,{id:"pollingInterval",type:"number",min:"5",max:"60",class:"px-4 bg-muted/10 h-12",get value(){return d(O)},set value(J){I(O,J,!0)}}),i(2),S(H),e($,H)};K(g,$=>{d(B)&&$(D)})}var x=o(g,2),G=P(x),ge=P(G);L(ge,{for:"autoUpdateSwitch",class:"font-medium",children:($,H)=>{i();var U=k("Auto Update Containers");e($,U)},$$slots:{default:!0}}),i(2),S(G);var $e=o(G,2);Z($e,{id:"autoUpdateSwitch",get checked(){return d(Y)},onCheckedChange:$=>I(Y,$,!0)}),S(x),e(b,a)},$$slots:{default:!0}})}),e(c,m)},$$slots:{default:!0}})});var V=o(R,2),fe=P(V);Ie(fe,{type:"submit",get disabled(){return d(M)},class:"px-8 flex items-center gap-2 h-12 w-[80%]",children:(r,t)=>{var c=Ne(),w=A(c);{var m=y=>{var f=Ke();e(y,f)};K(w,y=>{d(M)&&y(m)})}var C=o(w,2);Me(C,{class:"size-4"}),e(r,c)},$$slots:{default:!0}}),S(V),S(F),S(q),be("submit",F,function(...r){var t;(t=d(me))==null||t.apply(this,r)}),e(le,q),Pe(),ce()}export{ft as component};
