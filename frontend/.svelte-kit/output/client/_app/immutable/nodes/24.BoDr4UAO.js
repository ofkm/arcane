import{d as ke,f as m,h as Ce,a as t,c as Pe,t as I,s as j}from"../chunks/zguDtZw-.js";import{p as Re,d as re,i as ze,b as Ae,t as D,a as Ee,$ as Be,s as a,c as s,f as N,h as C,r as e,g as n,u as je,e as De}from"../chunks/SIFgIYqZ.js";import{a as Ne,i as Ue,b as Ie}from"../chunks/D4OMRqmI.js";import{e as Q,r as ie,c as Le,a as oe,d as Ve}from"../chunks/CCdH-GF7.js";import{c as y}from"../chunks/BmbK19Nn.js";import{C as ne}from"../chunks/BUTdIsFV.js";import{a as de,b as le,C as ve}from"../chunks/B9HEA4Xl.js";import{C as Fe}from"../chunks/B5ui7ZgY.js";import{B as V}from"../chunks/DsjzulNM.js";import{I as ce}from"../chunks/87Ty6o0e.js";import{S as Me}from"../chunks/bJ_I8NpF.js";import{s as Te,u as We,a as me}from"../chunks/DGZIYs0n.js";import{t as qe}from"../chunks/BJCWvCOq.js";import"../chunks/CWlk9DSI.js";import{i as Ge}from"../chunks/CGNubMbN.js";import{h as He,t as Je}from"../chunks/CHemGuYG.js";import{R as Ke}from"../chunks/B877H2_W.js";import{S as Oe}from"../chunks/BKkfcLAR.js";import{U as Qe}from"../chunks/BrT7AbVn.js";import{P as Xe}from"../chunks/DYFwiHrC.js";import{S as Ye}from"../chunks/CHbZ4NRu.js";import{S as Ze}from"../chunks/BHsVyg00.js";var es=m("<!> Saving...",1),ss=m("<!> Save Settings",1),as=m("<!> Add",1),ts=m('<div class="flex items-center justify-between"><div class="flex items-center gap-2"><div class="bg-blue-500/10 p-2 rounded-full"><!></div> <!></div> <!></div>'),rs=(X,E,F)=>De(E,n(F),!0),is=m('<button><div><div class="font-medium"> </div> <div> </div></div> <!></button>'),os=m('<div class="space-y-2"></div>'),ns=m("<!> <!>",1),ds=m('<div class="flex items-center justify-between"><div class="flex items-center gap-2"><div class="bg-purple-500/10 p-2 rounded-full"><!></div> <div><!> <!></div></div> <div class="space-x-2"><!> <!></div></div>'),ls=m('<label class="flex items-center space-x-2 text-sm"><input type="checkbox" class="rounded border-gray-300 text-primary focus:ring-primary"/> <span> </span></label>'),vs=m('<div class="p-3"><h4 class="font-medium mb-2"> </h4> <div class="grid grid-cols-1 sm:grid-cols-2 gap-2"></div></div>'),cs=m('<div class="space-y-6"><div class="grid grid-cols-1 sm:grid-cols-2 gap-4"><div class="space-y-2"><label for="roleName" class="text-sm font-medium">Role Name</label> <!></div> <div class="space-y-2"><label for="roleDescription" class="text-sm font-medium">Description</label> <!></div></div> <div><h3 class="text-sm font-medium mb-3">Permissions</h3> <div class="border rounded-md divide-y"></div></div></div>'),ms=m("<!> <!>",1),ps=m('<div class="space-y-6"><div class="flex flex-col sm:flex-row justify-between sm:items-center gap-4"><div><h1 class="text-3xl font-bold tracking-tight">Role-Based Access Control</h1> <p class="text-sm text-muted-foreground mt-1">Manage user roles and permissions</p></div> <!></div> <div class="mb-6"><div class="flex items-center justify-between rounded-lg border p-4 bg-muted/30"><div class="space-y-0.5"><label for="rbacEnabledSwitch" class="text-base font-medium">Enable Role-Based Access Control</label> <p class="text-sm text-muted-foreground">Control user permissions with customizable roles</p></div> <!></div></div> <div class="grid grid-cols-1 lg:grid-cols-3 gap-6"><div class="lg:col-span-1"><!></div> <div class="lg:col-span-2"><!></div></div> <input type="hidden" id="csrf_token"/></div>');function Us(X,E){Re(E,!0);const[F,pe]=Ne(),ue=()=>Ie(me,"$settingsStore",F);let U=re({saving:!1});ze(()=>{E.data.settings&&We(E.data.settings)});const Y=[{id:1,name:"Admin",description:"Full system access",permissions:["containers:manage","stacks:manage","volumes:manage","networks:manage","settings:manage","users:manage"]},{id:2,name:"User",description:"Container and stack operations",permissions:["containers:view","containers:manage","stacks:view","stacks:manage","volumes:view","networks:view"]},{id:3,name:"Viewer",description:"Read-only access",permissions:["containers:view","stacks:view","volumes:view","networks:view"]}],_e=[{name:"Containers",permissions:["containers:view","containers:manage","containers:deploy"]},{name:"Stacks",permissions:["stacks:view","stacks:manage","stacks:deploy"]},{name:"Volumes",permissions:["volumes:view","volumes:manage","volumes:create"]},{name:"Networks",permissions:["networks:view","networks:manage","networks:create"]},{name:"Settings",permissions:["settings:view","settings:manage"]},{name:"Users",permissions:["users:view","users:manage","users:create"]}];let k=Ae(re(Y[0]));async function fe(){U.saving||(U.saving=!0,He({result:await Je(Te()),message:"Error Saving Settings",setLoadingState:d=>U.saving=d,onSuccess:async()=>{qe.success("Settings Saved Successfully"),await Ge()}}))}var M=ps();Ce(d=>{Be.title="RBAC Settings - Arcane"});var T=s(M),ge=a(s(T),2);V(ge,{onclick:fe,get disabled(){return U.saving},class:"h-10 arcane-button-save",children:(d,P)=>{var B=Pe(),H=N(B);{var R=g=>{var l=es(),u=N(l);Ke(u,{class:"animate-spin size-4"}),C(),t(g,l)},z=g=>{var l=ss(),u=N(l);Oe(u,{class:"size-4"}),C(),t(g,l)};Ue(H,g=>{U.saving?g(R):g(z,!1)})}t(d,B)},$$slots:{default:!0}}),e(T);var W=a(T,2),Z=s(W),be=a(s(Z),2);const he=je(()=>{var d;return(d=ue().auth)==null?void 0:d.rbacEnabled});Me(be,{id:"rbacEnabledSwitch",name:"rbacEnabled",get checked(){return n(he)},onCheckedChange:d=>{me.update(P=>({...P,auth:{...P.auth,rbacEnabled:d}}))}}),e(Z),e(W);var q=a(W,2),G=s(q),$e=s(G);y($e,()=>ne,(d,P)=>{P(d,{class:"border shadow-sm h-full",children:(B,H)=>{var R=ns(),z=N(R);y(z,()=>de,(l,u)=>{u(l,{class:"pb-3",children:(A,J)=>{var i=ts(),o=s(i),r=s(o),_=s(r);Qe(_,{class:"text-blue-500 size-5"}),e(r);var f=a(r,2);y(f,()=>le,(h,p)=>{p(h,{children:(v,$)=>{C();var c=I("Roles");t(v,c)},$$slots:{default:!0}})}),e(o);var b=a(o,2);V(b,{variant:"outline",size:"sm",children:(h,p)=>{var v=as(),$=N(v);Xe($,{class:"mr-1 size-4"}),C(),t(h,v)},$$slots:{default:!0}}),e(i),t(A,i)},$$slots:{default:!0}})});var g=a(z,2);y(g,()=>ve,(l,u)=>{u(l,{children:(A,J)=>{var i=os();Q(i,21,()=>Y,o=>o.id,(o,r)=>{var _=is();_.__click=[rs,k,r];var f=s(_),b=s(f),h=s(b,!0);e(b);var p=a(b,2),v=s(p,!0);e(p),e(f);var $=a(f,2);Ze($,{class:"opacity-70 size-4"}),e(_),D(()=>{oe(_,1,`w-full text-left p-3 rounded-md border transition-colors flex items-center justify-between ${n(k).id===n(r).id?"bg-primary text-primary-foreground border-primary":"hover:bg-muted/50"}`),j(h,n(r).name),oe(p,1,`text-xs ${n(k).id===n(r).id?"text-primary-foreground/90":"text-muted-foreground"}`),j(v,n(r).description)}),t(o,_)}),e(i),t(A,i)},$$slots:{default:!0}})}),t(B,R)},$$slots:{default:!0}})}),e(G);var ee=a(G,2),xe=s(ee);y(xe,()=>ne,(d,P)=>{P(d,{class:"border shadow-sm",children:(B,H)=>{var R=ms(),z=N(R);y(z,()=>de,(l,u)=>{u(l,{class:"pb-3",children:(A,J)=>{var i=ds(),o=s(i),r=s(o),_=s(r);Ye(_,{class:"text-purple-500 size-5"}),e(r);var f=a(r,2),b=s(f);y(b,()=>le,(c,x)=>{x(c,{children:(w,L)=>{C();var S=I();D(()=>j(S,`Role: ${n(k).name??""}`)),t(w,S)},$$slots:{default:!0}})});var h=a(b,2);y(h,()=>Fe,(c,x)=>{x(c,{children:(w,L)=>{C();var S=I();D(()=>j(S,n(k).description)),t(w,S)},$$slots:{default:!0}})}),e(f),e(o);var p=a(o,2),v=s(p);V(v,{variant:"outline",size:"sm",children:(c,x)=>{C();var w=I("Delete");t(c,w)},$$slots:{default:!0}});var $=a(v,2);V($,{size:"sm",children:(c,x)=>{C();var w=I("Save Changes");t(c,w)},$$slots:{default:!0}}),e(p),e(i),t(A,i)},$$slots:{default:!0}})});var g=a(z,2);y(g,()=>ve,(l,u)=>{u(l,{children:(A,J)=>{var i=cs(),o=s(i),r=s(o),_=a(s(r),2);ce(_,{id:"roleName",name:"roleName",get value(){return n(k).name},placeholder:"Enter role name"}),e(r);var f=a(r,2),b=a(s(f),2);ce(b,{id:"roleDescription",name:"roleDescription",get value(){return n(k).description},placeholder:"Brief description"}),e(f),e(o);var h=a(o,2),p=a(s(h),2);Q(p,21,()=>_e,v=>v.name,(v,$)=>{var c=vs(),x=s(c),w=s(x,!0);e(x);var L=a(x,2);Q(L,20,()=>n($).permissions,S=>S,(S,ae)=>{var K=ls(),O=s(K);ie(O);var te=a(O,2),we=s(te,!0);e(te),e(K),D((Se,ye)=>{Ve(O,Se),j(we,ye)},[()=>n(k).permissions.includes(ae),()=>ae.split(":")[1]]),t(S,K)}),e(L),e(c),D(()=>j(w,n($).name)),t(v,c)}),e(p),e(h),e(i),t(A,i)},$$slots:{default:!0}})}),t(B,R)},$$slots:{default:!0}})}),e(ee),e(q);var se=a(q,2);ie(se),e(M),D(()=>Le(se,E.data.csrf)),t(X,M),Ee(),pe()}ke(["click"]);export{Us as component};
