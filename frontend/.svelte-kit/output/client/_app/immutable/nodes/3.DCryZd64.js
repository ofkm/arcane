import{c as ue,a as s,f as i,t as re,s as C,i as Ft,d as er}from"../chunks/zguDtZw-.js";import{o as tr}from"../chunks/hybYrdok.js";import{p as It,f,n as rr,a as zt,h as g,s as a,c as e,e as tt,b as rt,g as o,r as t,t as B,u as I,d as Nt,i as ar}from"../chunks/SIFgIYqZ.js";import{s as sr,r as or,p as Xe,i as E,a as nr,b as ir}from"../chunks/D4OMRqmI.js";import{c as l}from"../chunks/BmbK19Nn.js";import{I as lr,s as dr,a as Kt,h as Zt,b as Tt}from"../chunks/CCdH-GF7.js";import{C as Ye}from"../chunks/BUTdIsFV.js";import{C as et,a as Vt,b as jt}from"../chunks/B9HEA4Xl.js";import{C as Lt}from"../chunks/B5ui7ZgY.js";import{B as st}from"../chunks/DsjzulNM.js";import{U as Bt,T as Ae}from"../chunks/D2ZQhq98.js";import{A as Gt}from"../chunks/m9ItHG6J.js";import{A as Wt,a as Qt}from"../chunks/iMjrFJrG.js";import{t as cr,c as Ot,p as vr,s as ur}from"../chunks/DVaDWjV4.js";import{f as Ke}from"../chunks/BR-g04mS.js";import{S as Ct}from"../chunks/mAxAJ61f.js";import{i as xt}from"../chunks/CGNubMbN.js";import{t as At}from"../chunks/BJCWvCOq.js";import"../chunks/CWlk9DSI.js";import{D as mr,a as fr,b as pr,c as gr,R as _r}from"../chunks/UVnX9grY.js";import{C as pt}from"../chunks/CjSQePMv.js";import{L as gt}from"../chunks/DUYgD2_s.js";import{D as xr}from"../chunks/BNz4MoZq.js";import{L as at}from"../chunks/BjTWgG3-.js";import{T as qt}from"../chunks/BhZTThSR.js";import{C as Jt}from"../chunks/CX4OS9M0.js";import{s as hr}from"../chunks/CXuQMvfN.js";import{h as Dt,t as Mt}from"../chunks/CHemGuYG.js";import{C as br}from"../chunks/C2kjEBku.js";import{B as $r}from"../chunks/CThrnvRT.js";import{o as yr}from"../chunks/BUdkjQ9d.js";import{m as wr,M as Sr}from"../chunks/XF4Z48D_.js";import{I as Pr}from"../chunks/xhhyndDT.js";import{D as kr}from"../chunks/CKC8MdI0.js";import{M as _t}from"../chunks/Bh_rBs7G.js";import{S as Cr}from"../chunks/CHbZ4NRu.js";import{R as Ir}from"../chunks/B877H2_W.js";import{B as Ht}from"../chunks/Buz1G913.js";import{H as Et}from"../chunks/B3rBFWl_.js";import{C as zr}from"../chunks/CywCv4nj.js";import{M as Ar}from"../chunks/Cm35N4Au.js";import{A as Rt}from"../chunks/BZMdbj5w.js";import{C as Dr}from"../chunks/Co9IQC3A.js";function Mr(ne,d){It(d,!0);let K=or(d,["$$slots","$$events","$$legacy"]);const R=[["circle",{cx:"12",cy:"12",r:"10"}],["polygon",{points:"10 8 16 12 10 16 10 8"}]];lr(ne,sr({name:"circle-play"},()=>K,{get iconNode(){return R},children:(we,Se)=>{var Te=ue(),De=f(Te);dr(De,()=>d.children??rr),s(we,Te)},$$slots:{default:!0}})),zt()}var Ur=i("<!> <!>",1),Nr=i('Unused Volumes <span class="text-destructive">(Potentially Destructive!)</span>',1),Tr=i("<!> <!> <!>",1),Vr=i("<!> Pruning...",1),jr=i("<!> ",1),Lr=i("<!> <!>",1),Br=i('<!> <div class="grid gap-4 py-4"><div class="flex items-center space-x-3"><!> <!></div> <div class="flex items-center space-x-3"><!> <!></div> <div class="flex items-center space-x-3"><!> <!></div> <div class="flex items-start space-x-3"><!> <div class="grid gap-1.5 leading-none"><!> <p class="text-xs text-muted-foreground">Only enable this if you are certain no important data resides in unused volumes.</p></div></div> <!></div> <!>',1);function Or(ne,d){It(d,!0);let K=Xe(d,"open",15),R=Xe(d,"isPruning",3,!1),we=Xe(d,"imagePruneMode",3,"dangling"),Se=Xe(d,"onConfirm",3,()=>{}),Te=Xe(d,"onCancel",3,()=>{}),De=rt(!0),n=rt(!0),x=rt(!0),me=rt(!1);const ke=I(()=>{const fe=[];return o(De)&&fe.push("containers"),o(n)&&fe.push("images"),o(x)&&fe.push("networks"),o(me)&&fe.push("volumes"),fe});function Ve(){o(ke).length>0&&!R()&&Se()(o(ke))}function je(){R()||Te()()}function ht(fe){fe.key==="Escape"&&!R()&&je()}var ae=ue(),Ze=f(ae);l(Ze,()=>_r,(fe,bt)=>{bt(fe,{onOpenChange:Me=>!Me&&je(),get open(){return K()},set open(Me){K(Me)},children:(Me,ot)=>{var Le=ue(),$t=f(Le);l($t,()=>mr,(yt,nt)=>{nt(yt,{class:"sm:max-w-[450px]",onkeydown:ht,children:(wt,it)=>{var lt=Br(),Be=f(lt);l(Be,()=>fr,(S,O)=>{O(S,{children:(z,Ue)=>{var xe=Ur(),he=f(xe);l(he,()=>pr,(de,ie)=>{ie(de,{children:(pe,ce)=>{g();var ge=re("Confirm System Prune");s(pe,ge)},$$slots:{default:!0}})});var Re=a(he,2);l(Re,()=>xr,(de,ie)=>{ie(de,{children:(pe,ce)=>{g();var ge=re("Select the resources you want to prune. This action permanently removes unused data and cannot be undone.");s(pe,ge)},$$slots:{default:!0}})}),s(z,xe)},$$slots:{default:!0}})});var Oe=a(Be,2),Pe=e(Oe),He=e(Pe);l(He,()=>pt,(S,O)=>{O(S,{id:"prune-containers",get disabled(){return R()},get checked(){return o(De)},set checked(z){tt(De,z,!0)}})});var St=a(He,2);gt(St,{for:"prune-containers",class:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:(S,O)=>{g();var z=re("Stopped Containers");s(S,z)},$$slots:{default:!0}}),t(Pe);var Ge=a(Pe,2),dt=e(Ge);l(dt,()=>pt,(S,O)=>{O(S,{id:"prune-images",get disabled(){return R()},get checked(){return o(n)},set checked(z){tt(n,z,!0)}})});var ct=a(dt,2);gt(ct,{for:"prune-images",class:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:(S,O)=>{g();var z=re();B(()=>C(z,`Unused Images (${we()==="dangling"?"Dangling Only":"All Unused"})`)),s(S,z)},$$slots:{default:!0}}),t(Ge);var We=a(Ge,2),Ce=e(We);l(Ce,()=>pt,(S,O)=>{O(S,{id:"prune-networks",get disabled(){return R()},get checked(){return o(x)},set checked(z){tt(x,z,!0)}})});var Qe=a(Ce,2);gt(Qe,{for:"prune-networks",class:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:(S,O)=>{g();var z=re("Unused Networks");s(S,z)},$$slots:{default:!0}}),t(We);var qe=a(We,2),vt=e(qe);l(vt,()=>pt,(S,O)=>{O(S,{id:"prune-volumes",get disabled(){return R()},class:"mt-1",get checked(){return o(me)},set checked(z){tt(me,z,!0)}})});var ut=a(vt,2),mt=e(ut);gt(mt,{for:"prune-volumes",class:"text-sm font-medium peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:(S,O)=>{g();var z=Nr();g(),s(S,z)},$$slots:{default:!0}}),g(2),t(ut),t(qe);var Pt=a(qe,2);{var Ee=S=>{var O=ue(),z=f(O);l(z,()=>Gt,(Ue,xe)=>{xe(Ue,{variant:"destructive",class:"mt-2",children:(he,Re)=>{var de=Tr(),ie=f(de);Jt(ie,{class:"size-4"});var pe=a(ie,2);l(pe,()=>Wt,(ge,Ie)=>{Ie(ge,{children:(Ne,be)=>{g();var _e=re("Warning: Pruning Volumes");s(Ne,_e)},$$slots:{default:!0}})});var ce=a(pe,2);l(ce,()=>Qt,(ge,Ie)=>{Ie(ge,{children:(Ne,be)=>{g();var _e=re("Pruning volumes permanently deletes data. Ensure you have backups if necessary.");s(Ne,_e)},$$slots:{default:!0}})}),s(he,de)},$$slots:{default:!0}})}),s(S,O)};E(Pt,S=>{o(me)&&S(Ee)})}t(Oe);var ft=a(Oe,2);l(ft,()=>gr,(S,O)=>{O(S,{children:(z,Ue)=>{var xe=Lr(),he=f(xe);st(he,{class:"arcane-button-cancel",variant:"outline",onclick:je,get disabled(){return R()},children:(ie,pe)=>{g();var ce=re("Cancel");s(ie,ce)},$$slots:{default:!0}});var Re=a(he,2);const de=I(()=>o(ke).length===0||R());st(Re,{class:"arcane-button-remove",variant:"destructive",onclick:Ve,get disabled(){return o(de)},children:(ie,pe)=>{var ce=ue(),ge=f(ce);{var Ie=be=>{var _e=Vr(),r=f(_e);at(r,{class:"mr-2 animate-spin size-4"}),g(),s(be,_e)},Ne=be=>{var _e=jr(),r=f(_e);qt(r,{class:"mr-2 size-4"});var h=a(r);B(()=>C(h,` Prune Selected (${o(ke).length??""})`)),s(be,_e)};E(ge,be=>{R()?be(Ie):be(Ne,!1)})}s(ie,ce)},$$slots:{default:!0}}),s(z,xe)},$$slots:{default:!0}})}),s(wt,lt)},$$slots:{default:!0}})}),s(Me,Le)},$$slots:{default:!0}})}),s(ne,ae),zt()}class Hr extends $r{async prune(d){if(!d||d.length===0)throw new Error("No prune types specified");const K=d.join(",");return(await this.api.post(`/system/prune?types=${K}`)).data}}var Er=Ft('<svg fill="currentColor" width="24" height="24" viewBox="0 0 24 24" role="img" xmlns="http://www.w3.org/2000/svg"><title>Docker icon</title><path d="M13.983 11.078h2.119a.186.186 0 00.186-.185V9.006a.186.186 0 00-.186-.186h-2.119a.185.185 0 00-.185.185v1.888c0 .102.083.185.185.185m-2.954-5.43h2.118a.186.186 0 00.186-.186V3.574a.186.186 0 00-.186-.185h-2.118a.185.185 0 00-.185.185v1.888c0 .102.082.185.185.185m0 2.716h2.118a.187.187 0 00.186-.186V6.29a.186.186 0 00-.186-.185h-2.118a.185.185 0 00-.185.185v1.887c0 .102.082.185.185.186m-2.93 0h2.12a.186.186 0 00.184-.186V6.29a.185.185 0 00-.185-.185H8.1a.185.185 0 00-.185.185v1.887c0 .102.083.185.185.186m-2.964 0h2.119a.186.186 0 00.185-.186V6.29a.185.185 0 00-.185-.185H5.136a.186.186 0 00-.186.185v1.887c0 .102.084.185.186.186m5.893 2.715h2.118a.186.186 0 00.186-.185V9.006a.186.186 0 00-.186-.186h-2.118a.185.185 0 00-.185.185v1.888c0 .102.082.185.185.185m-2.93 0h2.12a.185.185 0 00.184-.185V9.006a.185.185 0 00-.184-.186h-2.12a.185.185 0 00-.184.185v1.888c0 .102.083.185.185.185m-2.964 0h2.119a.185.185 0 00.185-.185V9.006a.185.185 0 00-.184-.186h-2.12a.186.186 0 00-.186.186v1.887c0 .102.084.185.186.185m-2.92 0h2.12a.185.185 0 00.184-.185V9.006a.185.185 0 00-.184-.186h-2.12a.185.185 0 00-.184.185v1.888c0 .102.082.185.185.185M23.763 9.89c-.065-.051-.672-.51-1.954-.51-.338.001-.676.03-1.01.087-.248-1.7-1.653-2.53-1.716-2.566l-.344-.199-.226.327c-.284.438-.49.922-.612 1.43-.23.97-.09 1.882.403 2.661-.595.332-1.55.413-1.744.42H.751a.751.751 0 00-.75.748 11.376 11.376 0 00.692 4.062c.545 1.428 1.355 2.48 2.41 3.124 1.18.723 3.1 1.137 5.275 1.137.983.003 1.963-.086 2.93-.266a12.248 12.248 0 003.823-1.389c.98-.567 1.86-1.288 2.61-2.136 1.252-1.418 1.998-2.997 2.553-4.4h.221c1.372 0 2.215-.549 2.68-1.009.309-.293.55-.65.707-1.046l.098-.288Z"></path></svg>');function Rr(ne,d){var K=Er();B(()=>Kt(K,0,Zt(d.class))),s(ne,K)}var Fr=Ft('<svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12" fill="currentColor"></path></svg>');function Kr(ne,d){var K=Fr();B(()=>Kt(K,0,Zt(d.class))),s(ne,K)}async function Zr(ne,d,K,R,we){d.starting||!K.dockerInfo||o(R)===0||(d.starting=!0,Dt({result:await Mt(we.startAll()),message:"Failed to Start All Containers",setLoadingState:Se=>d.starting=Se,onSuccess:async()=>{At.success("All Containers Started Successfully."),await xt()}}))}async function Gr(ne,d,K,R,we){d.stopping||!K.dockerInfo||o(R)===0||yr({title:"Stop All Containers",message:"Are you sure you want to stop all running containers?",confirm:{label:"Confirm",destructive:!1,action:async()=>{Dt({result:await Mt(we.stopAll()),message:"Failed to Stop All Running Containers",setLoadingState:Se=>d.stopping=Se,onSuccess:async()=>{At.success("All Containers Stopped Successfully."),await xt()}})}}})}var Wr=i("<!> Refresh",1),Qr=i(' <a href="/settings" class="underline">Settings</a>.',1),qr=i("<!> <!> <!>",1),Jr=i('<div class="mb-6"><!></div>'),Xr=i('<div class="flex items-center justify-between mb-4"><div class="flex items-center gap-3"><div class="bg-green-500/10 p-2.5 rounded-lg"><!></div> <div><p class="text-sm font-medium text-muted-foreground">Containers</p> <p class="text-2xl font-bold"> <span class="text-sm font-normal text-muted-foreground"> </span></p></div></div></div> <!> <div class="pt-4 border-t space-y-3"><div class="flex items-center gap-2"><!> <p class="text-sm font-medium text-muted-foreground">Docker Engine</p></div> <div class="grid grid-cols-2 gap-3 text-xs"><div><p class="text-muted-foreground">Version</p> <p class="font-medium"> </p></div> <div><p class="text-muted-foreground">OS</p> <p class="font-medium"> </p></div></div></div>',1),Yr=i('<div class="flex justify-between pt-1 border-t border-border/50"><span>Docker Images:</span> <span class="font-medium"> </span></div>'),ea=i('<div class="mb-4"><!></div> <div class="space-y-1 text-xs text-muted-foreground"><div class="flex justify-between"><span>Used:</span> <span class="font-medium"> </span></div> <div class="flex justify-between"><span>Total:</span> <span class="font-medium"> </span></div> <!></div>',1),ta=i('<div class="mb-4"><div class="text-center py-4"><p class="text-sm text-muted-foreground">System storage data unavailable</p></div></div> <div class="text-xs text-muted-foreground"><div class="flex justify-between"><span>Docker Images:</span> <span class="font-medium"> </span></div></div>',1),ra=i('<div class="text-center py-6"><p class="text-sm text-muted-foreground">No images stored</p></div>'),aa=i('<div class="text-center py-6"><p class="text-sm text-muted-foreground">Loading storage data...</p></div>'),sa=i('<div class="flex items-center justify-between mb-4"><div class="flex items-center gap-3"><div class="bg-blue-500/10 p-2.5 rounded-lg"><!></div> <div><p class="text-sm font-medium text-muted-foreground">Storage</p> <p class="text-2xl font-bold"> </p> <p class="text-xs text-muted-foreground">Docker images</p></div></div></div> <!>',1),oa=i('<div class="space-y-4"><!> <!></div> <p class="text-xs text-muted-foreground mt-3"> </p>',1),na=i('<div class="text-center py-6"><p class="text-sm text-muted-foreground">Loading stats...</p></div>'),ia=i('<div class="flex items-center justify-between mb-4"><div class="flex items-center gap-3"><div class="bg-purple-500/10 p-2.5 rounded-lg"><!></div> <div><p class="text-sm font-medium text-muted-foreground">Hardware</p> <div class="flex items-center gap-4 text-xs text-muted-foreground mt-1"><span> </span> <span> </span></div></div></div></div> <!>',1),la=i('<div class="grid grid-cols-1 md:grid-cols-3 gap-6"><!> <!> <!></div>'),da=(ne,d)=>d.isPruneDialogOpen=!0,ca=i('<a class="font-medium hover:underline" href="/containers">Containers</a>'),va=i("View All <!>",1),ua=i('<div class="flex items-center justify-between"><div><!> <!></div> <!></div>'),ma=i('<a class="font-medium hover:underline"> </a>'),fa=i("<!> <!> <!> <!>",1),pa=i('<div class="bg-muted/40 py-2 px-6 text-xs text-muted-foreground border-t"> </div>'),ga=i('<div class="flex flex-col h-full"><div class="flex-1"><!></div> <!></div>'),_a=i('<div class="flex flex-col items-center justify-center py-10 px-6 text-center"><!> <p class="text-sm text-muted-foreground">No containers found</p> <p class="text-xs text-muted-foreground mt-1">Use Docker CLI or another tool to create containers</p></div>'),xa=i("<!> <!>",1),ha=i('<a class="font-medium hover:underline" href="/images">Images</a>'),ba=i("View All <!>",1),$a=i('<div class="flex items-center justify-between"><div><!> <!></div> <!></div>'),ya=i('<div class="flex items-center gap-2"><div class="flex items-center flex-1"><!> <a class="font-medium hover:underline shrink truncate"> </a></div></div>'),wa=i("<!> <!> <!> <!>",1),Sa=i('<div class="bg-muted/40 py-2 px-6 text-xs text-muted-foreground border-t"> </div>'),Pa=i('<div class="flex flex-col h-full"><div class="flex-1"><!></div> <!></div>'),ka=i('<div class="flex flex-col items-center justify-center py-10 px-6 text-center"><!> <p class="text-sm text-muted-foreground">No images found</p> <p class="text-xs text-muted-foreground mt-1">Pull images using Docker CLI or another tool</p></div>'),Ca=i("<!> <!>",1),Ia=i('<div class="space-y-8"><div class="flex justify-between items-center"><div><h1 class="text-3xl font-bold tracking-tight">Dashboard</h1> <p class="text-sm text-muted-foreground mt-1">Overview of your Container Environment</p></div> <!></div> <!> <section><!></section> <section><h2 class="text-lg font-semibold tracking-tight mb-4">Quick Actions</h2> <div class="grid grid-cols-1 sm:grid-cols-3 gap-5"><button class="group relative flex flex-col items-center p-6 rounded-xl border bg-card shadow-sm hover:shadow-md transition-all disabled:opacity-60 disabled:cursor-not-allowed disabled:hover:shadow-sm"><div class="size-12 rounded-full flex items-center justify-center mb-4 bg-green-500/10 group-hover:bg-green-500/20 transition-colors"><!></div> <span class="text-base font-medium text-center">Start All Stopped</span> <span class="text-sm text-muted-foreground mt-1"> </span></button> <button class="group relative flex flex-col items-center p-6 rounded-xl border bg-card shadow-sm hover:shadow-md transition-all disabled:opacity-60 disabled:cursor-not-allowed disabled:hover:shadow-sm"><div class="size-12 rounded-full flex items-center justify-center mb-4 bg-blue-500/10 group-hover:bg-blue-500/20 transition-colors"><!></div> <span class="text-base font-medium text-center">Stop All Running</span> <span class="text-sm text-muted-foreground mt-1"> </span></button> <button class="group relative flex flex-col items-center p-6 rounded-xl border bg-card shadow-sm hover:shadow-md hover:border-destructive/50 transition-all disabled:opacity-60 disabled:cursor-not-allowed disabled:hover:shadow-sm disabled:hover:border-border"><div class="size-12 rounded-full flex items-center justify-center mb-4 bg-red-500/10 group-hover:bg-red-500/20 transition-colors"><!></div> <span class="text-base font-medium text-center">Prune System</span> <span class="text-sm text-muted-foreground mt-1">Clean unused resources</span></button></div></section> <section><h2 class="text-lg font-semibold tracking-tight mb-4">Resources</h2> <div class="grid grid-cols-1 lg:grid-cols-2 gap-6"><!> <!></div></section> <section class="border-t pt-4 mt-10"><div class="flex justify-between items-center text-muted-foreground text-sm"><div class="flex items-center"><a href="/settings" class="hover:text-foreground transition-colors" title="Settings"><!> <span class="sr-only">Settings</span></a> <span class="mx-2">•</span> <a href="https://github.com/ofkm/arcane" target="_blank" rel="noopener noreferrer" class="hover:text-foreground transition-colors" title="GitHub"><!> <span class="sr-only">GitHub</span></a></div> <div></div></div></section> <!></div>');function xs(ne,d){It(d,!0);const[K,R]=nr(),we=()=>ir(wr,"$maturityStore",K),Se=new br,Te=new Hr,De=new Pr;let n=Nt({dockerInfo:d.data.dockerInfo,containers:d.data.containers,images:d.data.images,settings:d.data.settings,error:d.data.error,isPruneDialogOpen:!1}),x=Nt({starting:!1,stopping:!1,refreshing:!1,pruning:!1});const me=I(()=>{var r;return((r=n.containers)==null?void 0:r.filter(h=>h.State==="running").length)??0}),ke=I(()=>{var r;return((r=n.containers)==null?void 0:r.filter(h=>h.State==="exited").length)??0}),Ve=I(()=>{var r;return((r=n.images)==null?void 0:r.reduce((h,A)=>h+(A.Size||0),0))??0}),je=I(()=>{var r;return(r=n.containers)!=null&&r.length?o(me)/n.containers.length*100:0});function ht(r){return r.Names&&r.Names.length>0?r.Names[0].startsWith("/")?r.Names[0].substring(1):r.Names[0]:ur(r.Id)}ar(()=>{n.dockerInfo=d.data.dockerInfo,n.containers=d.data.containers,n.images=d.data.images,n.settings=d.data.settings,n.error=d.data.error});let ae=rt(null);async function Ze(){try{const r=await fetch("/api/system/stats");r.ok&&tt(ae,await r.json(),!0)}catch(r){console.error("Failed to fetch server stats:",r)}}tr(()=>{(async()=>(await Me(),await Ze()))();const r=setInterval(Ze,5e3);return()=>clearInterval(r)});async function fe(){if(!x.refreshing){x.refreshing=!0;try{await xt(),await Ze()}catch(r){console.error("Error during dashboard refresh:",r),n.error="Failed to refresh dashboard data."}finally{x.refreshing=!1}}}async function bt(r){x.pruning||r.length===0||(x.pruning=!0,Dt({result:await Mt(Te.prune(r)),message:`Failed to Prune ${r.join(", ")}`,setLoadingState:h=>x.pruning=h,onSuccess:async()=>{n.isPruneDialogOpen=!1;const h=r.map(A=>Ot(A)).join(", ");At.success(`${h} ${r.length>1?"were":"was"} pruned successfully.`),await xt()}}))}async function Me(){if(!n.images||n.images.length===0)return;const r=[...n.images].sort((h,A)=>(A.Size||0)-(h.Size||0)).slice(0,5).filter(h=>h.repo!=="<none>"&&h.tag!=="<none>").map(h=>h.Id);if(r.length!==0)try{for(let A=0;A<r.length;A+=2){const $e=r.slice(A,A+2);await De.checkMaturityBatch($e),n.images=n.images.map(Z=>{const se=we().maturityData[Z.Id];return{...Z,maturity:se!==void 0?se:Z.maturity}}),A+2<r.length&&await new Promise(Z=>setTimeout(Z,50))}}catch(h){console.error("Error loading maturity data for dashboard images:",h)}}var ot=Ia(),Le=e(ot),$t=a(e(Le),2);const yt=I(()=>x.refreshing||x.starting||x.stopping||x.pruning);st($t,{variant:"outline",size:"sm",class:"h-9 arcane-button-restart",onclick:fe,get disabled(){return o(yt)},children:(r,h)=>{var A=Wr(),$e=f(A);{var Z=J=>{at(J,{class:"mr-2 animate-spin size-4"})},se=J=>{Ir(J,{class:"mr-2 size-4"})};E($e,J=>{x.refreshing?J(Z):J(se,!1)})}g(),s(r,A)},$$slots:{default:!0}}),t(Le);var nt=a(Le,2);{var wt=r=>{var h=ue(),A=f(h);l(A,()=>Gt,($e,Z)=>{Z($e,{variant:"destructive",children:(se,J)=>{var X=qr(),Y=f(X);Jt(Y,{class:"mr-2 size-4"});var le=a(Y,2);l(le,()=>Wt,(U,V)=>{V(U,{children:(F,te)=>{g();var P=re("Connection Error");s(F,P)},$$slots:{default:!0}})});var oe=a(le,2);l(oe,()=>Qt,(U,V)=>{V(U,{children:(F,te)=>{g();var P=Qr(),p=f(P);g(2),B(()=>C(p,`${n.error??""} Please check your Docker connection in `)),s(F,P)},$$slots:{default:!0}})}),s(se,X)},$$slots:{default:!0}})}),s(r,h)};E(nt,r=>{n.error&&r(wt)})}var it=a(nt,2),lt=e(it);kr(lt,{id:"system-overview",title:"System Overview",description:"Hardware and Docker engine information",get icon(){return Ar},defaultExpanded:!0,children:(r,h)=>{var A=la(),$e=e(A);l($e,()=>Ye,(J,X)=>{X(J,{class:"overflow-hidden",children:(Y,le)=>{var oe=ue(),U=f(oe);l(U,()=>et,(V,F)=>{F(V,{class:"p-6",children:(te,P)=>{var p=Xr(),m=f(p),b=e(m),c=e(b),j=e(c);Ht(j,{class:"text-green-500 size-5"}),t(c);var H=a(c,2),D=a(e(H),2),N=e(D),G=a(N),T=e(G);t(G),t(D),t(H),t(b),t(m);var ve=a(m,2);{var W=q=>{var w=Jr(),ye=e(w);const Fe=I(()=>o(je)>80?"warning":"default");_t(ye,{label:"Active Containers",get valueLabel(){return`${o(me)??""} running`},get value(){return o(je)},max:100,get variant(){return o(Fe)},size:"sm"}),t(w),s(q,w)};E(ve,q=>{var w;(w=n.containers)!=null&&w.length&&q(W)})}var Q=a(ve,2),L=e(Q),M=e(L);Rr(M,{class:"text-muted-foreground size-4"}),g(2),t(L);var y=a(L,2),_=e(y),$=a(e(_),2),k=e($,!0);t($),t(_);var v=a(_,2),u=a(e(v),2),ee=e(u,!0);t(u),t(v),t(y),t(Q),B(q=>{var w,ye;C(N,`${o(me)??""} `),C(T,`/ ${(((w=n.containers)==null?void 0:w.length)||0)??""}`),C(k,((ye=n.dockerInfo)==null?void 0:ye.ServerVersion)||"Unknown"),C(ee,q)},[()=>{var q,w;return((w=(q=n.dockerInfo)==null?void 0:q.OperatingSystem)==null?void 0:w.split(" ")[0])||"Unknown"}]),s(te,p)},$$slots:{default:!0}})}),s(Y,oe)},$$slots:{default:!0}})});var Z=a($e,2);l(Z,()=>Ye,(J,X)=>{X(J,{class:"overflow-hidden",children:(Y,le)=>{var oe=ue(),U=f(oe);l(U,()=>et,(V,F)=>{F(V,{class:"p-6",children:(te,P)=>{var p=sa(),m=f(p),b=e(m),c=e(b),j=e(c);Et(j,{class:"text-blue-500 size-5"}),t(c);var H=a(c,2),D=a(e(H),2),N=e(D,!0);t(D),g(2),t(H),t(b),t(m);var G=a(m,2);{var T=W=>{var Q=ea();const L=I(()=>Math.min(Math.max(o(ae).diskUsage/o(ae).diskTotal*100,0),100));var M=f(Q),y=e(M);const _=I(()=>o(L).toFixed(1)),$=I(()=>o(L)>85?"destructive":o(L)>70?"warning":"success");_t(y,{label:"System Storage",get valueLabel(){return`${o(_)??""}%`},get value(){return o(L)},max:100,get variant(){return o($)},size:"sm"}),t(M);var k=a(M,2),v=e(k),u=a(e(v),2),ee=e(u,!0);t(u),t(v);var q=a(v,2),w=a(e(q),2),ye=e(w,!0);t(w),t(q);var Fe=a(q,2);{var kt=ze=>{var Je=Yr(),Ut=a(e(Je),2),Xt=e(Ut,!0);t(Ut),t(Je),B(Yt=>C(Xt,Yt),[()=>Ke(o(Ve))]),s(ze,Je)};E(Fe,ze=>{o(Ve)>0&&ze(kt)})}t(k),B((ze,Je)=>{C(ee,ze),C(ye,Je)},[()=>Ke(o(ae).diskUsage),()=>Ke(o(ae).diskTotal)]),s(W,Q)},ve=(W,Q)=>{{var L=y=>{var _=ta(),$=a(f(_),2),k=e($),v=a(e(k),2),u=e(v,!0);t(v),t(k),t($),B(ee=>C(u,ee),[()=>Ke(o(Ve))]),s(y,_)},M=(y,_)=>{{var $=v=>{var u=ra();s(v,u)},k=v=>{var u=aa();s(v,u)};E(y,v=>{var u;((u=n.dockerInfo)==null?void 0:u.Images)===0?v($):v(k,!1)},_)}};E(W,y=>{o(Ve)>0?y(L):y(M,!1)},Q)}};E(G,W=>{var Q,L;(Q=o(ae))!=null&&Q.diskTotal&&((L=o(ae))==null?void 0:L.diskUsage)!==void 0?W(T):W(ve,!1)})}B(()=>{var W;return C(N,((W=n.dockerInfo)==null?void 0:W.Images)||0)}),s(te,p)},$$slots:{default:!0}})}),s(Y,oe)},$$slots:{default:!0}})});var se=a(Z,2);l(se,()=>Ye,(J,X)=>{X(J,{class:"overflow-hidden",children:(Y,le)=>{var oe=ue(),U=f(oe);l(U,()=>et,(V,F)=>{F(V,{class:"p-6",children:(te,P)=>{var p=ia(),m=f(p),b=e(m),c=e(b),j=e(c);zr(j,{class:"text-purple-500 size-5"}),t(c);var H=a(c,2),D=a(e(H),2),N=e(D),G=e(N);t(N);var T=a(N,2),ve=e(T,!0);t(T),t(D),t(H),t(b),t(m);var W=a(m,2);{var Q=M=>{var y=oa();const _=I(()=>Math.min(Math.max(o(ae).cpuUsage,0),100)),$=I(()=>Math.min(Math.max(o(ae).memoryUsage/o(ae).memoryTotal*100,0),100));var k=f(y),v=e(k);const u=I(()=>o(_).toFixed(1)),ee=I(()=>o(_)>80?"destructive":o(_)>60?"warning":"success");_t(v,{label:"CPU Usage",get valueLabel(){return`${o(u)??""}%`},get value(){return o(_)},max:100,get variant(){return o(ee)},size:"sm"});var q=a(v,2);const w=I(()=>o($).toFixed(1)),ye=I(()=>o($)>80?"destructive":o($)>60?"warning":"success");_t(q,{label:"Memory Usage",get valueLabel(){return`${o(w)??""}%`},get value(){return o($)},max:100,get variant(){return o(ye)},size:"sm"}),t(k);var Fe=a(k,2),kt=e(Fe,!0);t(Fe),B(()=>{var ze;return C(kt,((ze=n.dockerInfo)==null?void 0:ze.Architecture)||"Unknown arch")}),s(M,y)},L=M=>{var y=na();s(M,y)};E(W,M=>{o(ae)?M(Q):M(L,!1)})}B(M=>{var y;C(G,`${((y=n.dockerInfo)==null?void 0:y.NCPU)||"N/A"} cores`),C(ve,M)},[()=>{var M;return(M=n.dockerInfo)!=null&&M.MemTotal?Ke(n.dockerInfo.MemTotal,0):"N/A"}]),s(te,p)},$$slots:{default:!0}})}),s(Y,oe)},$$slots:{default:!0}})}),t(A),s(r,A)},$$slots:{default:!0}}),t(it);var Be=a(it,2),Oe=a(e(Be),2),Pe=e(Oe);Pe.__click=[Zr,x,n,ke,Se];var He=e(Pe),St=e(He);{var Ge=r=>{at(r,{class:"text-green-500 animate-spin size-6"})},dt=r=>{Mr(r,{class:"text-green-500 size-6"})};E(St,r=>{x.starting?r(Ge):r(dt,!1)})}t(He);var ct=a(He,4),We=e(ct);t(ct),t(Pe);var Ce=a(Pe,2);Ce.__click=[Gr,x,n,me,Se];var Qe=e(Ce),qe=e(Qe);{var vt=r=>{at(r,{class:"text-blue-500 animate-spin size-6"})},ut=r=>{Dr(r,{class:"text-blue-500 size-6"})};E(qe,r=>{x.stopping?r(vt):r(ut,!1)})}t(Qe);var mt=a(Qe,4),Pt=e(mt,!0);t(mt),t(Ce);var Ee=a(Ce,2);Ee.__click=[da,n];var ft=e(Ee),S=e(ft);{var O=r=>{at(r,{class:"text-red-500 animate-spin size-6"})},z=r=>{qt(r,{class:"text-red-500 size-6"})};E(S,r=>{x.pruning?r(O):r(z,!1)})}t(ft),g(4),t(Ee),t(Oe),t(Be);var Ue=a(Be,2),xe=a(e(Ue),2),he=e(xe);l(he,()=>Ye,(r,h)=>{h(r,{class:"border shadow-sm relative flex flex-col",children:(A,$e)=>{var Z=xa(),se=f(Z);l(se,()=>Vt,(X,Y)=>{Y(X,{class:"px-6",children:(le,oe)=>{var U=ua(),V=e(U),F=e(V);l(F,()=>jt,(m,b)=>{b(m,{children:(c,j)=>{var H=ca();s(c,H)},$$slots:{default:!0}})});var te=a(F,2);l(te,()=>Lt,(m,b)=>{b(m,{class:"pb-3",children:(c,j)=>{g();var H=re("Recent containers");s(c,H)},$$slots:{default:!0}})}),t(V);var P=a(V,2);const p=I(()=>!n.dockerInfo);st(P,{variant:"ghost",size:"sm",href:"/containers",get disabled(){return o(p)},children:(m,b)=>{g();var c=va(),j=a(f(c));Rt(j,{class:"ml-2 size-4"}),s(m,c)},$$slots:{default:!0}}),t(U),s(le,U)},$$slots:{default:!0}})});var J=a(se,2);l(J,()=>et,(X,Y)=>{Y(X,{class:"p-0 flex-1",children:(le,oe)=>{var U=ue(),V=f(U);{var F=P=>{var p=ga(),m=e(p),b=e(m);const c=I(()=>n.containers.slice(0,5).map(D=>({...D,displayName:ht(D),statusSortValue:vr(D.Status)})));Bt(b,{get data(){return o(c)},columns:[{accessorKey:"displayName",header:"Name"},{accessorKey:"Image",header:"Image"},{accessorKey:"State",header:"State"},{accessorKey:"statusSortValue",header:"Status"}],features:{filtering:!1,selection:!1},sort:{defaultSort:{id:"statusSortValue",desc:!1}},pagination:{pageSize:5,pageSizeOptions:[5]},display:{isDashboardTable:!0},rows:(N,G)=>{let T=()=>G==null?void 0:G().item;var ve=fa();const W=I(()=>hr[T().State.toLowerCase()]);var Q=f(ve);l(Q,()=>Ae,(_,$)=>{$(_,{children:(k,v)=>{var u=ma(),ee=e(u,!0);t(u),B(()=>{Tt(u,"href",`/containers/${T().Id??""}/`),C(ee,T().displayName)}),s(k,u)},$$slots:{default:!0}})});var L=a(Q,2);l(L,()=>Ae,(_,$)=>{$(_,{get title(){return T().Image},children:(k,v)=>{g();var u=re();B(ee=>C(u,ee),[()=>cr(T().Image,40)]),s(k,u)},$$slots:{default:!0}})});var M=a(L,2);l(M,()=>Ae,(_,$)=>{$(_,{children:(k,v)=>{const u=I(()=>Ot(T().State));Ct(k,{get variant(){return o(W)},get text(){return o(u)}})},$$slots:{default:!0}})});var y=a(M,2);l(y,()=>Ae,(_,$)=>{$(_,{children:(k,v)=>{g();var u=re();B(()=>C(u,T().Status)),s(k,u)},$$slots:{default:!0}})}),s(N,ve)},$$slots:{rows:!0}}),t(m);var j=a(m,2);{var H=D=>{var N=pa(),G=e(N);t(N),B(()=>C(G,`Showing 5 of ${n.containers.length??""} containers`)),s(D,N)};E(j,D=>{n.containers.length>5&&D(H)})}t(p),s(P,p)},te=(P,p)=>{{var m=b=>{var c=_a(),j=e(c);Ht(j,{class:"text-muted-foreground mb-2 opacity-40 size-8"}),g(4),t(c),s(b,c)};E(P,b=>{n.error||b(m)},p)}};E(V,P=>{var p;((p=n.containers)==null?void 0:p.length)>0?P(F):P(te,!1)})}s(le,U)},$$slots:{default:!0}})}),s(A,Z)},$$slots:{default:!0}})});var Re=a(he,2);l(Re,()=>Ye,(r,h)=>{h(r,{class:"border shadow-sm relative flex flex-col",children:(A,$e)=>{var Z=Ca(),se=f(Z);l(se,()=>Vt,(X,Y)=>{Y(X,{class:"px-6",children:(le,oe)=>{var U=$a(),V=e(U),F=e(V);l(F,()=>jt,(m,b)=>{b(m,{children:(c,j)=>{var H=ha();s(c,H)},$$slots:{default:!0}})});var te=a(F,2);l(te,()=>Lt,(m,b)=>{b(m,{class:"pb-3",children:(c,j)=>{g();var H=re("Top 5 Largest Images");s(c,H)},$$slots:{default:!0}})}),t(V);var P=a(V,2);const p=I(()=>!n.dockerInfo);st(P,{variant:"ghost",size:"sm",href:"/images",get disabled(){return o(p)},children:(m,b)=>{g();var c=ba(),j=a(f(c));Rt(j,{class:"ml-2 size-4"}),s(m,c)},$$slots:{default:!0}}),t(U),s(le,U)},$$slots:{default:!0}})});var J=a(se,2);l(J,()=>et,(X,Y)=>{Y(X,{class:"p-0 flex-1",children:(le,oe)=>{var U=ue(),V=f(U);{var F=P=>{var p=Pa(),m=e(p),b=e(m);const c=I(()=>n.images.slice().sort((D,N)=>(N.Size||0)-(D.Size||0)).slice(0,5));Bt(b,{get data(){return o(c)},columns:[{accessorKey:"repo",header:"Name"},{accessorKey:"inUse",header:" ",enableSorting:!1},{accessorKey:"tag",header:"Tag"},{accessorKey:"Size",header:"Size"}],features:{filtering:!1,selection:!1},pagination:{pageSize:5,pageSizeOptions:[5]},display:{isDashboardTable:!0},sort:{defaultSort:{id:"Size",desc:!0}},rows:(N,G)=>{let T=()=>G==null?void 0:G().item;var ve=wa(),W=f(ve);l(W,()=>Ae,(y,_)=>{_(y,{children:($,k)=>{var v=ya(),u=e(v),ee=e(u);const q=I(()=>!T().maturity);Sr(ee,{get maturity(){return T().maturity},get isLoadingInBackground(){return o(q)}});var w=a(ee,2),ye=e(w,!0);t(w),t(u),t(v),B(()=>{Tt(w,"href",`/images/${T().Id??""}/`),C(ye,T().repo)}),s($,v)},$$slots:{default:!0}})});var Q=a(W,2);l(Q,()=>Ae,(y,_)=>{_(y,{children:($,k)=>{var v=ue(),u=f(v);{var ee=w=>{Ct(w,{text:"Unused",variant:"amber"})},q=w=>{Ct(w,{text:"In Use",variant:"green"})};E(u,w=>{T().inUse?w(q,!1):w(ee)})}s($,v)},$$slots:{default:!0}})});var L=a(Q,2);l(L,()=>Ae,(y,_)=>{_(y,{children:($,k)=>{g();var v=re();B(()=>C(v,T().tag)),s($,v)},$$slots:{default:!0}})});var M=a(L,2);l(M,()=>Ae,(y,_)=>{_(y,{children:($,k)=>{g();var v=re();B(u=>C(v,u),[()=>Ke(T().Size)]),s($,v)},$$slots:{default:!0}})}),s(N,ve)},$$slots:{rows:!0}}),t(m);var j=a(m,2);{var H=D=>{var N=Sa(),G=e(N);t(N),B(()=>C(G,`Showing 5 of ${n.images.length??""} images`)),s(D,N)};E(j,D=>{n.images.length>5&&D(H)})}t(p),s(P,p)},te=(P,p)=>{{var m=b=>{var c=ka(),j=e(c);Et(j,{class:"text-muted-foreground mb-2 opacity-40 size-8"}),g(4),t(c),s(b,c)};E(P,b=>{n.error||b(m)},p)}};E(V,P=>{var p;((p=n.images)==null?void 0:p.length)>0?P(F):P(te,!1)})}s(le,U)},$$slots:{default:!0}})}),s(A,Z)},$$slots:{default:!0}})}),t(xe),t(Ue);var de=a(Ue,2),ie=e(de),pe=e(ie),ce=e(pe),ge=e(ce);Cr(ge,{class:"size-4"}),g(2),t(ce);var Ie=a(ce,4),Ne=e(Ie);Kr(Ne,{class:"fill-current size-4"}),g(2),t(Ie),t(pe),g(2),t(ie),t(de);var be=a(de,2);const _e=I(()=>{var r;return((r=n.settings)==null?void 0:r.pruneMode)||"dangling"});Or(be,{get isPruning(){return x.pruning},get imagePruneMode(){return o(_e)},onConfirm:bt,onCancel:()=>n.isPruneDialogOpen=!1,get open(){return n.isPruneDialogOpen},set open(r){n.isPruneDialogOpen=r}}),t(ot),B(()=>{Pe.disabled=!n.dockerInfo||o(ke)===0||x.starting||x.stopping||x.pruning,C(We,`${o(ke)??""} containers`),Ce.disabled=!n.dockerInfo||o(me)===0||x.starting||x.stopping||x.pruning,C(Pt,o(me)),Ee.disabled=!n.dockerInfo||x.starting||x.stopping||x.pruning}),s(ne,ot),zt(),R()}er(["click"]);export{xs as component};
