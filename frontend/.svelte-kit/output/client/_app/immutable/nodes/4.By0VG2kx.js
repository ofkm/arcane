import{d as Ve,f as x,a as c,s as g}from"../chunks/zguDtZw-.js";import{o as ze}from"../chunks/hybYrdok.js";import{p as Ue,b as G,d as We,s,t as k,a as qe,c as a,e as f,g as r,r as t,h as w}from"../chunks/SIFgIYqZ.js";import{i as y}from"../chunks/D4OMRqmI.js";import{e as le,i as ve,a as ce}from"../chunks/CCdH-GF7.js";import{g as Be,i as Je}from"../chunks/CGNubMbN.js";import{t as Ke}from"../chunks/BJCWvCOq.js";import"../chunks/CWlk9DSI.js";import{g as C,f as Qe}from"../chunks/gYT1oUgQ.js";import{o as Xe}from"../chunks/BUdkjQ9d.js";import{h as Ye,t as Ze}from"../chunks/CHemGuYG.js";import"../chunks/DsjzulNM.js";import{A as O}from"../chunks/DJtaXGK5.js";import{L as ge}from"../chunks/BjTWgG3-.js";import{R as et}from"../chunks/B877H2_W.js";import{C as tt}from"../chunks/CX4OS9M0.js";import{M as xe}from"../chunks/Cm35N4Au.js";import{C as at}from"../chunks/BfFJ5vja.js";import{H as rt}from"../chunks/B3rBFWl_.js";import{C as st}from"../chunks/B-YH0pa3.js";async function it(V,_,u,m){try{f(_,!0),f(u,"");const l=await fetch("/api/agents");if(!l.ok)throw new Error(`HTTP ${l.status}: ${l.statusText}`);const D=await l.json();f(m,D.agents||[],!0)}catch(l){console.error("Failed to load agents:",l),f(u,l instanceof Error?l.message:"Unknown error",!0)}finally{f(_,!1)}}var ot=x('<div class="bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-700 dark:text-red-400 px-4 py-3 rounded-lg mb-6"><div class="flex items-center gap-2"><!> <strong>Error:</strong> </div></div>'),dt=x('<div class="text-center py-16"><!> <h3 class="text-lg font-medium text-gray-900 dark:text-white mb-2">No agents registered</h3> <p class="text-gray-600 dark:text-gray-400 mb-4">Get started by connecting your first agent</p> <div class="bg-gray-50 dark:bg-gray-800 rounded-lg p-4 max-w-md mx-auto"><p class="text-sm text-gray-600 dark:text-gray-400">Make sure your Go agent is running and connecting to:</p> <code class="text-sm font-mono bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200 px-2 py-1 rounded mt-2 inline-block">http://localhost:3000/agent/register</code></div></div>'),nt=x('<div class="grid grid-cols-2 gap-2 py-3 border-t border-gray-100 dark:border-gray-700"><div class="text-center"><div class="flex items-center justify-center gap-1 mb-1"><!> <span class="text-xs text-gray-500 dark:text-gray-400">Containers</span></div> <p class="text-sm font-semibold text-gray-900 dark:text-white"> </p></div> <div class="text-center"><div class="flex items-center justify-center gap-1 mb-1"><!> <span class="text-xs text-gray-500 dark:text-gray-400">Images</span></div> <p class="text-sm font-semibold text-gray-900 dark:text-white"> </p></div></div>'),lt=x('<div class="py-3 border-t border-gray-100 dark:border-gray-700"><p class="text-xs text-gray-400 text-center">No metrics data available</p></div>'),vt=x('<span class="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400"> </span>'),ct=x('<span class="text-gray-400 dark:text-gray-500 text-sm">None</span>'),gt=x('<div class="mt-4 p-3 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-800"><div class="flex items-center gap-2"><!> <p class="text-sm font-medium text-green-700 dark:text-green-400">Ready to receive commands</p></div></div>'),xt=x('<div class="bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6 hover:shadow-lg transition-shadow"><div class="flex items-start justify-between mb-4"><div class="flex items-center gap-3"><div class="relative"><div class="w-12 h-12 bg-gray-100 dark:bg-gray-700 rounded-lg flex items-center justify-center"><!></div> <div></div></div> <div><h3 class="font-semibold text-gray-900 dark:text-white"> </h3> <p class="text-xs text-gray-500 dark:text-gray-400 font-mono"> </p></div></div> <span> </span></div> <div class="space-y-3"><div class="grid grid-cols-2 gap-4 text-sm"><div><span class="text-gray-500 dark:text-gray-400">Platform</span> <p class="font-medium text-gray-900 dark:text-white capitalize"> </p></div> <div><span class="text-gray-500 dark:text-gray-400">Version</span> <p class="font-medium text-gray-900 dark:text-white"> </p></div></div> <!> <div><span class="text-gray-500 dark:text-gray-400 text-sm">Capabilities</span> <div class="flex flex-wrap gap-1 mt-1"></div></div> <div class="pt-3 border-t border-gray-100 dark:border-gray-700"><p class="text-xs text-gray-500 dark:text-gray-400"> </p></div></div> <!> <div class="mt-4 flex gap-2"><!> <!> <!></div></div>'),mt=x('<div class="grid gap-6 md:grid-cols-2 lg:grid-cols-3"></div>'),pt=x('<div class="fixed bottom-4 right-4 bg-blue-600 text-white px-3 py-2 rounded-lg shadow-lg flex items-center gap-2"><!> <span class="text-sm">Refreshing...</span></div>'),ft=x('<div class="container mx-auto px-6 py-8"><div class="flex justify-between items-center mb-8"><div><h1 class="text-3xl font-bold text-gray-900 dark:text-white">Agent Management</h1> <p class="text-gray-600 dark:text-gray-400 mt-1">Manage and monitor your remote agents</p></div> <button class="flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed"><!> </button></div> <!> <!> <!></div>');function It(V,_){Ue(_,!0);let u=G(We(_.data.agents||[])),m=G(!1),l=G("");ze(()=>{const e=setInterval(D,3e4);return()=>clearInterval(e)});async function D(){if(!r(m))try{f(m,!0);const e=await fetch("/api/agents");if(!e.ok)throw new Error(`HTTP ${e.status}: ${e.statusText}`);const o=await e.json();f(u,o.agents||[],!0),f(l,"")}catch(e){console.error("Failed to refresh agents:",e)}finally{f(m,!1)}}async function me(e,o){Xe({title:"Confirm Removal",message:"Are you sure you want to remove this Agent? This action cannot be undone.",confirm:{label:"Remove",destructive:!0,action:async()=>{Ye({result:await Ze(fetch(`/api/agents/${e}`,{method:"DELETE",credentials:"include"})),message:"Failed to Remove Agent",onSuccess:async()=>{Ke.success("Agent Removed Successfully"),await Je()}})}}})}function pe(e){return C(e)==="online"?"bg-green-500":"bg-red-500"}function fe(e){return C(e)==="online"?"Online":"Offline"}function z(e){Be(`/agents/${e}`)}var R=ft(),S=a(R),A=s(a(S),2);A.__click=[it,m,l,u];var U=a(A);{var ue=e=>{ge(e,{class:"h-4 w-4 animate-spin"})},be=e=>{et(e,{class:"h-4 w-4"})};y(U,e=>{r(m)?e(ue):e(be,!1)})}var ye=s(U);t(A),t(S);var W=s(S,2);{var _e=e=>{var o=ot(),b=a(o),i=a(b);tt(i,{class:"h-5 w-5"});var h=s(i,3);t(b),t(o),k(()=>g(h,` ${r(l)??""}`)),c(e,o)};y(W,e=>{r(l)&&e(_e)})}var q=s(W,2);{var he=e=>{var o=dt(),b=a(o);xe(b,{class:"h-16 w-16 text-gray-400 mx-auto mb-4"}),w(6),t(o),c(e,o)},ke=e=>{var o=mt();le(o,21,()=>r(u),ve,(b,i)=>{var h=xt(),T=a(h),j=a(T),E=a(j),M=a(E),Ae=a(M);xe(Ae,{class:"h-6 w-6 text-gray-600 dark:text-gray-400"}),t(M);var De=s(M,2);t(E);var B=s(E,2),L=a(B),Re=a(L,!0);t(L);var J=s(L,2),Se=a(J,!0);t(J),t(B),t(j);var H=s(j,2),Te=a(H,!0);t(H),t(T);var N=s(T,2),F=a(N),I=a(F),K=s(a(I),2),je=a(K,!0);t(K),t(I);var Q=s(I,2),X=s(a(Q),2),Ee=a(X,!0);t(X),t(Q),t(F);var Y=s(F,2);{var Me=d=>{var n=nt(),v=a(n),p=a(v),Pe=a(p);at(Pe,{class:"h-3 w-3 text-blue-600 dark:text-blue-400"}),w(2),t(p);var oe=s(p,2),$e=a(oe,!0);t(oe),t(v);var de=s(v,2),$=a(de),Ge=a($);rt(Ge,{class:"h-3 w-3 text-green-600 dark:text-green-400"}),w(2),t($);var ne=s($,2),Oe=a(ne,!0);t(ne),t(de),t(n),k(()=>{g($e,r(i).metrics.containerCount??0),g(Oe,r(i).metrics.imageCount??0)}),c(d,n)},Le=d=>{var n=lt();c(d,n)};y(Y,d=>{r(i).metrics?d(Me):d(Le,!1)})}var P=s(Y,2),Z=s(a(P),2);le(Z,21,()=>r(i).capabilities,ve,(d,n)=>{var v=vt(),p=a(v,!0);t(v),k(()=>g(p,r(n))),c(d,v)},d=>{var n=ct();c(d,n)}),t(Z),t(P);var ee=s(P,2),te=a(ee),He=a(te);t(te),t(ee),t(N);var ae=s(N,2);{var Ne=d=>{var n=gt(),v=a(n),p=a(v);st(p,{class:"h-4 w-4 text-green-600 dark:text-green-400"}),w(2),t(v),t(n),c(d,n)};y(ae,d=>{C(r(i))==="online"&&d(Ne)})}var re=s(ae,2),se=a(re);O(se,{action:"inspect",onClick:()=>z(r(i).id),label:"View Details",class:"flex-1"});var ie=s(se,2);{var Fe=d=>{O(d,{action:"edit",onClick:()=>z(r(i).id),label:"Manage",class:"flex-1"})};y(ie,d=>{C(r(i))==="online"&&d(Fe)})}var Ie=s(ie,2);O(Ie,{action:"remove",onClick:()=>me(r(i).id,r(i).hostname),label:"Delete",loadingLabel:"Deleting...",class:"flex-1"}),t(re),t(h),k((d,n,v,p)=>{ce(De,1,`absolute -top-1 -right-1 w-4 h-4 ${d??""} rounded-full border-2 border-white dark:border-gray-800`),g(Re,r(i).hostname),g(Se,r(i).id),ce(H,1,`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${n??""}`),g(Te,v),g(je,r(i).platform),g(Ee,r(i).version),g(He,`Last seen: ${p??""} ago`)},[()=>pe(r(i)),()=>C(r(i))==="online"?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400",()=>fe(r(i)),()=>Qe(new Date(r(i).lastSeen))]),c(b,h)}),t(o),c(e,o)};y(q,e=>{r(u).length===0?e(he):e(ke,!1)})}var we=s(q,2);{var Ce=e=>{var o=pt(),b=a(o);ge(b,{class:"h-4 w-4 animate-spin"}),w(2),t(o),c(e,o)};y(we,e=>{r(m)&&r(u).length>0&&e(Ce)})}t(R),k(()=>{A.disabled=r(m),g(ye,` ${r(m)?"Loading...":"Refresh"}`)}),c(V,R),qe()}Ve(["click"]);export{It as component};
