import{c as ie,a as n,f as m,t as se,s as R,h as me}from"../chunks/zguDtZw-.js";import{p as oe,f as T,n as fe,a as ne,c as u,s as c,r as v,t as k,h as z,b as $,d as H,i as ee,$ as pe,g as r,e as te}from"../chunks/SIFgIYqZ.js";import{s as ge,r as de,p as ae,i as b,a as _e,b as ye}from"../chunks/D4OMRqmI.js";import{c as j}from"../chunks/BmbK19Nn.js";import{I as xe,s as ce,g as be,a as Se,h as we,r as ke,c as Ce}from"../chunks/CCdH-GF7.js";import{C as Te}from"../chunks/BUTdIsFV.js";import{a as De,b as Ie,C as Pe}from"../chunks/B9HEA4Xl.js";import{C as Ae}from"../chunks/B5ui7ZgY.js";import{I as Me}from"../chunks/87Ty6o0e.js";import{L as Ue}from"../chunks/DUYgD2_s.js";import{B as Le}from"../chunks/DsjzulNM.js";import{s as Re,u as le,a as q}from"../chunks/DGZIYs0n.js";import{t as je}from"../chunks/BJCWvCOq.js";import"../chunks/CWlk9DSI.js";import{i as ze}from"../chunks/CGNubMbN.js";import{h as Ne,t as Be}from"../chunks/CHemGuYG.js";import{R as Ee}from"../chunks/B877H2_W.js";import{S as Ge}from"../chunks/BKkfcLAR.js";function Ve(D,e){oe(e,!0);let f=de(e,["$$slots","$$events","$$legacy"]);const I=[["path",{d:"M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z"}],["path",{d:"M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z"}],["path",{d:"M12 2v2"}],["path",{d:"M12 22v-2"}],["path",{d:"m17 20.66-1-1.73"}],["path",{d:"M11 10.27 7 3.34"}],["path",{d:"m20.66 17-1.73-1"}],["path",{d:"m3.34 7 1.73 1"}],["path",{d:"M14 12h8"}],["path",{d:"M2 12h2"}],["path",{d:"m20.66 7-1.73 1"}],["path",{d:"m3.34 17 1.73-1"}],["path",{d:"m17 3.34-1 1.73"}],["path",{d:"m11 13.73-4 6.93"}]];xe(D,ge({name:"cog"},()=>f,{get iconNode(){return I},children:(P,p)=>{var d=ie(),s=T(d);ce(s,()=>e.children??fe),n(P,d)},$$slots:{default:!0}})),ne()}var We=m('<p class="text-muted-foreground mt-1 text-xs"> </p>'),Ze=m('<p class="mt-1 text-sm text-red-500"> </p>'),Fe=m('<p class="mt-1 text-xs text-muted-foreground"> </p>'),He=m('<p class="mt-1 text-xs font-bold text-destructive"> </p>'),qe=m("<div><!> <!> <div><!> <!> <!> <!></div></div>");function re(D,e){var g;oe(e,!0);let f=ae(e,"input",15),I=ae(e,"disabled",3,!1),P=ae(e,"type",3,"text"),p=de(e,["$$slots","$$events","$$legacy","input","label","description","helpText","warningText","placeholder","disabled","type","children"]);const d=(g=e.label)==null?void 0:g.toLowerCase().replace(/ /g,"-");var s=qe();be(s,()=>({...p}));var _=u(s);{var N=a=>{Ue(a,{class:"mb-0",get for(){return d},children:(t,o)=>{z();var l=se();k(()=>R(l,e.label)),n(t,l)},$$slots:{default:!0}})};b(_,a=>{e.label&&a(N)})}var B=c(_,2);{var J=a=>{var t=We(),o=u(t,!0);v(t),k(()=>R(o,e.description)),n(a,t)};b(B,a=>{e.description&&a(J)})}var A=c(B,2),E=u(A);{var M=a=>{var t=ie(),o=T(t);ce(o,()=>e.children),n(a,t)},U=(a,t)=>{{var o=l=>{Me(l,{get id(){return d},get placeholder(){return e.placeholder},get type(){return P()},get disabled(){return I()},get value(){return f().value},set value(h){f(f().value=h,!0)}})};b(a,l=>{f()&&l(o)},t)}};b(E,a=>{e.children?a(M):a(U,!1)})}var G=c(E,2);{var L=a=>{var t=Ze(),o=u(t,!0);v(t),k(()=>R(o,f().error)),n(a,t)};b(G,a=>{var t;(t=f())!=null&&t.error&&a(L)})}var V=c(G,2);{var W=a=>{var t=Fe(),o=u(t,!0);v(t),k(()=>R(o,e.helpText)),n(a,t)};b(V,a=>{e.helpText&&a(W)})}var i=c(V,2);{var y=a=>{var t=He(),o=u(t,!0);v(t),k(()=>R(o,e.warningText)),n(a,t)};b(i,a=>{e.warningText&&a(y)})}v(A),v(s),k(()=>Se(A,1,we(e.label||e.description?"mt-2":""))),n(D,s),ne()}var Je=m("<!> Saving...",1),Ke=m("<!> Save Settings",1),Oe=m('<div class="flex items-center gap-2"><div class="bg-primary/10 p-2 rounded-full"><!></div> <div><!> <!></div></div>'),Qe=m('<div class="space-y-6"><!> <!> <!></div>'),Xe=m("<!> <!>",1),Ye=m('<div class="space-y-6"><div class="flex flex-col sm:flex-row justify-between sm:items-center gap-4"><div><h1 class="text-3xl font-bold tracking-tight">General Settings</h1> <p class="text-sm text-muted-foreground mt-1">Core configuration for how Arcane operates</p></div> <!></div> <div class="grid auto-cols-auto lg:auto-cols-auto gap-6"><!></div> <input type="hidden" id="csrf_token"/></div>');function gt(D,e){oe(e,!0);const[f,I]=_e(),P=()=>ye(q,"$settingsStore",f);let p=$(H({value:"",valid:!0,touched:!1,error:null,errors:[]})),d=$(H({value:"",valid:!0,touched:!1,error:null,errors:[]})),s=$(H({value:30,valid:!0,touched:!1,error:null,errors:[]})),_=H({saving:!1});ee(()=>{const i=P();r(p).touched||(r(p).value=i.stacksDirectory||"data/stacks"),r(d).touched||(r(d).value=i.baseServerUrl||"localhost"),r(s).touched||(r(s).value=i.maturityThresholdDays||30)});let N=!1;ee(()=>{e.data.settings&&le(e.data.settings)}),ee(()=>{e.data.settings&&!N&&(le(e.data.settings),r(p).value=e.data.settings.stacksDirectory||"data/stacks",r(d).value=e.data.settings.baseServerUrl||"localhost",r(s).value=e.data.settings.maturityThresholdDays||30,N=!0)});function B(){r(p).touched=!0,q.update(i=>({...i,stacksDirectory:r(p).value}))}function J(){r(d).touched=!0,q.update(i=>({...i,baseServerUrl:r(d).value}))}function A(){r(s).touched=!0;const i=r(s).value,y=parseInt(String(i),10);isNaN(y)?(r(s).valid=!1,r(s).error="Please enter a valid whole number."):(r(s).value=y,q.update(g=>({...g,maturityThresholdDays:y})),r(s).valid=!0,r(s).error=null)}async function E(){_.saving||(_.saving=!0,Ne({result:await Be(Re()),message:"Error Saving Settings",setLoadingState:i=>_.saving=i,onSuccess:async()=>{je.success("Settings Saved Successfully"),await ze()}}))}var M=Ye();me(i=>{pe.title="General Settings - Arcane"});var U=u(M),G=c(u(U),2);Le(G,{onclick:E,get disabled(){return _.saving},class:"h-10 arcane-button-save",children:(i,y)=>{var g=ie(),a=T(g);{var t=l=>{var h=Je(),S=T(h);Ee(S,{class:"animate-spin size-4"}),z(),n(l,h)},o=l=>{var h=Ke(),S=T(h);Ge(S,{class:"size-4"}),z(),n(l,h)};b(a,l=>{_.saving?l(t):l(o,!1)})}n(i,g)},$$slots:{default:!0}}),v(U);var L=c(U,2),V=u(L);j(V,()=>Te,(i,y)=>{y(i,{class:"border shadow-sm",children:(g,a)=>{var t=Xe(),o=T(t);j(o,()=>De,(h,S)=>{S(h,{class:"pb-3",children:(K,ue)=>{var w=Oe(),C=u(w),Z=u(C);Ve(Z,{class:"text-primary size-5"}),v(C);var F=c(C,2),x=u(F);j(x,()=>Ie,(O,Q)=>{Q(O,{children:(X,he)=>{z();var Y=se("Core Arcane Configuration");n(X,Y)},$$slots:{default:!0}})});var ve=c(x,2);j(ve,()=>Ae,(O,Q)=>{Q(O,{children:(X,he)=>{z();var Y=se("Essential settings for how Arcane operates.");n(X,Y)},$$slots:{default:!0}})}),v(F),v(w),n(K,w)},$$slots:{default:!0}})});var l=c(o,2);j(l,()=>Pe,(h,S)=>{S(h,{children:(K,ue)=>{var w=Qe(),C=u(w);re(C,{type:"text",id:"stacksDirectory",label:"Stack Projects Directory",placeholder:"data/stacks",description:"The primary folder where Arcane will store and manage your Docker Compose stack projects. This path is inside Arcane's container.",warningText:"Important: Changing this path will not automatically move existing stack projects.",oninput:()=>B(),get input(){return r(p)},set input(x){te(p,x,!0)}});var Z=c(C,2);re(Z,{type:"text",id:"baseServerUrl",label:"Default Service Access URL",placeholder:"localhost",description:"When Arcane provides links to your services (e.g., web UIs), this URL (like 'localhost' or an IP address) is used as the default. This is primarily for services not on directly accessible networks (e.g., macvlan).",oninput:()=>J(),get input(){return r(d)},set input(x){te(d,x,!0)}});var F=c(Z,2);re(F,{type:"number",id:"maturityThresholdDays",label:"Image Maturity Threshold (days)",placeholder:"30",description:"The number of days after an image release before it's considered 'matured'.",warningText:"Higher values mean more caution with new images.",oninput:()=>A(),get input(){return r(s)},set input(x){te(s,x,!0)}}),v(w),n(K,w)},$$slots:{default:!0}})}),n(g,t)},$$slots:{default:!0}})}),v(L);var W=c(L,2);ke(W),v(M),k(()=>Ce(W,e.data.csrf)),n(D,M),ne(),I()}export{gt as component};
