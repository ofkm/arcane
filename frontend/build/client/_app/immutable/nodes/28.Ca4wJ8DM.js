import{c as q,a as e,f as v,t as U,s as ie,e as ft}from"../chunks/zguDtZw-.js";import{p as nt,d as Ne,f as o,a as it,h as g,s as r,c as f,r as p,t as de,g as X,u as oe,i as pt}from"../chunks/SIFgIYqZ.js";import{p as Te,i as xe,s as Qe}from"../chunks/D4OMRqmI.js";import{c as t}from"../chunks/BmbK19Nn.js";import{e as _t,b as $t}from"../chunks/CCdH-GF7.js";import{C as Re}from"../chunks/BUTdIsFV.js";import{C as Oe,a as gt,b as ht}from"../chunks/B9HEA4Xl.js";import{B as Xe}from"../chunks/DsjzulNM.js";import{t as ke}from"../chunks/BJCWvCOq.js";import"../chunks/CWlk9DSI.js";import{U as bt,T as Pe,E as xt}from"../chunks/D2ZQhq98.js";import{A as Pt}from"../chunks/m9ItHG6J.js";import{A as yt,a as Dt}from"../chunks/iMjrFJrG.js";import{i as Fe,g as wt}from"../chunks/CGNubMbN.js";import{p as Ct}from"../chunks/B1ASiaS-.js";import{D as St,a as kt,b as Vt,c as Nt,R as Lt}from"../chunks/UVnX9grY.js";import{I as Ut}from"../chunks/87Ty6o0e.js";import{L as Ve}from"../chunks/DUYgD2_s.js";import{T as Ye}from"../chunks/B2pR1KHz.js";import{R as At,A as It,a as zt,b as Tt,D as Ze,F as Rt}from"../chunks/DzaAsv10.js";import{R as Ot,S as Ft,a as Et,b as jt}from"../chunks/C73rBIzk.js";import{A as ye,S as Kt}from"../chunks/DJtaXGK5.js";import{D as Mt}from"../chunks/BNz4MoZq.js";import{R as et,T as tt,D as rt,G as Bt}from"../chunks/CNwxKbLf.js";import{o as st}from"../chunks/BUdkjQ9d.js";import{t as Ee,h as je}from"../chunks/CHemGuYG.js";import{V as Gt}from"../chunks/1rCL2Ywu.js";import{S as Ht}from"../chunks/mAxAJ61f.js";import{t as at}from"../chunks/BXZ-8GCb.js";import{D as ot}from"../chunks/B5Po4twO.js";import{H as Wt}from"../chunks/B3rBFWl_.js";import{D as qt}from"../chunks/DLcUb980.js";import{C as Jt}from"../chunks/DivMWeKY.js";import{D as lt}from"../chunks/CuZ1HGtB.js";import{D as Qt}from"../chunks/CdIEgevt.js";import{L as Xt}from"../chunks/BjTWgG3-.js";import{T as Yt}from"../chunks/BhZTThSR.js";import{C as Zt}from"../chunks/CX4OS9M0.js";var er=v("<!> <!>",1),tr=v("<span> </span>"),rr=v("<!> <!>",1),sr=v('<div class="grid gap-4 pt-2"><div><!> <!> <p class="text-xs text-muted-foreground mt-1">Enter driver-specific options as key=value pairs, one per line</p></div> <div><!> <!> <p class="text-xs text-muted-foreground mt-1">Enter metadata labels as key=value pairs, one per line</p></div></div>'),ar=v("<!> <!>",1),or=v("<!> <!>",1),lr=v('<!> <form class="grid gap-4 py-4"><div class="grid grid-cols-4 items-center gap-4"><!> <!></div> <div class="grid grid-cols-4 items-center gap-4"><!> <div class="col-span-3"><!></div></div> <!></form> <!>',1);function nr(Le,Y){nt(Y,!0);let l=Te(Y,"open",15,!1),Z=Te(Y,"isCreating",3,!1),le=Te(Y,"onSubmit",3,()=>{}),i=Ne({volumeName:"",volumeDriver:"local",volumeOptText:"",volumeLabels:""});const De=[{label:"Local",value:"local"},{label:"NFS",value:"nfs"},{label:"AWS EBS",value:"awsElasticBlockStore"},{label:"Azure Disk",value:"azure_disk"},{label:"GCE Persistent Disk",value:"gcePersistentDisk"}];function ue(B){if(!B.trim())return{};const J={},ee=B.split(`
`);for(const ce of ee){const te=ce.trim();if(!te||!te.includes("="))continue;const[ve,...me]=te.split("="),_e=me.join("=");ve.trim()&&(J[ve.trim()]=_e.trim())}return J}function we(){if(!i.volumeName.trim())return;const B=ue(i.volumeOptText),J=ue(i.volumeLabels),ee={Name:i.volumeName.trim(),Driver:i.volumeDriver,DriverOpts:Object.keys(B).length?B:void 0,Labels:Object.keys(J).length?J:void 0};le()(ee),l(!1)}var Ce=q(),Ue=o(Ce);t(Ue,()=>Lt,(B,J)=>{J(B,{get open(){return l()},set open(ee){l(ee)},children:(ee,ce)=>{var te=q(),ve=o(te);t(ve,()=>St,(me,_e)=>{_e(me,{class:"sm:max-w-[500px]",children:(a,S)=>{var O=lr(),re=o(O);t(re,()=>kt,(s,h)=>{h(s,{children:(y,A)=>{var d=er(),n=o(d);t(n,()=>Vt,(D,V)=>{V(D,{children:(T,W)=>{g();var b=U("Create New Volume");e(T,b)},$$slots:{default:!0}})});var k=r(n,2);t(k,()=>Mt,(D,V)=>{V(D,{children:(T,W)=>{g();var b=U("Enter the details for the new Docker volume.");e(T,b)},$$slots:{default:!0}})}),e(y,d)},$$slots:{default:!0}})});var u=r(re,2),F=oe(()=>Ct(we)),z=f(u),E=f(z);Ve(E,{for:"volume-name",class:"text-right",children:(s,h)=>{g();var y=U("Name");e(s,y)},$$slots:{default:!0}});var j=r(E,2);Ut(j,{id:"volume-name",class:"col-span-3",placeholder:"e.g., my-app-data",required:!0,get disabled(){return Z()},get value(){return i.volumeName},set value(s){i.volumeName=s}}),p(z);var K=r(z,2),M=f(K);Ve(M,{for:"volume-driver",class:"text-right",children:(s,h)=>{g();var y=U("Driver");e(s,y)},$$slots:{default:!0}});var $=r(M,2),L=f($);t(L,()=>Ot,(s,h)=>{h(s,{type:"single",get disabled(){return Z()},get value(){return i.volumeDriver},set value(y){i.volumeDriver=y},children:(y,A)=>{var d=rr(),n=o(d);t(n,()=>Ft,(D,V)=>{V(D,{class:"w-full",children:(T,W)=>{var b=tr(),x=f(b,!0);p(b),de(c=>ie(x,c),[()=>{var c;return((c=De.find(_=>_.value===i.volumeDriver))==null?void 0:c.label)||"Select a driver"}]),e(T,b)},$$slots:{default:!0}})});var k=r(n,2);t(k,()=>Et,(D,V)=>{V(D,{children:(T,W)=>{var b=q(),x=o(b);_t(x,17,()=>De,c=>c.value,(c,_)=>{var w=q(),m=o(w);t(m,()=>jt,(P,R)=>{R(P,{get value(){return X(_).value},children:(N,I)=>{g();var C=U();de(()=>ie(C,X(_).label)),e(N,C)},$$slots:{default:!0}})}),e(c,w)}),e(T,b)},$$slots:{default:!0}})}),e(y,d)},$$slots:{default:!0}})}),p($),p(K);var G=r(K,2);t(G,()=>At,(s,h)=>{h(s,{type:"single",children:(y,A)=>{var d=q(),n=o(d);t(n,()=>It,(k,D)=>{D(k,{value:"advanced",children:(V,T)=>{var W=ar(),b=o(W);t(b,()=>zt,(c,_)=>{_(c,{children:(w,m)=>{g();var P=U("Advanced Settings");e(w,P)},$$slots:{default:!0}})});var x=r(b,2);t(x,()=>Tt,(c,_)=>{_(c,{children:(w,m)=>{var P=sr(),R=f(P),N=f(R);Ve(N,{for:"driver-opts",children:(se,$e)=>{g();var ne=U("Driver Options");e(se,ne)},$$slots:{default:!0}});var I=r(N,2);Ye(I,{id:"driver-opts",placeholder:"key=value key2=value2",get disabled(){return Z()},get value(){return i.volumeOptText},set value(se){i.volumeOptText=se}}),g(2),p(R);var C=r(R,2),ae=f(C);Ve(ae,{for:"labels",children:(se,$e)=>{g();var ne=U("Labels");e(se,ne)},$$slots:{default:!0}});var Q=r(ae,2);Ye(Q,{id:"labels",placeholder:"com.example.description=Production data com.example.department=Finance",get disabled(){return Z()},get value(){return i.volumeLabels},set value(se){i.volumeLabels=se}}),g(2),p(C),p(P),e(w,P)},$$slots:{default:!0}})}),e(V,W)},$$slots:{default:!0}})}),e(y,d)},$$slots:{default:!0}})}),p(u);var H=r(u,2);t(H,()=>Nt,(s,h)=>{h(s,{children:(y,A)=>{var d=or(),n=o(d);ye(n,{action:"cancel",onClick:()=>l(!1),get disabled(){return Z()}});var k=r(n,2);const D=oe(()=>Z()||!i.volumeName.trim());ye(k,{action:"create",customLabel:"Create Volume",onClick:we,get loading(){return Z()},loadingLabel:"Creating...",get disabled(){return X(D)}}),e(y,d)},$$slots:{default:!0}})}),ft("submit",u,function(...s){var h;(h=X(F))==null||h.apply(this,s)}),e(a,O)},$$slots:{default:!0}})}),e(ee,te)},$$slots:{default:!0}})}),e(Le,Ce),it()}var ir=v("<!> <!> <!>",1),dr=v('<div><p class="text-sm font-medium text-muted-foreground">Total Volumes</p> <p class="text-2xl font-bold"> </p></div> <div class="bg-amber-500/10 p-2 rounded-full"><!></div>',1),ur=v('<div><p class="text-sm font-medium text-muted-foreground">Default Driver</p> <p class="text-2xl font-bold">local</p></div> <div class="bg-blue-500/10 p-2 rounded-full"><!></div>',1),cr=v("<!> Filter <!>",1),vr=v("<!> <!> <!>",1),mr=v("<!> <!>",1),fr=v('<div class="flex items-center justify-between"><div><!></div> <div class="flex items-center gap-2"><!> <!> <!></div></div>'),pr=v('<div class="flex items-center gap-2"><span class="truncate"><a class="font-medium hover:underline"> </a></span></div>'),_r=v('<span class="sr-only">Open menu</span> <!>',1),$r=v("<!> Inspect",1),gr=v("<!> Delete",1),hr=v("<!> <!> <!>",1),br=v("<!> <!>",1),xr=v("<!> <!> <!> <!> <!>",1),Pr=v('<div class="flex flex-col items-center justify-center py-12 px-6 text-center"><!> <p class="text-lg font-medium">No volumes found</p> <p class="text-sm text-muted-foreground mt-1 max-w-md">Create a new volume using the "Create Volume" button above or use the Docker CLI</p> <div class="flex gap-3 mt-4"><!></div></div>'),yr=v("<!> <!>",1),Dr=v('<div class="space-y-6"><div class="flex flex-col sm:flex-row justify-between sm:items-center gap-4"><div><h1 class="text-3xl font-bold tracking-tight">Volumes</h1> <p class="text-sm text-muted-foreground mt-1">Manage persistent data storage for containers</p></div> <div class="flex gap-2"></div></div> <!> <div class="grid grid-cols-1 sm:grid-cols-2 gap-4"><!> <!></div> <!> <!></div>');function ds(Le,Y){nt(Y,!0);let l=Ne({volumes:Y.data.volumes,selectedIds:[],error:Y.data.error,showUsed:!0,showUnused:!0});const Z=oe(()=>l.volumes.filter(a=>l.showUsed&&a.inUse||l.showUnused&&!a.inUse));let le=Ne({create:!1,remove:!1}),i=Ne({remove:!1,creating:!1});const De=oe(()=>l.volumes.length),ue=new Gt;async function we(a){st({title:"Delete Volume",message:`Are you sure you want to delete volume "${a}"? This action cannot be undone.`,confirm:{label:"Delete",destructive:!0,action:async()=>{je({result:await Ee(ue.remove(a)),message:`Failed to Remove Volume "${a}"`,setLoadingState:S=>i.remove=S,onSuccess:async()=>{ke.success(`Volume "${a}" Removed Successfully.`),await Fe()}})}}})}async function Ce(a){je({result:await Ee(ue.create(a)),message:`Failed to Create Volume "${a.Name}"`,setLoadingState:S=>i.creating=S,onSuccess:async()=>{ke.success(`Volume "${a.Name}" created successfully.`),await Fe(),le.create=!1}})}async function Ue(){st({title:"Delete Selected Volumes",message:`Are you sure you want to delete ${l.selectedIds.length} selected volume(s)? This action cannot be undone. Volumes currently used by containers will not be deleted.`,confirm:{label:"Delete",destructive:!0,action:async()=>{var O;i.remove=!0;let a=0,S=0;for(const re of l.selectedIds){const u=(O=l.volumes)==null?void 0:O.find(z=>z.Name===re);if(u!=null&&u.inUse){ke.error(`Volume "${u.Name}" is in use and cannot be deleted.`),S++;continue}if(!(u!=null&&u.Name))continue;const F=await Ee(ue.remove(u.Name));je({result:F,message:`Failed to delete volume "${u.Name}"`,setLoadingState:z=>i.remove=z,onSuccess:async()=>{ke.success(`Volume "${u.Name}" deleted successfully.`),a++}}),F.error&&S++}i.remove=!1,console.log(`Finished deleting. Success: ${a}, Failed: ${S}`),a>0&&setTimeout(async()=>{await Fe()},500),l.selectedIds=[]}}})}pt(()=>{l.volumes=Y.data.volumes});var B=Dr(),J=r(f(B),2);{var ee=a=>{var S=q(),O=o(S);t(O,()=>Pt,(re,u)=>{u(re,{variant:"destructive",children:(F,z)=>{var E=ir(),j=o(E);Zt(j,{class:"mr-2 size-4"});var K=r(j,2);t(K,()=>yt,($,L)=>{L($,{children:(G,H)=>{g();var s=U("Error Loading Volumes");e(G,s)},$$slots:{default:!0}})});var M=r(K,2);t(M,()=>Dt,($,L)=>{L($,{children:(G,H)=>{g();var s=U();de(()=>ie(s,l.error)),e(G,s)},$$slots:{default:!0}})}),e(F,E)},$$slots:{default:!0}})}),e(a,S)};xe(J,a=>{l.error&&a(ee)})}var ce=r(J,2),te=f(ce);t(te,()=>Re,(a,S)=>{S(a,{children:(O,re)=>{var u=q(),F=o(u);t(F,()=>Oe,(z,E)=>{E(z,{class:"p-4 flex items-center justify-between",children:(j,K)=>{var M=dr(),$=o(M),L=r(f($),2),G=f(L,!0);p(L),p($);var H=r($,2),s=f(H);ot(s,{class:"text-amber-500 size-5"}),p(H),de(()=>ie(G,X(De))),e(j,M)},$$slots:{default:!0}})}),e(O,u)},$$slots:{default:!0}})});var ve=r(te,2);t(ve,()=>Re,(a,S)=>{S(a,{children:(O,re)=>{var u=q(),F=o(u);t(F,()=>Oe,(z,E)=>{E(z,{class:"p-4 flex items-center justify-between",children:(j,K)=>{var M=ur(),$=r(o(M),2),L=f($);Wt(L,{class:"text-blue-500 size-5"}),p($),e(j,M)},$$slots:{default:!0}})}),e(O,u)},$$slots:{default:!0}})}),p(ce);var me=r(ce,2);t(me,()=>Re,(a,S)=>{S(a,{class:"border shadow-sm",children:(O,re)=>{var u=yr(),F=o(u);t(F,()=>gt,(E,j)=>{j(E,{class:"px-6",children:(K,M)=>{var $=fr(),L=f($),G=f(L);t(G,()=>ht,(d,n)=>{n(d,{children:(k,D)=>{g();var V=U("Volume List");e(k,V)},$$slots:{default:!0}})}),p(L);var H=r(L,2),s=f(H);t(s,()=>et,(d,n)=>{n(d,{children:(k,D)=>{var V=mr(),T=o(V);t(T,()=>tt,(b,x)=>{x(b,{child:(_,w)=>{Xe(_,Qe(()=>w==null?void 0:w().props,{variant:"outline",children:(P,R)=>{var N=cr(),I=o(N);Rt(I,{class:"size-4"});var C=r(I,2);Jt(C,{class:"size-4"}),e(P,N)},$$slots:{default:!0}}))},$$slots:{child:!0}})});var W=r(T,2);t(W,()=>rt,(b,x)=>{x(b,{children:(c,_)=>{var w=vr(),m=o(w);t(m,()=>qt,(N,I)=>{I(N,{children:(C,ae)=>{g();var Q=U("Volume Usage");e(C,Q)},$$slots:{default:!0}})});var P=r(m,2);t(P,()=>Ze,(N,I)=>{I(N,{get checked(){return l.showUsed},onCheckedChange:C=>{l.showUsed=!!C},children:(C,ae)=>{g();var Q=U("Show Used Volumes");e(C,Q)},$$slots:{default:!0}})});var R=r(P,2);t(R,()=>Ze,(N,I)=>{I(N,{get checked(){return l.showUnused},onCheckedChange:C=>{l.showUnused=!!C},children:(C,ae)=>{g();var Q=U("Show Unused Volumes");e(C,Q)},$$slots:{default:!0}})}),e(c,w)},$$slots:{default:!0}})}),e(k,V)},$$slots:{default:!0}})});var h=r(s,2);{var y=d=>{ye(d,{action:"remove",get customLabel(){return`Delete Selected (${l.selectedIds.length??""})`},onClick:Ue,get loading(){return i.remove},loadingLabel:"Processing...",get disabled(){return i.remove}})};xe(h,d=>{l.selectedIds.length>0&&d(y)})}var A=r(h,2);ye(A,{action:"create",customLabel:"Create Volume",onClick:()=>le.create=!0}),p(H),p($),e(K,$)},$$slots:{default:!0}})});var z=r(F,2);t(z,()=>Oe,(E,j)=>{j(E,{children:(K,M)=>{var $=q(),L=o($);{var G=s=>{const h=oe(()=>({pageSize:at.getPageSize("volumes")}));bt(s,{get data(){return X(Z)},idKey:"Name",columns:[{accessorKey:"Name",header:"Name"},{accessorKey:"inUse",header:" ",enableSorting:!1},{accessorKey:"Mountpoint",header:"Mountpoint"},{accessorKey:"Driver",header:"Driver"},{accessorKey:"actions",header:" ",enableSorting:!1}],get pagination(){return X(h)},onPageSizeChange:A=>{at.setPageSize("volumes",A)},sort:{defaultSort:{id:"Name",desc:!1}},display:{filterPlaceholder:"Search volumes...",noResultsMessage:"No volumes found matching your filters."},get selectedIds(){return l.selectedIds},set selectedIds(A){l.selectedIds=A},rows:(A,d)=>{let n=()=>d==null?void 0:d().item;var k=xr(),D=o(k);t(D,()=>Pe,(x,c)=>{c(x,{children:(_,w)=>{var m=pr(),P=f(m),R=f(P),N=f(R,!0);p(R),p(P),p(m),de(I=>{$t(R,"href",`/volumes/${I??""}/`),ie(N,n().Name)},[()=>encodeURIComponent(n().Name)]),e(_,m)},$$slots:{default:!0}})});var V=r(D,2);t(V,()=>Pe,(x,c)=>{c(x,{children:(_,w)=>{const m=oe(()=>n().inUse?"In Use":"Unused"),P=oe(()=>n().inUse?"green":"amber");Ht(_,{get text(){return X(m)},get variant(){return X(P)}})},$$slots:{default:!0}})});var T=r(V,2);t(T,()=>Pe,(x,c)=>{c(x,{children:(_,w)=>{g();var m=U();de(()=>ie(m,n().Mountpoint)),e(_,m)},$$slots:{default:!0}})});var W=r(T,2);t(W,()=>Pe,(x,c)=>{c(x,{children:(_,w)=>{g();var m=U();de(()=>ie(m,n().Driver)),e(_,m)},$$slots:{default:!0}})});var b=r(W,2);t(b,()=>Pe,(x,c)=>{c(x,{children:(_,w)=>{var m=q(),P=o(m);t(P,()=>et,(R,N)=>{N(R,{children:(I,C)=>{var ae=br(),Q=o(ae);t(Q,()=>tt,($e,ne)=>{ne($e,{child:(Me,fe)=>{Xe(Me,Qe(()=>fe==null?void 0:fe().props,{variant:"ghost",size:"icon",class:"relative size-8 p-0",children:(Ae,Ge)=>{var Se=_r(),He=r(o(Se),2);xt(He,{}),e(Ae,Se)},$$slots:{default:!0}}))},$$slots:{child:!0}})});var se=r(Q,2);t(se,()=>rt,($e,ne)=>{ne($e,{align:"end",children:(Ke,Me)=>{var fe=q(),Be=o(fe);t(Be,()=>Bt,(Ae,Ge)=>{Ge(Ae,{children:(Se,He)=>{var We=hr(),qe=o(We);t(qe,()=>lt,(ge,he)=>{he(ge,{onclick:()=>wt(`/volumes/${encodeURIComponent(n().Name)}`),get disabled(){return i.remove},children:(Ie,ct)=>{var be=$r(),ze=o(be);Kt(ze,{class:"size-4"}),g(),e(Ie,be)},$$slots:{default:!0}})});var Je=r(qe,2);t(Je,()=>Qt,(ge,he)=>{he(ge,{})});var dt=r(Je,2);const ut=oe(()=>i.remove||n().inUse);t(dt,()=>lt,(ge,he)=>{he(ge,{class:"text-red-500 focus:text-red-700!",onclick:()=>we(n().Name),get disabled(){return X(ut)},children:(Ie,ct)=>{var be=gr(),ze=o(be);{var vt=pe=>{Xt(pe,{class:"animate-spin size-4"})},mt=pe=>{Yt(pe,{class:"size-4"})};xe(ze,pe=>{i.remove&&l.selectedIds.includes(n().Name)?pe(vt):pe(mt,!1)})}g(),e(Ie,be)},$$slots:{default:!0}})}),e(Se,We)},$$slots:{default:!0}})}),e(Ke,fe)},$$slots:{default:!0}})}),e(I,ae)},$$slots:{default:!0}})}),e(_,m)},$$slots:{default:!0}})}),e(A,k)},$$slots:{rows:!0}})},H=(s,h)=>{{var y=A=>{var d=Pr(),n=f(d);ot(n,{class:"text-muted-foreground mb-4 opacity-40 size-12"});var k=r(n,6),D=f(k);ye(D,{action:"create",customLabel:"Create Volume",onClick:()=>le.create=!0,size:"sm"}),p(k),p(d),e(A,d)};xe(s,A=>{l.error||A(y)},h)}};xe(L,s=>{l.volumes&&l.volumes.length>0?s(G):s(H,!1)})}e(K,$)},$$slots:{default:!0}})}),e(O,u)},$$slots:{default:!0}})});var _e=r(me,2);nr(_e,{get isCreating(){return i.creating},onSubmit:a=>Ce(a),get open(){return le.create},set open(a){le.create=a}}),p(B),e(Le,B),it()}export{ds as component};
