import{c as oe,a as r,f as l,t as z,d as Er,s as w,h as jr}from"../chunks/zguDtZw-.js";import{o as Ir}from"../chunks/hybYrdok.js";import{p as Xt,f as d,n as Lr,a as er,c as s,h as u,s as t,e as g,b as q,g as e,r as a,u as Dt,t as ee,d as Kt,$ as Kr}from"../chunks/SIFgIYqZ.js";import{s as Or,r as Vr,i as Q}from"../chunks/D4OMRqmI.js";import{I as Fr,s as Ur,e as Tt,i as Et,k as Mr,a as Pr}from"../chunks/CCdH-GF7.js";import{c}from"../chunks/BmbK19Nn.js";import{g as wr,i as Br}from"../chunks/CGNubMbN.js";import{t as $}from"../chunks/BJCWvCOq.js";import"../chunks/CWlk9DSI.js";import{C as St}from"../chunks/BUTdIsFV.js";import{C as Ct,a as Sr,b as Cr}from"../chunks/B9HEA4Xl.js";import{B as Hr,a as Dr,b as Jr,c as Wr,d as Zr,e as qr}from"../chunks/DDBOCpJi.js";import{A as fr}from"../chunks/m9ItHG6J.js";import{A as gr,a as _r}from"../chunks/iMjrFJrG.js";import{D as ar,a as sr,b as or,c as Qr,R as nr}from"../chunks/UVnX9grY.js";import{R as Gr,S as Yr,a as Xr,b as ea}from"../chunks/C73rBIzk.js";import{T as ta,a as qt,b as Qt,R as ra}from"../chunks/CgyVJ7zG.js";import{D as aa}from"../chunks/CKC8MdI0.js";import{U as Gt}from"../chunks/D2ZQhq98.js";import{B as ye}from"../chunks/DsjzulNM.js";import{I as ot}from"../chunks/87Ty6o0e.js";import{L as je}from"../chunks/DUYgD2_s.js";import{S as sa}from"../chunks/mAxAJ61f.js";import{L as ur}from"../chunks/BjTWgG3-.js";import{T as zr}from"../chunks/B2pR1KHz.js";import{F as Ar}from"../chunks/CJVn1vXg.js";import{S as Nr}from"../chunks/bJ_I8NpF.js";import{P as $r}from"../chunks/DYFwiHrC.js";import{T as cr}from"../chunks/BhZTThSR.js";import{g as Ut,f as hr}from"../chunks/gYT1oUgQ.js";import{o as oa}from"../chunks/BUdkjQ9d.js";import{h as na,t as la}from"../chunks/CHemGuYG.js";import{A as ia}from"../chunks/-0Ble-HS.js";import{D as lr}from"../chunks/BNz4MoZq.js";import{R as xr}from"../chunks/B877H2_W.js";import{P as da,D as Rr}from"../chunks/CWU1czEL.js";import{C as yr}from"../chunks/CX4OS9M0.js";import{T as ca}from"../chunks/CWPqODAu.js";import{S as ua}from"../chunks/DEdMGNll.js";import{M as va}from"../chunks/Cm35N4Au.js";import{S as ma}from"../chunks/CHbZ4NRu.js";import{C as pa}from"../chunks/Tgwv_1ap.js";import{A as Tr}from"../chunks/66aVjmWj.js";import{C as Yt}from"../chunks/BfFJ5vja.js";import{H as br}from"../chunks/B3rBFWl_.js";import{N as kr}from"../chunks/DxrT6TVP.js";import{D as ir}from"../chunks/B5Po4twO.js";import{L as dr}from"../chunks/0Kkvs01K.js";function fa(_t,ue){Xt(ue,!0);let n=Vr(ue,["$$slots","$$events","$$legacy"]);const G=[["path",{d:"M12 3v12"}],["path",{d:"m17 8-5-5-5 5"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}]];Fr(_t,Or({name:"upload"},()=>n,{get iconNode(){return G},children:($e,I)=>{var me=oe(),be=d(me);Ur(be,()=>ue.children??Lr),r($e,me)},$$slots:{default:!0}})),er()}var ga=l("<!> Pull Image",1),_a=l(`<div class="space-y-4"><div class="space-y-2"><!> <!> <p class="text-xs text-muted-foreground">Enter the image name (e.g., nginx, redis, ubuntu)</p></div> <div class="space-y-2"><!> <!> <p class="text-xs text-muted-foreground">Specify a tag version (defaults to 'latest')</p></div> <div class="flex justify-end space-x-2"><!> <!></div></div>`);function $a(_t,ue){Xt(ue,!0);let n=q(!1),G=q(""),$e=q("latest");function I(Y,qe){const ge=Y.trim(),vt=qe.trim();return ge.includes(":")?ge:!vt||vt==="latest"?`${ge}:latest`:`${ge}:${vt}`}async function me(){if(!e(G).trim()){$.error("Please enter an image name");return}g(n,!0);try{const Y=I(e(G),e($e));await ue.onPull(Y),ue.onClose(),$.success(`Started pulling image: ${Y}`)}catch(Y){console.error("Pull error:",Y),$.error(Y instanceof Error?Y.message:"Failed to pull image")}finally{g(n,!1)}}function be(Y){Y.key==="Enter"&&!e(n)&&me()}var Ze=_a(),He=s(Ze),se=s(He);je(se,{for:"imageRef",children:(Y,qe)=>{u();var ge=z("Image Name");r(Y,ge)},$$slots:{default:!0}});var De=t(se,2);ot(De,{id:"imageRef",placeholder:"nginx, redis, ubuntu, etc.",get disabled(){return e(n)},onkeypress:be,get value(){return e(G)},set value(Y){g(G,Y,!0)}}),u(2),a(He);var Je=t(He,2),at=s(Je);je(at,{for:"tag",children:(Y,qe)=>{u();var ge=z("Tag (Optional)");r(Y,ge)},$$slots:{default:!0}});var nt=t(at,2);ot(nt,{id:"tag",placeholder:"latest",get disabled(){return e(n)},onkeypress:be,get value(){return e($e)},set value(Y){g($e,Y,!0)}}),u(2),a(Je);var Ie=t(Je,2),ct=s(Ie);ye(ct,{variant:"outline",get onclick(){return ue.onClose},get disabled(){return e(n)},children:(Y,qe)=>{u();var ge=z("Cancel");r(Y,ge)},$$slots:{default:!0}});var ut=t(ct,2);const lt=Dt(()=>e(n)||!e(G).trim());ye(ut,{onclick:me,get disabled(){return e(lt)},children:(Y,qe)=>{var ge=ga(),vt=d(ge);{var $t=mt=>{ur(mt,{class:"size-4 mr-2 animate-spin"})};Q(vt,mt=>{e(n)&&mt($t)})}u(),r(Y,ge)},$$slots:{default:!0}}),a(Ie),a(Ze),r(_t,Ze),er()}var ha=l('<!> <span class="text-xs">Write Compose</span>',1),xa=l('<!> <span class="text-xs">Use Template</span>',1),ya=l('<!> <span class="text-xs">Existing Stack</span>',1),ba=(_t,ue,n)=>ue(e(n)),ka=l('<button class="p-3 text-left border rounded-lg hover:border-primary/50 transition-colors"><div class="font-medium text-sm"> </div> <div class="text-xs text-muted-foreground"> </div></button>'),Pa=l('<div class="space-y-3"><!> <div class="grid gap-2"></div></div>'),wa=l('<div class="space-y-2"><!> <!></div> <div class="space-y-2"><!> <!></div>',1),Sa=l("<!> Deploy Stack",1),Ca=l('<div class="space-y-6"><div class="space-y-3"><!> <div class="grid grid-cols-3 gap-2"><!> <!> <!></div></div> <!> <div class="space-y-2"><!> <!></div> <!> <div class="flex justify-end space-x-2"><!> <!></div></div>');function Da(_t,ue){Xt(ue,!0);let n=q(!1),G=q("compose"),$e=q(""),I=q(""),me=q(""),be="";const Ze=[{id:"nginx",name:"Nginx Web Server",description:"Simple Nginx web server",compose:`version: '3.8'
services:
  nginx:
    image: nginx:alpine
    ports:
      - "80:80"
    volumes:
      - ./html:/usr/share/nginx/html:ro
    restart: unless-stopped`},{id:"redis",name:"Redis Cache",description:"Redis in-memory database",compose:`version: '3.8'
services:
  redis:
    image: redis:alpine
    ports:
      - "6379:6379"
    volumes:
      - redis_data:/data
    restart: unless-stopped
    command: redis-server --appendonly yes

volumes:
  redis_data:`},{id:"postgres",name:"PostgreSQL Database",description:"PostgreSQL database server",compose:`version: '3.8'
services:
  postgres:
    image: postgres:15-alpine
    environment:
      POSTGRES_DB: myapp
      POSTGRES_USER: admin
      POSTGRES_PASSWORD: changeme
    ports:
      - "5432:5432"
    volumes:
      - postgres_data:/var/lib/postgresql/data
    restart: unless-stopped

volumes:
  postgres_data:`}];function He(H){g($e,H.name.toLowerCase().replace(/\s+/g,"-"),!0),g(I,H.compose,!0),g(G,"compose")}async function se(){if(!e($e).trim()){$.error("Please enter a stack name");return}const H=/^[a-z][a-z0-9-]*[a-z0-9]$|^[a-z]$/,le=e($e).trim().toLowerCase();if(!H.test(le)){$.error("Stack name must start with a letter, contain only lowercase letters, numbers, and hyphens, and not end with a hyphen");return}if(le.length>63){$.error("Stack name must be 63 characters or less");return}if(["system","docker","default","admin","root","api"].includes(le)){$.error(`"${le}" is a reserved name. Please choose a different stack name`);return}if(e(G)==="compose"){if(!e(I).trim()){$.error("Please enter Docker Compose content");return}try{if(!e(I).trim().split(`
`)[0].trim().startsWith("version:")&&!e(I).includes("services:")){$.error("Compose content should include a version and services section");return}if(e(I).includes("	")){$.error("Compose content contains tabs. Please use spaces for indentation");return}if(!e(I).includes("services:")){$.error('Compose content must include a "services:" section');return}const ve=e(I).match(/services:\s*\n([\s\S]*?)(?=\n\w|\n$|$)/);if(ve&&ve[1].split(`
`).filter(Te=>Te.trim()&&!Te.startsWith(" ")).length===0){$.error("At least one service must be defined in the services section");return}}catch{$.error("Invalid Docker Compose format. Please check your YAML syntax");return}if(e(me).trim()){const re=e(me).trim().split(`
`);for(let b=0;b<re.length;b++){const ve=re[b].trim();if(!ve)continue;if(!ve.includes("=")){$.error(`Environment variable line ${b+1} must be in KEY=VALUE format`);return}const[ke,...pt]=ve.split("=");if(!ke.trim()){$.error(`Environment variable line ${b+1} is missing a key`);return}if(!/^[a-zA-Z_][a-zA-Z0-9_]*$/.test(ke.trim())){$.error(`Environment variable "${ke}" must start with letter or underscore and contain only letters, numbers, and underscores`);return}}}}else if(e(G)==="template"){if(!e(I).trim()){$.error("Please select a template first");return}}else if(e(G)==="existing"&&!be.trim()){$.error("Please select an existing stack");return}g(n,!0);try{const re={mode:e(G),stackName:le,composeContent:e(I).trim(),envContent:e(me).trim(),selectedStack:be.trim()||void 0};console.log(`ðŸš€ Deploying stack "${le}" with mode "${e(G)}"`),await ue.onDeploy(re),ue.onClose(),$.success(`Stack "${le}" deployed successfully`)}catch(re){if(console.error("Deploy error:",re),re instanceof Error){const b=re.message.toLowerCase();if(b.includes("network")||b.includes("connection")||b.includes("timeout")){$.error("Network error: Unable to connect to the deployment service. Please check your connection and try again.");return}if(b.includes("unauthorized")||b.includes("forbidden")||b.includes("permission")){$.error("Permission denied: You may not have sufficient permissions to deploy stacks.");return}if(b.includes("already exists")||b.includes("conflict")){$.error(`Stack "${le}" already exists. Please choose a different name or remove the existing stack first.`);return}if(b.includes("yaml")||b.includes("compose")||b.includes("invalid")){$.error("Invalid Docker Compose configuration. Please check your compose content and try again.");return}if(b.includes("memory")||b.includes("disk")||b.includes("resource")){$.error("Insufficient resources: The deployment requires more memory, disk space, or other resources than available.");return}if(b.includes("pull")||b.includes("image")||b.includes("registry")){$.error("Image error: Unable to pull required Docker images. Please check image names and registry availability.");return}if(b.includes("port")||b.includes("bind")||b.includes("address already in use")){$.error("Port conflict: One or more ports are already in use. Please check your port mappings.");return}if(b.includes("volume")||b.includes("mount")||b.includes("path")){$.error("Volume error: There was an issue with volume mounts or paths. Please check your volume configurations.");return}if(b.includes("agent")||b.includes("offline")){$.error("Agent error: The target agent is offline or unavailable. Please try again later.");return}$.error(`Deployment failed: ${re.message}`)}else console.error("Unknown error type:",re),$.error("An unexpected error occurred during deployment. Please try again.")}finally{g(n,!1)}}var De=Ca(),Je=s(De),at=s(Je);je(at,{children:(H,le)=>{u();var te=z("How would you like to deploy?");r(H,te)},$$slots:{default:!0}});var nt=t(at,2),Ie=s(nt);const ct=Dt(()=>e(G)==="compose"?"default":"outline");ye(Ie,{get variant(){return e(ct)},size:"sm",onclick:()=>g(G,"compose"),class:"flex flex-col h-auto p-3",children:(H,le)=>{var te=ha(),re=d(te);Ar(re,{class:"size-4 mb-1"}),u(2),r(H,te)},$$slots:{default:!0}});var ut=t(Ie,2);const lt=Dt(()=>e(G)==="template"?"default":"outline");ye(ut,{get variant(){return e(lt)},size:"sm",onclick:()=>g(G,"template"),class:"flex flex-col h-auto p-3",children:(H,le)=>{var te=xa(),re=d(te);fa(re,{class:"size-4 mb-1"}),u(2),r(H,te)},$$slots:{default:!0}});var Y=t(ut,2);const qe=Dt(()=>e(G)==="existing"?"default":"outline");ye(Y,{get variant(){return e(qe)},size:"sm",onclick:()=>g(G,"existing"),class:"flex flex-col h-auto p-3",disabled:!0,children:(H,le)=>{var te=ya(),re=d(te);Ar(re,{class:"size-4 mb-1"}),u(2),r(H,te)},$$slots:{default:!0}}),a(nt),a(Je);var ge=t(Je,2);{var vt=H=>{var le=Pa(),te=s(le);je(te,{children:(b,ve)=>{u();var ke=z("Choose a template");r(b,ke)},$$slots:{default:!0}});var re=t(te,2);Tt(re,21,()=>Ze,Et,(b,ve)=>{var ke=ka();ke.__click=[ba,He,ve];var pt=s(ke),Te=s(pt,!0);a(pt);var ht=t(pt,2),it=s(ht,!0);a(ht),a(ke),ee(()=>{w(Te,e(ve).name),w(it,e(ve).description)}),r(b,ke)}),a(re),a(le),r(H,le)};Q(ge,H=>{e(G)==="template"&&H(vt)})}var $t=t(ge,2),mt=s($t);je(mt,{for:"stackName",children:(H,le)=>{u();var te=z("Stack Name");r(H,te)},$$slots:{default:!0}});var Mt=t(mt,2);ot(Mt,{id:"stackName",placeholder:"my-awesome-app",get disabled(){return e(n)},get value(){return e($e)},set value(H){g($e,H,!0)}}),a($t);var zt=t($t,2);{var jt=H=>{var le=wa(),te=d(le),re=s(te);je(re,{for:"compose",children:(Te,ht)=>{u();var it=z("Docker Compose Content");r(Te,it)},$$slots:{default:!0}});var b=t(re,2);zr(b,{id:"compose",placeholder:"version: '3.8' services:   web:     image: nginx:alpine     ports:       - '80:80'",class:"font-mono text-sm min-h-[200px]",get disabled(){return e(n)},get value(){return e(I)},set value(Te){g(I,Te,!0)}}),a(te);var ve=t(te,2),ke=s(ve);je(ke,{for:"env",children:(Te,ht)=>{u();var it=z("Environment Variables (Optional)");r(Te,it)},$$slots:{default:!0}});var pt=t(ke,2);zr(pt,{id:"env",placeholder:"DATABASE_URL=postgres://user:pass@db:5432/myapp REDIS_URL=redis://redis:6379",class:"font-mono text-sm min-h-[80px]",get disabled(){return e(n)},get value(){return e(me)},set value(Te){g(me,Te,!0)}}),a(ve),r(H,le)};Q(zt,H=>{e(G)==="compose"&&H(jt)})}var It=t(zt,2),Ot=s(It);ye(Ot,{variant:"outline",get onclick(){return ue.onClose},get disabled(){return e(n)},children:(H,le)=>{u();var te=z("Cancel");r(H,te)},$$slots:{default:!0}});var Bt=t(Ot,2);const Lt=Dt(()=>e(n)||!e($e).trim());ye(Bt,{onclick:se,get disabled(){return e(Lt)},children:(H,le)=>{var te=Sa(),re=d(te);{var b=ve=>{ur(ve,{class:"size-4 mr-2 animate-spin"})};Q(re,ve=>{e(n)&&ve(b)})}u(),r(H,te)},$$slots:{default:!0}}),a(It),a(De),r(_t,De),er()}Er(["click"]);var za=l("<!> Add Port",1),Aa=l('<div class="flex items-center gap-2"><!> <span class="text-muted-foreground">:</span> <!> <!></div>'),Na=l("<!> Add Volume",1),Ra=l('<div class="flex items-center gap-2"><!> <span class="text-muted-foreground">:</span> <!> <!></div>'),Ta=l("<!> Add Variable",1),Ea=l('<div class="flex items-center gap-2"><!> <span class="text-muted-foreground">=</span> <!> <!></div>'),ja=l("<!> Run Container",1),Ia=l('<div class="space-y-6"><div class="space-y-4"><div class="space-y-2"><!> <!></div> <div class="space-y-2"><!> <!></div></div> <div class="space-y-3"><div class="flex items-center justify-between"><!> <!></div> <!></div> <div class="space-y-3"><div class="flex items-center justify-between"><!> <!></div> <!></div> <div class="space-y-3"><div class="flex items-center justify-between"><!> <!></div> <!></div> <div class="space-y-4"><div class="flex items-center justify-between"><div><!> <p class="text-sm text-muted-foreground">Run container in detached mode</p></div> <!></div> <div class="flex items-center justify-between"><div><!> <p class="text-sm text-muted-foreground">Remove container when it stops</p></div> <!></div> <div class="space-y-2"><!> <select id="restartPolicy" class="w-full px-3 py-2 border border-input bg-background rounded-md"><option>No</option><option>Always</option><option>Unless Stopped</option><option>On Failure</option></select></div></div> <div class="flex justify-end space-x-2"><!> <!></div></div>');function La(_t,ue){Xt(ue,!0);let n=q(!1),G=q(""),$e=q(""),I=q(Kt([])),me=q(Kt([])),be=q(Kt([])),Ze=q(!0),He=q(!1),se=q("no");function De(){g(I,[...e(I),{host:"",container:""}],!0)}function Je(i){g(I,e(I).filter((x,m)=>m!==i),!0)}function at(){g(me,[...e(me),{host:"",container:""}],!0)}function nt(i){g(me,e(me).filter((x,m)=>m!==i),!0)}function Ie(){g(be,[...e(be),{key:"",value:""}],!0)}function ct(i){g(be,e(be).filter((x,m)=>m!==i),!0)}async function ut(){if(!e($e).trim()){$.error("Please enter an image name");return}if(e(G).trim()&&!/^[a-zA-Z0-9][a-zA-Z0-9_.-]*$/.test(e(G).trim())){$.error("Container name must start with alphanumeric character and can only contain letters, numbers, underscores, periods, and hyphens");return}for(let p=0;p<e(I).length;p++){const v=e(I)[p];if(!v.host&&!v.container)continue;if(!v.host||!v.container){$.error(`Port mapping ${p+1}: Both host and container ports must be specified`);return}const Pe=parseInt(v.host);if(isNaN(Pe)||Pe<1||Pe>65535){$.error(`Port mapping ${p+1}: Host port must be a number between 1 and 65535`);return}const D=parseInt(v.container);if(isNaN(D)||D<1||D>65535){$.error(`Port mapping ${p+1}: Container port must be a number between 1 and 65535`);return}}const i=e(I).filter(p=>p.host&&p.container).map(p=>parseInt(p.host)),x=new Set(i);if(i.length!==x.size){$.error("Duplicate host ports are not allowed");return}for(let p=0;p<e(me).length;p++){const v=e(me)[p];if(!v.host&&!v.container)continue;if(!v.host||!v.container){$.error(`Volume mapping ${p+1}: Both host and container paths must be specified`);return}if(!v.host.trim()){$.error(`Volume mapping ${p+1}: Host path cannot be empty`);return}const Pe=v.host.trim();if(!Pe.startsWith("/")&&!Pe.match(/^[a-zA-Z]:/)){$.error(`Volume mapping ${p+1}: Host path should be an absolute path (e.g., /path/to/dir or C:/path/to/dir)`);return}const D=v.container.trim();if(!D.startsWith("/")){$.error(`Volume mapping ${p+1}: Container path must be an absolute path starting with /`);return}if(["/proc","/sys","/dev"].some(ie=>D.startsWith(ie))){$.error(`Volume mapping ${p+1}: Cannot mount to reserved system path ${D}`);return}}const m=e(me).filter(p=>p.host&&p.container).map(p=>p.container.trim()),k=new Set(m);if(m.length!==k.size){$.error("Duplicate container mount points are not allowed");return}for(let p=0;p<e(be).length;p++){const v=e(be)[p];if(!v.key&&!v.value)continue;if(!v.key||!v.value){$.error(`Environment variable ${p+1}: Both key and value must be specified`);return}if(!/^[a-zA-Z_][a-zA-Z0-9_]*$/.test(v.key.trim())){$.error(`Environment variable ${p+1}: Key must start with letter or underscore and contain only letters, numbers, and underscores`);return}if(["PATH","HOME","USER","SHELL"].includes(v.key.trim().toUpperCase())){$.error(`Environment variable ${p+1}: Cannot override reserved variable ${v.key}`);return}}const O=e(be).filter(p=>p.key&&p.value).map(p=>p.key.trim().toUpperCase()),F=new Set(O);if(O.length!==F.size){$.error("Duplicate environment variable keys are not allowed");return}g(n,!0);try{const p={imageName:e($e).trim(),containerName:e(G).trim()||void 0,ports:e(I).filter(v=>v.host&&v.container),volumes:e(me).filter(v=>v.host&&v.container),envVars:e(be).filter(v=>v.key&&v.value),detached:e(Ze),autoRemove:e(He),restartPolicy:e(se)};await ue.onRun(p),ue.onClose(),$.success(`Started container from ${e($e)}`)}catch(p){console.error("Run error:",p),$.error(p instanceof Error?p.message:"Failed to run container")}finally{g(n,!1)}}var lt=Ia(),Y=s(lt),qe=s(Y),ge=s(qe);je(ge,{for:"imageName",children:(i,x)=>{u();var m=z("Image Name *");r(i,m)},$$slots:{default:!0}});var vt=t(ge,2);ot(vt,{id:"imageName",placeholder:"nginx:alpine",get disabled(){return e(n)},get value(){return e($e)},set value(i){g($e,i,!0)}}),a(qe);var $t=t(qe,2),mt=s($t);je(mt,{for:"containerName",children:(i,x)=>{u();var m=z("Container Name (Optional)");r(i,m)},$$slots:{default:!0}});var Mt=t(mt,2);ot(Mt,{id:"containerName",placeholder:"my-container",get disabled(){return e(n)},get value(){return e(G)},set value(i){g(G,i,!0)}}),a($t),a(Y);var zt=t(Y,2),jt=s(zt),It=s(jt);je(It,{children:(i,x)=>{u();var m=z("Port Mappings");r(i,m)},$$slots:{default:!0}});var Ot=t(It,2);ye(Ot,{variant:"outline",size:"sm",onclick:De,get disabled(){return e(n)},children:(i,x)=>{var m=za(),k=d(m);$r(k,{class:"size-4 mr-1"}),u(),r(i,m)},$$slots:{default:!0}}),a(jt);var Bt=t(jt,2);Tt(Bt,17,()=>e(I),Et,(i,x,m)=>{var k=Aa(),O=s(k);ot(O,{placeholder:"8080",get disabled(){return e(n)},class:"flex-1",get value(){return e(x).host},set value(v){e(x).host=v}});var F=t(O,4);ot(F,{placeholder:"80",get disabled(){return e(n)},class:"flex-1",get value(){return e(x).container},set value(v){e(x).container=v}});var p=t(F,2);ye(p,{variant:"outline",size:"sm",onclick:()=>Je(m),get disabled(){return e(n)},children:(v,Pe)=>{cr(v,{class:"size-4"})},$$slots:{default:!0}}),a(k),r(i,k)}),a(zt);var Lt=t(zt,2),H=s(Lt),le=s(H);je(le,{children:(i,x)=>{u();var m=z("Volume Mounts");r(i,m)},$$slots:{default:!0}});var te=t(le,2);ye(te,{variant:"outline",size:"sm",onclick:at,get disabled(){return e(n)},children:(i,x)=>{var m=Na(),k=d(m);$r(k,{class:"size-4 mr-1"}),u(),r(i,m)},$$slots:{default:!0}}),a(H);var re=t(H,2);Tt(re,17,()=>e(me),Et,(i,x,m)=>{var k=Ra(),O=s(k);ot(O,{placeholder:"/host/path",get disabled(){return e(n)},class:"flex-1",get value(){return e(x).host},set value(v){e(x).host=v}});var F=t(O,4);ot(F,{placeholder:"/container/path",get disabled(){return e(n)},class:"flex-1",get value(){return e(x).container},set value(v){e(x).container=v}});var p=t(F,2);ye(p,{variant:"outline",size:"sm",onclick:()=>nt(m),get disabled(){return e(n)},children:(v,Pe)=>{cr(v,{class:"size-4"})},$$slots:{default:!0}}),a(k),r(i,k)}),a(Lt);var b=t(Lt,2),ve=s(b),ke=s(ve);je(ke,{children:(i,x)=>{u();var m=z("Environment Variables");r(i,m)},$$slots:{default:!0}});var pt=t(ke,2);ye(pt,{variant:"outline",size:"sm",onclick:Ie,get disabled(){return e(n)},children:(i,x)=>{var m=Ta(),k=d(m);$r(k,{class:"size-4 mr-1"}),u(),r(i,m)},$$slots:{default:!0}}),a(ve);var Te=t(ve,2);Tt(Te,17,()=>e(be),Et,(i,x,m)=>{var k=Ea(),O=s(k);ot(O,{placeholder:"VARIABLE_NAME",get disabled(){return e(n)},class:"flex-1",get value(){return e(x).key},set value(v){e(x).key=v}});var F=t(O,4);ot(F,{placeholder:"value",get disabled(){return e(n)},class:"flex-1",get value(){return e(x).value},set value(v){e(x).value=v}});var p=t(F,2);ye(p,{variant:"outline",size:"sm",onclick:()=>ct(m),get disabled(){return e(n)},children:(v,Pe)=>{cr(v,{class:"size-4"})},$$slots:{default:!0}}),a(k),r(i,k)}),a(b);var ht=t(b,2),it=s(ht),Vt=s(it),vr=s(Vt);je(vr,{children:(i,x)=>{u();var m=z("Run in Background");r(i,m)},$$slots:{default:!0}}),u(2),a(Vt);var mr=t(Vt,2);Nr(mr,{get disabled(){return e(n)},get checked(){return e(Ze)},set checked(i){g(Ze,i,!0)}}),a(it);var Ht=t(it,2),Jt=s(Ht),pr=s(Jt);je(pr,{children:(i,x)=>{u();var m=z("Auto Remove");r(i,m)},$$slots:{default:!0}}),u(2),a(Jt);var tr=t(Jt,2);Nr(tr,{get disabled(){return e(n)},get checked(){return e(He)},set checked(i){g(He,i,!0)}}),a(Ht);var Wt=t(Ht,2),Zt=s(Wt);je(Zt,{for:"restartPolicy",children:(i,x)=>{u();var m=z("Restart Policy");r(i,m)},$$slots:{default:!0}});var Ft=t(Zt,2),o=s(Ft);o.value=o.__value="no";var y=t(o);y.value=y.__value="always";var f=t(y);f.value=f.__value="unless-stopped";var S=t(f);S.value=S.__value="on-failure",a(Ft),a(Wt),a(ht);var C=t(ht,2),A=s(C);ye(A,{variant:"outline",get onclick(){return ue.onClose},get disabled(){return e(n)},children:(i,x)=>{u();var m=z("Cancel");r(i,m)},$$slots:{default:!0}});var pe=t(A,2);const N=Dt(()=>e(n)||!e($e).trim());ye(pe,{onclick:ut,get disabled(){return e(N)},children:(i,x)=>{var m=ja(),k=d(m);{var O=F=>{ur(F,{class:"size-4 mr-2 animate-spin"})};Q(k,F=>{e(n)&&F(O)})}u(),r(i,m)},$$slots:{default:!0}}),a(C),a(lt),ee(()=>Ft.disabled=e(n)),Mr(Ft,()=>e(se),i=>g(se,i)),r(_t,lt),er()}var Ka=l("<!> <!> <!>",1),Oa=l("<!> Back to Agents",1),Va=l("<!> Delete Agent",1),Fa=l("<!> Send Command",1),Ua=l("<!> <!>",1),Ma=l("<!> <!> <!>",1),Ba=l('<div class="bg-blue-500/10 p-2 rounded-full"><!></div> <div><p class="text-sm font-medium text-muted-foreground">Status</p> <span> </span></div>',1),Ha=l('<div class="bg-green-500/10 p-2 rounded-full"><!></div> <div><p class="text-sm font-medium text-muted-foreground">Platform</p> <p class="font-semibold capitalize"> </p></div>',1),Ja=l('<div class="bg-purple-500/10 p-2 rounded-full"><!></div> <div><p class="text-sm font-medium text-muted-foreground">Version</p> <p class="font-semibold"> </p></div>',1),Wa=l('<div class="bg-amber-500/10 p-2 rounded-full"><!></div> <div><p class="text-sm font-medium text-muted-foreground">Last Seen</p> <p class="font-semibold text-sm"> </p></div>',1),Za=l("<!> Loading...",1),qa=l("<!> Load Resources",1),Qa=l("<!> <!> <!>",1),Ga=l("<!> ",1),Ya=l("<!> ",1),Xa=l("<!> ",1),es=l("<!> ",1),ts=l("<!> ",1),rs=l("<!> <!> <!> <!> <!>",1),as=l('<div class="text-center py-8 text-muted-foreground"><!> <p>No containers found</p></div>'),ss=l('<div class="text-center py-8 text-muted-foreground"><!> <p>No images found</p></div>'),os=l('<div class="text-center py-8 text-muted-foreground"><!> <p>No networks found</p></div>'),ns=l('<div class="text-center py-8 text-muted-foreground"><!> <p>No volumes found</p></div>'),ls=l('<div class="text-center py-8 text-muted-foreground"><!> <p>No compose projects found</p></div>'),is=l("<!> <!> <!> <!> <!> <!>",1),ds=l('<div class="text-center py-8 text-muted-foreground"><!> <p class="font-medium">No Resource Data Loaded</p> <p class="text-sm">Click "Load Resources" to fetch Docker resource information</p></div>'),cs=l('<div class="space-y-4 pt-4 border-t border-border"><div class="flex items-center justify-between"><div><h4 class="font-medium mb-1">Resource Details</h4> <p class="text-sm text-muted-foreground">View detailed information about Docker resources</p></div> <!></div> <!>  <!></div>'),us=l('<div class="flex items-center space-x-3"><div class="bg-blue-500/10 p-2 rounded-lg"><!></div> <div><h5 class="font-medium">Deploy Stack</h5> <p class="text-sm text-muted-foreground">Deploy a complete application stack</p></div></div>'),vs=l('<div class="flex items-center space-x-3"><div class="bg-green-500/10 p-2 rounded-lg"><!></div> <div><h5 class="font-medium">Pull Image</h5> <p class="text-sm text-muted-foreground">Download a Docker image</p></div></div>'),ms=l('<div class="flex items-center space-x-3"><div class="bg-purple-500/10 p-2 rounded-lg"><!></div> <div><h5 class="font-medium">Run Container</h5> <p class="text-sm text-muted-foreground">Start a single container</p></div></div>'),ps=l('<div class="flex items-center justify-between p-3 bg-muted/30 rounded-lg"><div class="flex items-center space-x-3"><div class="bg-blue-500/10 p-1.5 rounded"><!></div> <div><p class="font-medium text-sm"> </p> <p class="text-xs text-muted-foreground"> </p></div></div> <!></div>'),fs=l('<div class="space-y-2"><h5 class="font-medium">Recent Deployments</h5> <div class="space-y-2"></div></div>'),gs=l('<div class="space-y-4 pt-4 border-t border-border"><div class="flex items-center justify-between"><div><h4 class="font-medium mb-1">Deploy Resources</h4> <p class="text-sm text-muted-foreground">Deploy stacks, containers, or images to this agent</p></div></div> <div class="grid grid-cols-1 md:grid-cols-3 gap-4"><!> <!> <!></div> <!></div>'),_s=l('<div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6"><div class="text-center p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg"><!> <p class="text-2xl font-bold text-blue-600 dark:text-blue-400"> </p> <p class="text-sm text-blue-600/80 dark:text-blue-400/80">Containers</p></div> <div class="text-center p-3 bg-green-50 dark:bg-green-900/20 rounded-lg"><!> <p class="text-2xl font-bold text-green-600 dark:text-green-400"> </p> <p class="text-sm text-green-600/80 dark:text-green-400/80">Images</p></div> <div class="text-center p-3 bg-orange-50 dark:bg-orange-900/20 rounded-lg"><!> <p class="text-2xl font-bold text-orange-600 dark:text-orange-400"> </p> <p class="text-sm text-orange-600/80 dark:text-orange-400/80">Networks</p></div> <div class="text-center p-3 bg-cyan-50 dark:bg-cyan-900/20 rounded-lg"><!> <p class="text-2xl font-bold text-cyan-600 dark:text-cyan-400"> </p> <p class="text-sm text-cyan-600/80 dark:text-cyan-400/80">Volumes</p></div></div> <!> <!>',1),$s=l('<span class="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400"> </span>'),hs=l('<span class="text-muted-foreground text-sm">None</span>'),xs=l('<div class="pt-4 border-t"><h4 class="font-medium mb-3">Docker Information</h4> <div class="grid grid-cols-2 gap-4 text-sm"><div><span class="text-muted-foreground">Docker Version</span> <p class="font-medium"> </p></div> <div><span class="text-muted-foreground">Containers</span> <p class="font-medium"> </p></div> <div><span class="text-muted-foreground">Images</span> <p class="font-medium"> </p></div></div></div>'),ys=l('<div class="grid grid-cols-2 gap-4 text-sm"><div><span class="text-muted-foreground">Hostname</span> <p class="font-medium"> </p></div> <div><span class="text-muted-foreground">Agent ID</span> <p class="font-mono text-xs"> </p></div> <div><span class="text-muted-foreground">Created</span> <p class="font-medium"> </p></div> <div><span class="text-muted-foreground">Updated</span> <p class="font-medium"> </p></div></div> <div><span class="text-muted-foreground text-sm">Capabilities</span> <div class="flex flex-wrap gap-1 mt-1"></div></div> <!>',1),bs=l("<!> <!>",1),ks=l('<div class="flex items-center justify-between"><!> <!></div>'),Ps=l('<div class="text-xs text-muted-foreground mb-2"><code class="bg-muted px-1 rounded"> <!></code></div>'),ws=l('<details class="mt-2"><summary class="cursor-pointer text-xs text-green-600 hover:text-green-500">View Output</summary> <div class="mt-2 p-2 bg-muted rounded text-xs font-mono whitespace-pre-wrap max-h-32 overflow-y-auto"> </div></details>'),Ss=l('<details class="mt-2"><summary class="cursor-pointer text-xs text-red-600 hover:text-red-500">View Error</summary> <div class="mt-2 p-2 bg-red-50 dark:bg-red-900/20 rounded text-xs text-red-600 dark:text-red-400 max-h-32 overflow-y-auto"> </div></details>'),Cs=l('<div class="border rounded-lg p-3"><div class="flex items-center justify-between mb-2"><div class="flex items-center gap-2"><p class="font-medium text-sm"> </p> <span> </span></div> <p class="text-xs text-muted-foreground"> </p></div> <!> <!> <!></div>'),Ds=l('<div class="space-y-3 max-h-96 overflow-y-auto"></div>'),zs=l('<div class="text-center py-8 text-muted-foreground"><!> <p>No tasks executed yet</p></div>'),As=l("<!> <!>",1),Ns=l("<!> <!> <!>",1),Rs=l('<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"><!> <!> <!> <!></div> <!> <div class="grid grid-cols-1 lg:grid-cols-2 gap-6"><!> <!></div> <!>',1),Ts=l("<!> <!>",1),Es=l("<span> </span>"),js=l("<!> <!>",1),Is=l("<div><!> <!></div>"),Ls=l("<div><!> <!></div>"),Ks=l("<!> Sending...",1),Os=l("<!> Send Command",1),Vs=l("<!> <!>",1),Fs=l('<!> <div class="space-y-4"><div><!> <!></div> <!> <!></div> <!>',1),Us=l("<!> <!>",1),Ms=l("<!> <!>",1),Bs=l("<!> <!>",1),Hs=l("<!> <!>",1),Js=l("<!> <!>",1),Ws=l("<!> <!>",1),Zs=l('<div class="space-y-6"><!> <div class="flex flex-col sm:flex-row justify-between sm:items-center gap-4"><div><h1 class="text-3xl font-bold tracking-tight"> </h1> <p class="text-sm text-muted-foreground mt-1"> </p></div> <div class="flex items-center gap-2"><!> <!></div></div> <!></div> <!> <!> <!> <!>',1);function Bo(_t,ue){Xt(ue,!0);let n=q(Kt(ue.data.agent)),G=q(Kt(ue.data.tasks)),$e=q(Kt(ue.data.deployments)),I=ue.data.agentId,me=q(!1),be=q(""),Ze=q(!1),He=q(""),se=q(Kt({containers:[],images:[],networks:[],volumes:[],stacks:[]})),De=q(void 0),Je=q(""),at=q(""),nt=q(!1),Ie=q(!1),ct=q(!1),ut=q(!1),lt=q(!1),Y=q(!1);const qe=[{value:"docker_version",label:"Docker Version"},{value:"docker_info",label:"Docker System Info"},{value:"docker_ps",label:"List Containers"},{value:"docker_images",label:"List Images"},{value:"system_info",label:"System Information"},{value:"agent_upgrade",label:"Upgrade Agent"},{value:"docker_prune",label:"Docker Cleanup"},{value:"custom",label:"Custom Command"}];Ir(()=>{const o=setInterval(()=>{ge()},1e4);return()=>clearInterval(o)});async function ge(){if(!e(me))try{g(me,!0);const[o,y,f]=await Promise.allSettled([fetch(`/api/agents/${I}`),fetch(`/api/agents/${I}/tasks?admin=true`),fetch(`/api/agents/${I}/deployments`)]);if(o.status==="fulfilled"&&o.value.ok){const S=await o.value.json();g(n,S.agent,!0)}if(y.status==="fulfilled"&&y.value.ok){const S=await y.value.json();g(G,S.tasks||[],!0)}if(f.status==="fulfilled"&&f.value.ok){const S=await f.value.json();g($e,S.deployments||[],!0)}g(be,"")}catch(o){console.error("Failed to refresh agent data:",o)}finally{g(me,!1)}}async function vt(){if(!e(n)||Ut(e(n))!=="online"){g(He,"Agent must be online to load resource data");return}g(Ze,!0),g(He,"");try{const o=[{type:"docker_command",payload:{command:"ps",args:["-a","--format","json"]}},{type:"docker_command",payload:{command:"images",args:["--format","json"]}},{type:"docker_command",payload:{command:"network",args:["ls","--format","json"]}},{type:"docker_command",payload:{command:"volume",args:["ls","--format","json"]}},{type:"docker_command",payload:{command:"compose",args:["ls","--format","json"]}}],y=await Promise.allSettled(o.map(async(S,C)=>{var i;const A=await fetch(`/api/agents/${I}/tasks`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(S)});if(!A.ok)throw new Error(`Failed to execute ${S.payload.command}`);const pe=await A.json();if(console.log("Task creation response:",pe),!((i=pe.task)!=null&&i.id))throw new Error(`No task ID returned for ${S.payload.command}`);const N=pe.task.id;return $t(N,["containers","images","networks","volumes","stacks"][C])})),f={containers:[],images:[],networks:[],volumes:[],stacks:[]};y.forEach((S,C)=>{if(S.status==="fulfilled"&&S.value){const A=["containers","images","networks","volumes","stacks"][C];console.log(`Assigning ${S.value.length} items to ${A}:`,S.value),f[A]=S.value}else console.log(`Result ${C} failed:`,S)}),g(se,f,!0)}catch(o){console.error("Failed to load resources data:",o),g(He,o instanceof Error?o.message:"Failed to load resource data",!0),$.error("Failed to load resource data")}finally{g(Ze,!1)}}async function $t(o,y){console.log(`Polling task ${o} for ${y}`);for(let C=0;C<30;C++){await new Promise(A=>setTimeout(A,1e3));try{const A=await fetch(`/api/agents/${I}/tasks/${o}`,{credentials:"include"});if(console.log(`Task ${o} polling attempt ${C+1}: ${A.status}`),!A.ok){A.status===403&&console.error(`Authentication failed for task ${o}`),console.error(`Failed to fetch task ${o}: ${A.status} ${A.statusText}`);continue}const pe=await A.json();console.log(`Task ${o} response:`,pe);const N=pe.task;if(!N){console.error(`No task data in response for ${o}`);continue}if(console.log(`Task ${o} status: ${N.status}`),N.status==="completed"){if(console.log(`Task ${o} completed with result:`,N.result),!N.result)return console.warn(`Task ${o} completed but has no result`),[];let i=[],x="";if(N.result&&typeof N.result=="object"&&N.result.output)x=N.result.output;else if(typeof N.result=="string")x=N.result;else return console.warn(`Unexpected result format for task ${o}:`,N.result),[];if(console.log(`Raw output for ${y}:`,x),x)try{const m=JSON.parse(x);Array.isArray(m)?(i=m,console.log(`Parsed entire output as JSON array for ${y}:`,i)):i.push(m)}catch{const k=x.split(`
`).filter(O=>O.trim());console.log(`Task ${o} has ${k.length} lines to parse`);for(const O of k)try{const F=JSON.parse(O.trim());i.push(F)}catch(F){console.warn("Failed to parse line as JSON:",O,F)}}return console.log(`Parsed data for ${y}:`,i),i}else{if(N.status==="failed")throw console.error(`Task ${o} failed:`,N.error),new Error(N.error||"Task failed");N.status==="running"?console.log(`Task ${o} is still running...`):console.log(`Task ${o} is ${N.status}, continuing to poll...`)}}catch(A){console.error(`Error polling task ${o}:`,A)}}throw console.error(`Task ${o} timed out after 30 seconds`),new Error(`Task ${o} timed out after 30 seconds`)}async function mt(){if(!(!e(De)||e(Ie))){g(Ie,!0);try{let o={};switch(e(De).value){case"docker_version":o={command:"version"};break;case"docker_info":o={command:"info"};break;case"docker_ps":o={command:"ps",args:["-a"]};break;case"docker_images":o={command:"images"};break;case"system_info":o={command:"system",args:["info"]};break;case"agent_upgrade":o={action:"upgrade"};break;case"docker_prune":o={command:"system",args:["prune","-f"]};break;case"custom":if(!e(at).trim()){$.error("Please enter a custom command");return}const C=e(at).trim().split(" ");o={command:C[0],args:C.slice(1).concat(e(Je)?e(Je).split(" "):[])};break}const y=e(De).value==="agent_upgrade"?"agent_upgrade":"docker_command",f=await fetch(`/api/agents/${I}/tasks`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:y,payload:o})});if(!f.ok)throw new Error(`Failed to send command: ${f.statusText}`);const S=await f.json();$.success("Command sent successfully"),g(nt,!1),g(De,void 0),g(Je,""),g(at,""),setTimeout(ge,1e3)}catch(o){console.error("Failed to send command:",o),$.error(o instanceof Error?o.message:"Failed to send command")}finally{g(Ie,!1)}}}async function Mt(){!e(n)||e(Y)||oa({title:"Confirm Removal",message:"Are you sure you want to remove this Agent? This action cannot be undone.",confirm:{label:"Remove",destructive:!0,action:async()=>{na({result:await la(fetch(`/api/agents/${I}`,{method:"DELETE",credentials:"include"})),setLoadingState:o=>g(Y,o,!0),message:"Failed to Remove Agent",onSuccess:async()=>{$.success("Agent Removed Successfully"),await Br(),wr("/agents")}})}}})}function zt(o){return Ut(o)==="online"?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400"}function jt(o){return Ut(o)==="online"?"Online":"Offline"}function It(o){return Ut(o)==="online"}function Ot(o){switch(o){case"completed":return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400";case"failed":return"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400";case"running":return"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400";case"pending":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400"}}async function Bt(o){var y;try{const f=await fetch(`/api/agents/${I}/deploy/stack`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o),credentials:"include"});if(!f.ok){const C=await f.json().catch(()=>({}));throw new Error(C.error||`Failed to deploy stack: ${f.statusText}`)}const S=await f.json();$.success(`Stack deployment started: ${((y=S.task)==null?void 0:y.id)||"Unknown task"}`),setTimeout(()=>ge(),1e3)}catch(f){throw console.error("Stack deploy error:",f),f}}async function Lt(o){var y;try{const f=await fetch(`/api/agents/${I}/deploy/image`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({imageName:o}),credentials:"include"});if(!f.ok){const C=await f.json().catch(()=>({}));throw new Error(C.error||`Failed to pull image: ${f.statusText}`)}const S=await f.json();$.success(`Image pull started: ${((y=S.task)==null?void 0:y.id)||"Unknown task"}`)}catch(f){throw console.error("Image pull error:",f),f}}async function H(o){var y;try{const f=await fetch(`/api/agents/${I}/deploy/container`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o),credentials:"include"});if(!f.ok){const C=await f.json().catch(()=>({}));throw new Error(C.error||`Failed to run container: ${f.statusText}`)}const S=await f.json();$.success(`Container started: ${((y=S.task)==null?void 0:y.id)||"Unknown task"}`)}catch(f){throw console.error("Container run error:",f),f}}var le=Zs();jr(o=>{ee(()=>{var y;return Kr.title=`Agent ${(((y=e(n))==null?void 0:y.hostname)||I)??""} - Arcane`})});var te=d(le),re=s(te);c(re,()=>qr,(o,y)=>{y(o,{children:(f,S)=>{var C=oe(),A=d(C);c(A,()=>Hr,(pe,N)=>{N(pe,{children:(i,x)=>{var m=Ka(),k=d(m);c(k,()=>Dr,(p,v)=>{v(p,{children:(Pe,D)=>{var J=oe(),ie=d(J);c(ie,()=>Jr,(de,R)=>{R(de,{href:"/agents",children:(h,T)=>{u();var _=z("Agents");r(h,_)},$$slots:{default:!0}})}),r(Pe,J)},$$slots:{default:!0}})});var O=t(k,2);c(O,()=>Wr,(p,v)=>{v(p,{})});var F=t(O,2);c(F,()=>Dr,(p,v)=>{v(p,{children:(Pe,D)=>{var J=oe(),ie=d(J);c(ie,()=>Zr,(de,R)=>{R(de,{children:(h,T)=>{u();var _=z();ee(()=>{var E;return w(_,((E=e(n))==null?void 0:E.hostname)||I)}),r(h,_)},$$slots:{default:!0}})}),r(Pe,J)},$$slots:{default:!0}})}),r(i,m)},$$slots:{default:!0}})}),r(f,C)},$$slots:{default:!0}})});var b=t(re,2),ve=s(b),ke=s(ve),pt=s(ke,!0);a(ke);var Te=t(ke,2),ht=s(Te,!0);a(Te),a(ve);var it=t(ve,2),Vt=s(it);ye(Vt,{variant:"outline",onclick:()=>wr("/agents"),children:(o,y)=>{var f=Oa(),S=d(f);ia(S,{class:"size-4 mr-2"}),u(),r(o,f)},$$slots:{default:!0}});var vr=t(Vt,2);{var mr=o=>{var y=Ua(),f=d(y);ye(f,{variant:"destructive",onclick:Mt,get disabled(){return e(Y)},children:(A,pe)=>{var N=Va(),i=d(N);cr(i,{class:"size-4 mr-2"}),u(),r(A,N)},$$slots:{default:!0}});var S=t(f,2);{var C=A=>{ye(A,{onclick:()=>g(nt,!0),get disabled(){return e(Ie)},children:(pe,N)=>{var i=Fa(),x=d(i);ca(x,{class:"size-4 mr-2"}),u(),r(pe,i)},$$slots:{default:!0}})};Q(S,A=>{Ut(e(n))==="online"&&A(C)})}r(o,y)};Q(vr,o=>{e(n)&&o(mr)})}a(it),a(b);var Ht=t(b,2);{var Jt=o=>{var y=oe(),f=d(y);c(f,()=>fr,(S,C)=>{C(S,{variant:"destructive",children:(A,pe)=>{var N=Ma(),i=d(N);yr(i,{class:"size-4"});var x=t(i,2);c(x,()=>gr,(k,O)=>{O(k,{children:(F,p)=>{u();var v=z("Error");r(F,v)},$$slots:{default:!0}})});var m=t(x,2);c(m,()=>_r,(k,O)=>{O(k,{children:(F,p)=>{u();var v=z();ee(()=>w(v,e(be))),r(F,v)},$$slots:{default:!0}})}),r(A,N)},$$slots:{default:!0}})}),r(o,y)},pr=(o,y)=>{{var f=S=>{var C=Rs(),A=d(C),pe=s(A);c(pe,()=>St,(D,J)=>{J(D,{children:(ie,de)=>{var R=oe(),h=d(R);c(h,()=>Ct,(T,_)=>{_(T,{class:"p-4 flex items-center space-x-3",children:(E,B)=>{var ae=Ba(),P=d(ae),W=s(P);ua(W,{class:"size-5 text-blue-500"}),a(P);var j=t(P,2),V=t(s(j),2),U=s(V,!0);a(V),a(j),ee((Z,he)=>{Pr(V,1,`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${Z??""}`),w(U,he)},[()=>zt(e(n)),()=>jt(e(n))]),r(E,ae)},$$slots:{default:!0}})}),r(ie,R)},$$slots:{default:!0}})});var N=t(pe,2);c(N,()=>St,(D,J)=>{J(D,{children:(ie,de)=>{var R=oe(),h=d(R);c(h,()=>Ct,(T,_)=>{_(T,{class:"p-4 flex items-center space-x-3",children:(E,B)=>{var ae=Ha(),P=d(ae),W=s(P);va(W,{class:"size-5 text-green-500"}),a(P);var j=t(P,2),V=t(s(j),2),U=s(V,!0);a(V),a(j),ee(()=>w(U,e(n).platform)),r(E,ae)},$$slots:{default:!0}})}),r(ie,R)},$$slots:{default:!0}})});var i=t(N,2);c(i,()=>St,(D,J)=>{J(D,{children:(ie,de)=>{var R=oe(),h=d(R);c(h,()=>Ct,(T,_)=>{_(T,{class:"p-4 flex items-center space-x-3",children:(E,B)=>{var ae=Ja(),P=d(ae),W=s(P);ma(W,{class:"size-5 text-purple-500"}),a(P);var j=t(P,2),V=t(s(j),2),U=s(V,!0);a(V),a(j),ee(()=>w(U,e(n).version)),r(E,ae)},$$slots:{default:!0}})}),r(ie,R)},$$slots:{default:!0}})});var x=t(i,2);c(x,()=>St,(D,J)=>{J(D,{children:(ie,de)=>{var R=oe(),h=d(R);c(h,()=>Ct,(T,_)=>{_(T,{class:"p-4 flex items-center space-x-3",children:(E,B)=>{var ae=Wa(),P=d(ae),W=s(P);pa(W,{class:"size-5 text-amber-500"}),a(P);var j=t(P,2),V=t(s(j),2),U=s(V);a(V),a(j),ee(Z=>w(U,`${Z??""} ago`),[()=>hr(new Date(e(n).lastSeen))]),r(E,ae)},$$slots:{default:!0}})}),r(ie,R)},$$slots:{default:!0}})}),a(A);var m=t(A,2);{var k=D=>{aa(D,{id:"agent-metrics",title:"Resource Metrics",description:"View detailed Docker resource information",defaultExpanded:!1,get icon(){return Tr},children:(J,ie)=>{var de=_s(),R=d(de),h=s(R),T=s(h);Yt(T,{class:"size-6 text-blue-600 dark:text-blue-400 mx-auto mb-1"});var _=t(T,2),E=s(_,!0);a(_),u(2),a(h);var B=t(h,2),ae=s(B);br(ae,{class:"size-6 text-green-600 dark:text-green-400 mx-auto mb-1"});var P=t(ae,2),W=s(P,!0);a(P),u(2),a(B);var j=t(B,2),V=s(j);kr(V,{class:"size-6 text-orange-600 dark:text-orange-400 mx-auto mb-1"});var U=t(V,2),Z=s(U,!0);a(U),u(2),a(j);var he=t(j,2),ne=s(he);ir(ne,{class:"size-6 text-cyan-600 dark:text-cyan-400 mx-auto mb-1"});var Se=t(ne,2),Le=s(Se,!0);a(Se),u(2),a(he),a(R);var Qe=t(R,2);{var xt=Ge=>{var Oe=cs(),ft=s(Oe),bt=t(s(ft),2);ye(bt,{variant:"outline",size:"sm",onclick:vt,get disabled(){return e(Ze)},children:(L,K)=>{var ce=oe(),X=d(ce);{var xe=_e=>{var fe=Za(),Ue=d(fe);ur(Ue,{class:"size-4 mr-2 animate-spin"}),u(),r(_e,fe)},Ce=_e=>{var fe=qa(),Ue=d(fe);xr(Ue,{class:"size-4 mr-2"}),u(),r(_e,fe)};Q(X,_e=>{e(Ze)?_e(xe):_e(Ce,!1)})}r(L,ce)},$$slots:{default:!0}}),a(ft);var Ke=t(ft,2);{var Ve=L=>{var K=oe(),ce=d(K);c(ce,()=>fr,(X,xe)=>{xe(X,{variant:"destructive",children:(Ce,_e)=>{var fe=Qa(),Ue=d(fe);yr(Ue,{class:"size-4"});var ze=t(Ue,2);c(ze,()=>gr,(Be,Nt)=>{Nt(Be,{children:(Rt,We)=>{u();var Ee=z("Error Loading Resources");r(Rt,Ee)},$$slots:{default:!0}})});var Me=t(ze,2);c(Me,()=>_r,(Be,Nt)=>{Nt(Be,{children:(Rt,We)=>{u();var Ee=z();ee(()=>w(Ee,e(He))),r(Rt,Ee)},$$slots:{default:!0}})}),r(Ce,fe)},$$slots:{default:!0}})}),r(L,K)};Q(Ke,L=>{e(He)&&L(Ve)})}var dt=t(Ke,2);{var gt=L=>{var K=oe(),ce=d(K);c(ce,()=>ra,(X,xe)=>{xe(X,{value:"containers",class:"w-full",children:(Ce,_e)=>{var fe=is(),Ue=d(fe);c(Ue,()=>ta,(We,Ee)=>{Ee(We,{class:"grid w-full grid-cols-5",children:(st,Ye)=>{var Ae=rs(),Xe=d(Ae);c(Xe,()=>qt,(Re,kt)=>{kt(Re,{value:"containers",class:"flex items-center gap-2",children:(Pt,rr)=>{var tt=Ga(),rt=d(tt);Yt(rt,{class:"size-4"});var wt=t(rt);ee(()=>w(wt,` Containers (${e(se).containers.length??""})`)),r(Pt,tt)},$$slots:{default:!0}})});var et=t(Xe,2);c(et,()=>qt,(Re,kt)=>{kt(Re,{value:"images",class:"flex items-center gap-2",children:(Pt,rr)=>{var tt=Ya(),rt=d(tt);br(rt,{class:"size-4"});var wt=t(rt);ee(()=>w(wt,` Images (${e(se).images.length??""})`)),r(Pt,tt)},$$slots:{default:!0}})});var Ne=t(et,2);c(Ne,()=>qt,(Re,kt)=>{kt(Re,{value:"networks",class:"flex items-center gap-2",children:(Pt,rr)=>{var tt=Xa(),rt=d(tt);kr(rt,{class:"size-4"});var wt=t(rt);ee(()=>w(wt,` Networks (${e(se).networks.length??""})`)),r(Pt,tt)},$$slots:{default:!0}})});var M=t(Ne,2);c(M,()=>qt,(Re,kt)=>{kt(Re,{value:"volumes",class:"flex items-center gap-2",children:(Pt,rr)=>{var tt=es(),rt=d(tt);ir(rt,{class:"size-4"});var wt=t(rt);ee(()=>w(wt,` Volumes (${e(se).volumes.length??""})`)),r(Pt,tt)},$$slots:{default:!0}})});var we=t(M,2);c(we,()=>qt,(Re,kt)=>{kt(Re,{value:"stacks",class:"flex items-center gap-2",children:(Pt,rr)=>{var tt=ts(),rt=d(tt);dr(rt,{class:"size-4"});var wt=t(rt);ee(()=>w(wt,` Compose Projects (${e(se).stacks.length??""})`)),r(Pt,tt)},$$slots:{default:!0}})}),r(st,Ae)},$$slots:{default:!0}})});var ze=t(Ue,2);c(ze,()=>Qt,(We,Ee)=>{Ee(We,{value:"containers",class:"mt-4",children:(st,Ye)=>{var Ae=oe(),Xe=d(Ae);{var et=M=>{Gt(M,{get data(){return e(se).containers},columns:[{accessorKey:"Names",header:"Name"},{accessorKey:"Image",header:"Image"},{accessorKey:"Status",header:"Status"},{accessorKey:"Ports",header:"Ports"},{accessorKey:"CreatedAt",header:"Created"}],idKey:"ID",features:{selection:!1},display:{filterPlaceholder:"Search containers...",noResultsMessage:"No containers found"},pagination:{pageSize:10}})},Ne=M=>{var we=as(),Re=s(we);Yt(Re,{class:"size-12 mx-auto mb-4 opacity-50"}),u(2),a(we),r(M,we)};Q(Xe,M=>{e(se).containers.length>0?M(et):M(Ne,!1)})}r(st,Ae)},$$slots:{default:!0}})});var Me=t(ze,2);c(Me,()=>Qt,(We,Ee)=>{Ee(We,{value:"images",class:"mt-4",children:(st,Ye)=>{var Ae=oe(),Xe=d(Ae);{var et=M=>{Gt(M,{get data(){return e(se).images},columns:[{accessorKey:"Repository",header:"Repository"},{accessorKey:"Tag",header:"Tag"},{accessorKey:"ID",header:"Image ID"},{accessorKey:"CreatedAt",header:"Created"},{accessorKey:"Size",header:"Size"}],idKey:"ID",features:{selection:!1},display:{filterPlaceholder:"Search images...",noResultsMessage:"No images found"},pagination:{pageSize:10}})},Ne=M=>{var we=ss(),Re=s(we);br(Re,{class:"size-12 mx-auto mb-4 opacity-50"}),u(2),a(we),r(M,we)};Q(Xe,M=>{e(se).images.length>0?M(et):M(Ne,!1)})}r(st,Ae)},$$slots:{default:!0}})});var Be=t(Me,2);c(Be,()=>Qt,(We,Ee)=>{Ee(We,{value:"networks",class:"mt-4",children:(st,Ye)=>{var Ae=oe(),Xe=d(Ae);{var et=M=>{Gt(M,{get data(){return e(se).networks},columns:[{accessorKey:"Name",header:"Name"},{accessorKey:"Driver",header:"Driver"},{accessorKey:"Scope",header:"Scope"},{accessorKey:"ID",header:"Network ID"},{accessorKey:"CreatedAt",header:"Created"}],idKey:"ID",features:{selection:!1},display:{filterPlaceholder:"Search networks...",noResultsMessage:"No networks found"},pagination:{pageSize:10}})},Ne=M=>{var we=os(),Re=s(we);kr(Re,{class:"size-12 mx-auto mb-4 opacity-50"}),u(2),a(we),r(M,we)};Q(Xe,M=>{e(se).networks.length>0?M(et):M(Ne,!1)})}r(st,Ae)},$$slots:{default:!0}})});var Nt=t(Be,2);c(Nt,()=>Qt,(We,Ee)=>{Ee(We,{value:"volumes",class:"mt-4",children:(st,Ye)=>{var Ae=oe(),Xe=d(Ae);{var et=M=>{Gt(M,{get data(){return e(se).volumes},columns:[{accessorKey:"Name",header:"Name"},{accessorKey:"Driver",header:"Driver"},{accessorKey:"Mountpoint",header:"Mountpoint"},{accessorKey:"CreatedAt",header:"Created"}],idKey:"Name",features:{selection:!1},display:{filterPlaceholder:"Search volumes...",noResultsMessage:"No volumes found"},pagination:{pageSize:10}})},Ne=M=>{var we=ns(),Re=s(we);ir(Re,{class:"size-12 mx-auto mb-4 opacity-50"}),u(2),a(we),r(M,we)};Q(Xe,M=>{e(se).volumes.length>0?M(et):M(Ne,!1)})}r(st,Ae)},$$slots:{default:!0}})});var Rt=t(Nt,2);c(Rt,()=>Qt,(We,Ee)=>{Ee(We,{value:"stacks",class:"mt-4",children:(st,Ye)=>{var Ae=oe(),Xe=d(Ae);{var et=M=>{Gt(M,{get data(){return e(se).stacks},columns:[{accessorKey:"Name",header:"Project Name"},{accessorKey:"Status",header:"Status"},{accessorKey:"ConfigFiles",header:"Config Files"}],idKey:"Name",features:{selection:!1},display:{filterPlaceholder:"Search compose projects...",noResultsMessage:"No compose projects found"},pagination:{pageSize:10}})},Ne=M=>{var we=ls(),Re=s(we);dr(Re,{class:"size-12 mx-auto mb-4 opacity-50"}),u(2),a(we),r(M,we)};Q(Xe,M=>{e(se).stacks.length>0?M(et):M(Ne,!1)})}r(st,Ae)},$$slots:{default:!0}})}),r(Ce,fe)},$$slots:{default:!0}})}),r(L,K)},Fe=L=>{var K=ds(),ce=s(K);ir(ce,{class:"size-12 mx-auto mb-4 opacity-50"}),u(4),a(K),r(L,K)};Q(dt,L=>{e(se).containers.length>0||e(se).images.length>0||e(se).networks.length>0||e(se).volumes.length>0||e(se).stacks.length>0?L(gt):L(Fe,!1)})}a(Oe),r(Ge,Oe)};Q(Qe,Ge=>{e(n).status==="online"&&Ge(xt)})}var At=t(Qe,2);{var yt=Ge=>{var Oe=gs(),ft=t(s(Oe),2),bt=s(ft);c(bt,()=>St,(Fe,L)=>{L(Fe,{class:"cursor-pointer hover:border-primary/50 transition-colors",onclick:()=>g(ct,!0),children:(K,ce)=>{var X=oe(),xe=d(X);c(xe,()=>Ct,(Ce,_e)=>{_e(Ce,{class:"p-4",children:(fe,Ue)=>{var ze=us(),Me=s(ze),Be=s(Me);dr(Be,{class:"size-5 text-blue-500"}),a(Me),u(2),a(ze),r(fe,ze)},$$slots:{default:!0}})}),r(K,X)},$$slots:{default:!0}})});var Ke=t(bt,2);c(Ke,()=>St,(Fe,L)=>{L(Fe,{class:"cursor-pointer hover:border-primary/50 transition-colors",onclick:()=>g(ut,!0),children:(K,ce)=>{var X=oe(),xe=d(X);c(xe,()=>Ct,(Ce,_e)=>{_e(Ce,{class:"p-4",children:(fe,Ue)=>{var ze=vs(),Me=s(ze),Be=s(Me);Rr(Be,{class:"size-5 text-green-500"}),a(Me),u(2),a(ze),r(fe,ze)},$$slots:{default:!0}})}),r(K,X)},$$slots:{default:!0}})});var Ve=t(Ke,2);c(Ve,()=>St,(Fe,L)=>{L(Fe,{class:"cursor-pointer hover:border-primary/50 transition-colors",onclick:()=>g(lt,!0),children:(K,ce)=>{var X=oe(),xe=d(X);c(xe,()=>Ct,(Ce,_e)=>{_e(Ce,{class:"p-4",children:(fe,Ue)=>{var ze=ms(),Me=s(ze),Be=s(Me);Yt(Be,{class:"size-5 text-purple-500"}),a(Me),u(2),a(ze),r(fe,ze)},$$slots:{default:!0}})}),r(K,X)},$$slots:{default:!0}})}),a(ft);var dt=t(ft,2);{var gt=Fe=>{var L=fs(),K=t(s(L),2);Tt(K,21,()=>e($e).slice(0,3),Et,(ce,X)=>{var xe=ps(),Ce=s(xe),_e=s(Ce),fe=s(_e);{var Ue=Ye=>{dr(Ye,{class:"size-4 text-blue-500"})},ze=(Ye,Ae)=>{{var Xe=Ne=>{Rr(Ne,{class:"size-4 text-green-500"})},et=Ne=>{Yt(Ne,{class:"size-4 text-purple-500"})};Q(Ye,Ne=>{e(X).type==="image"?Ne(Xe):Ne(et,!1)},Ae)}};Q(fe,Ye=>{e(X).type==="stack"?Ye(Ue):Ye(ze,!1)})}a(_e);var Me=t(_e,2),Be=s(Me),Nt=s(Be,!0);a(Be);var Rt=t(Be,2),We=s(Rt);a(Rt),a(Me),a(Ce);var Ee=t(Ce,2);const st=Dt(()=>e(X).status==="running"?"green":e(X).status==="failed"?"red":"amber");sa(Ee,{get variant(){return e(st)},get text(){return e(X).status}}),a(xe),ee(Ye=>{w(Nt,e(X).name),w(We,`${e(X).type??""} â€¢ ${Ye??""} ago`)},[()=>hr(new Date(e(X).createdAt))]),r(ce,xe)}),a(K),a(L),r(Fe,L)};Q(dt,Fe=>{e($e).length>0&&Fe(gt)})}a(Oe),r(Ge,Oe)};Q(At,Ge=>{Ut(e(n))==="online"&&Ge(yt)})}ee(()=>{w(E,e(n).metrics.containerCount??0),w(W,e(n).metrics.imageCount??0),w(Z,e(n).metrics.networkCount??0),w(Le,e(n).metrics.volumeCount??0)}),r(J,de)},$$slots:{default:!0}})};Q(m,D=>{e(n).metrics&&D(k)})}var O=t(m,2),F=s(O);c(F,()=>St,(D,J)=>{J(D,{children:(ie,de)=>{var R=bs(),h=d(R);c(h,()=>Sr,(_,E)=>{E(_,{children:(B,ae)=>{var P=oe(),W=d(P);c(W,()=>Cr,(j,V)=>{V(j,{children:(U,Z)=>{u();var he=z("Agent Information");r(U,he)},$$slots:{default:!0}})}),r(B,P)},$$slots:{default:!0}})});var T=t(h,2);c(T,()=>Ct,(_,E)=>{E(_,{class:"space-y-4",children:(B,ae)=>{var P=ys(),W=d(P),j=s(W),V=t(s(j),2),U=s(V,!0);a(V),a(j);var Z=t(j,2),he=t(s(Z),2),ne=s(he,!0);a(he),a(Z);var Se=t(Z,2),Le=t(s(Se),2),Qe=s(Le,!0);a(Le),a(Se);var xt=t(Se,2),At=t(s(xt),2),yt=s(At,!0);a(At),a(xt),a(W);var Ge=t(W,2),Oe=t(s(Ge),2);Tt(Oe,21,()=>e(n).capabilities,Et,(Ke,Ve)=>{var dt=$s(),gt=s(dt,!0);a(dt),ee(()=>w(gt,e(Ve))),r(Ke,dt)},Ke=>{var Ve=hs();r(Ke,Ve)}),a(Oe),a(Ge);var ft=t(Ge,2);{var bt=Ke=>{var Ve=xs(),dt=t(s(Ve),2),gt=s(dt),Fe=t(s(gt),2),L=s(Fe,!0);a(Fe),a(gt);var K=t(gt,2),ce=t(s(K),2),X=s(ce,!0);a(ce),a(K);var xe=t(K,2),Ce=t(s(xe),2),_e=s(Ce,!0);a(Ce),a(xe),a(dt),a(Ve),ee(()=>{w(L,e(n).dockerInfo.version),w(X,e(n).dockerInfo.containers),w(_e,e(n).dockerInfo.images)}),r(Ke,Ve)};Q(ft,Ke=>{e(n).dockerInfo&&Ke(bt)})}ee((Ke,Ve)=>{w(U,e(n).hostname),w(ne,e(n).id),w(Qe,Ke),w(yt,Ve)},[()=>new Date(e(n).createdAt).toLocaleDateString(),()=>e(n).updatedAt?new Date(e(n).updatedAt).toLocaleDateString():"Never"]),r(B,P)},$$slots:{default:!0}})}),r(ie,R)},$$slots:{default:!0}})});var p=t(F,2);c(p,()=>St,(D,J)=>{J(D,{children:(ie,de)=>{var R=As(),h=d(R);c(h,()=>Sr,(_,E)=>{E(_,{children:(B,ae)=>{var P=ks(),W=s(P);c(W,()=>Cr,(V,U)=>{U(V,{children:(Z,he)=>{u();var ne=z("Recent Tasks");r(Z,ne)},$$slots:{default:!0}})});var j=t(W,2);ye(j,{variant:"outline",size:"sm",onclick:ge,children:(V,U)=>{xr(V,{class:"size-4"})},$$slots:{default:!0}}),a(P),r(B,P)},$$slots:{default:!0}})});var T=t(h,2);c(T,()=>Ct,(_,E)=>{E(_,{children:(B,ae)=>{var P=oe(),W=d(P);{var j=U=>{var Z=Ds();Tt(Z,21,()=>e(G).slice(0,10),Et,(he,ne)=>{var Se=Cs(),Le=s(Se),Qe=s(Le),xt=s(Qe),At=s(xt,!0);a(xt);var yt=t(xt,2),Ge=s(yt,!0);a(yt),a(Qe);var Oe=t(Qe,2),ft=s(Oe);a(Oe),a(Le);var bt=t(Le,2);{var Ke=L=>{var K=Ps(),ce=s(K),X=s(ce),xe=t(X);{var Ce=_e=>{var fe=z();ee(Ue=>w(fe,Ue),[()=>e(ne).payload.args.join(" ")]),r(_e,fe)};Q(xe,_e=>{var fe;((fe=e(ne).payload.args)==null?void 0:fe.length)>0&&_e(Ce)})}a(ce),a(K),ee(()=>w(X,`${e(ne).payload.command??""} `)),r(L,K)};Q(bt,L=>{var K;(K=e(ne).payload)!=null&&K.command&&L(Ke)})}var Ve=t(bt,2);{var dt=L=>{var K=ws(),ce=t(s(K),2),X=s(ce,!0);a(ce),a(K),ee(xe=>w(X,xe),[()=>typeof e(ne).result=="string"?e(ne).result:JSON.stringify(e(ne).result,null,2)]),r(L,K)};Q(Ve,L=>{e(ne).status==="completed"&&e(ne).result&&L(dt)})}var gt=t(Ve,2);{var Fe=L=>{var K=Ss(),ce=t(s(K),2),X=s(ce,!0);a(ce),a(K),ee(()=>w(X,e(ne).error)),r(L,K)};Q(gt,L=>{e(ne).error&&L(Fe)})}a(Se),ee((L,K,ce)=>{w(At,L),Pr(yt,1,`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${K??""}`),w(Ge,e(ne).status),w(ft,`${ce??""} ago`)},[()=>e(ne).type.replace("_"," ").replace(/\b\w/g,L=>L.toUpperCase()),()=>Ot(e(ne).status),()=>hr(new Date(e(ne).createdAt))]),r(he,Se)}),a(Z),r(U,Z)},V=U=>{var Z=zs(),he=s(Z);Tr(he,{class:"size-12 mx-auto mb-4 opacity-50"}),u(2),a(Z),r(U,Z)};Q(W,U=>{e(G).length>0?U(j):U(V,!1)})}r(B,P)},$$slots:{default:!0}})}),r(ie,R)},$$slots:{default:!0}})}),a(O);var v=t(O,2);{var Pe=D=>{var J=oe(),ie=d(J);c(ie,()=>fr,(de,R)=>{R(de,{variant:"destructive",children:(h,T)=>{var _=Ns(),E=d(_);yr(E,{class:"size-4"});var B=t(E,2);c(B,()=>gr,(P,W)=>{W(P,{children:(j,V)=>{u();var U=z("Agent Offline");r(j,U)},$$slots:{default:!0}})});var ae=t(B,2);c(ae,()=>_r,(P,W)=>{W(P,{children:(j,V)=>{u();var U=z("This agent is not currently connected. Commands cannot be sent until the agent reconnects.");r(j,U)},$$slots:{default:!0}})}),r(h,_)},$$slots:{default:!0}})}),r(D,J)};Q(v,D=>{e(n)&&!It(e(n))&&D(Pe)})}r(S,C)};Q(o,S=>{e(n)&&S(f)},y)}};Q(Ht,o=>{e(be)?o(Jt):o(pr,!1)})}a(te);var tr=t(te,2);c(tr,()=>nr,(o,y)=>{y(o,{get open(){return e(nt)},set open(f){g(nt,f,!0)},children:(f,S)=>{var C=oe(),A=d(C);c(A,()=>ar,(pe,N)=>{N(pe,{class:"sm:max-w-md",children:(i,x)=>{var m=Fs(),k=d(m);c(k,()=>sr,(h,T)=>{T(h,{children:(_,E)=>{var B=Ts(),ae=d(B);c(ae,()=>or,(W,j)=>{j(W,{children:(V,U)=>{u();var Z=z("Send Command to Agent");r(V,Z)},$$slots:{default:!0}})});var P=t(ae,2);c(P,()=>lr,(W,j)=>{j(W,{children:(V,U)=>{u();var Z=z();ee(()=>{var he;return w(Z,`Execute a command on ${((he=e(n))==null?void 0:he.hostname)??""}`)}),r(V,Z)},$$slots:{default:!0}})}),r(_,B)},$$slots:{default:!0}})});var O=t(k,2),F=s(O),p=s(F);je(p,{for:"command-select",children:(h,T)=>{u();var _=z("Command");r(h,_)},$$slots:{default:!0}});var v=t(p,2);const Pe=Dt(()=>{var h;return(h=e(De))==null?void 0:h.value});c(v,()=>Gr,(h,T)=>{T(h,{type:"single",get value(){return e(Pe)},onValueChange:_=>g(De,qe.find(E=>E.value===_),!0),children:(_,E)=>{var B=js(),ae=d(B);c(ae,()=>Yr,(W,j)=>{j(W,{children:(V,U)=>{var Z=Es(),he=s(Z,!0);a(Z),ee(()=>{var ne;return w(he,((ne=e(De))==null?void 0:ne.label)||"Select a command")}),r(V,Z)},$$slots:{default:!0}})});var P=t(ae,2);c(P,()=>Xr,(W,j)=>{j(W,{children:(V,U)=>{var Z=oe(),he=d(Z);Tt(he,17,()=>qe,Et,(ne,Se)=>{var Le=oe(),Qe=d(Le);c(Qe,()=>ea,(xt,At)=>{At(xt,{get value(){return e(Se).value},children:(yt,Ge)=>{u();var Oe=z();ee(()=>w(Oe,e(Se).label)),r(yt,Oe)},$$slots:{default:!0}})}),r(ne,Le)}),r(V,Z)},$$slots:{default:!0}})}),r(_,B)},$$slots:{default:!0}})}),a(F);var D=t(F,2);{var J=h=>{var T=Is(),_=s(T);je(_,{for:"custom-command",children:(B,ae)=>{u();var P=z("Custom Command");r(B,P)},$$slots:{default:!0}});var E=t(_,2);ot(E,{id:"custom-command",placeholder:"docker ps -a",get disabled(){return e(Ie)},get value(){return e(at)},set value(B){g(at,B,!0)}}),a(T),r(h,T)};Q(D,h=>{var T;((T=e(De))==null?void 0:T.value)==="custom"&&h(J)})}var ie=t(D,2);{var de=h=>{var T=Ls(),_=s(T);je(_,{for:"command-args",children:(B,ae)=>{u();var P=z("Additional Arguments (optional)");r(B,P)},$$slots:{default:!0}});var E=t(_,2);ot(E,{id:"command-args",placeholder:"--format table",get disabled(){return e(Ie)},get value(){return e(Je)},set value(B){g(Je,B,!0)}}),a(T),r(h,T)};Q(ie,h=>{e(De)&&e(De).value!=="agent_upgrade"&&h(de)})}a(O);var R=t(O,2);c(R,()=>Qr,(h,T)=>{T(h,{children:(_,E)=>{var B=Vs(),ae=d(B);ye(ae,{variant:"outline",onclick:()=>g(nt,!1),get disabled(){return e(Ie)},children:(j,V)=>{u();var U=z("Cancel");r(j,U)},$$slots:{default:!0}});var P=t(ae,2);const W=Dt(()=>!e(De)||e(Ie));ye(P,{onclick:mt,get disabled(){return e(W)},children:(j,V)=>{var U=oe(),Z=d(U);{var he=Se=>{var Le=Ks(),Qe=d(Le);xr(Qe,{class:"size-4 mr-2 animate-spin"}),u(),r(Se,Le)},ne=Se=>{var Le=Os(),Qe=d(Le);da(Qe,{class:"size-4 mr-2"}),u(),r(Se,Le)};Q(Z,Se=>{e(Ie)?Se(he):Se(ne,!1)})}r(j,U)},$$slots:{default:!0}}),r(_,B)},$$slots:{default:!0}})}),r(i,m)},$$slots:{default:!0}})}),r(f,C)},$$slots:{default:!0}})});var Wt=t(tr,2);c(Wt,()=>nr,(o,y)=>{y(o,{get open(){return e(ct)},set open(f){g(ct,f,!0)},children:(f,S)=>{var C=oe(),A=d(C);c(A,()=>ar,(pe,N)=>{N(pe,{class:"sm:max-w-2xl",children:(i,x)=>{var m=Ms(),k=d(m);c(k,()=>sr,(F,p)=>{p(F,{children:(v,Pe)=>{var D=Us(),J=d(D);c(J,()=>or,(de,R)=>{R(de,{children:(h,T)=>{u();var _=z();ee(()=>{var E;return w(_,`Deploy Stack to ${((E=e(n))==null?void 0:E.hostname)??""}`)}),r(h,_)},$$slots:{default:!0}})});var ie=t(J,2);c(ie,()=>lr,(de,R)=>{R(de,{children:(h,T)=>{u();var _=z("Choose a stack to deploy or create a new one");r(h,_)},$$slots:{default:!0}})}),r(v,D)},$$slots:{default:!0}})});var O=t(k,2);Da(O,{get agentId(){return I},onClose:()=>g(ct,!1),onDeploy:Bt}),r(i,m)},$$slots:{default:!0}})}),r(f,C)},$$slots:{default:!0}})});var Zt=t(Wt,2);c(Zt,()=>nr,(o,y)=>{y(o,{get open(){return e(ut)},set open(f){g(ut,f,!0)},children:(f,S)=>{var C=oe(),A=d(C);c(A,()=>ar,(pe,N)=>{N(pe,{class:"sm:max-w-md",children:(i,x)=>{var m=Hs(),k=d(m);c(k,()=>sr,(F,p)=>{p(F,{children:(v,Pe)=>{var D=Bs(),J=d(D);c(J,()=>or,(de,R)=>{R(de,{children:(h,T)=>{u();var _=z();ee(()=>{var E;return w(_,`Pull Image to ${((E=e(n))==null?void 0:E.hostname)??""}`)}),r(h,_)},$$slots:{default:!0}})});var ie=t(J,2);c(ie,()=>lr,(de,R)=>{R(de,{children:(h,T)=>{u();var _=z("Enter the image name to download");r(h,_)},$$slots:{default:!0}})}),r(v,D)},$$slots:{default:!0}})});var O=t(k,2);$a(O,{get agentId(){return I},onClose:()=>g(ut,!1),onPull:Lt}),r(i,m)},$$slots:{default:!0}})}),r(f,C)},$$slots:{default:!0}})});var Ft=t(Zt,2);c(Ft,()=>nr,(o,y)=>{y(o,{get open(){return e(lt)},set open(f){g(lt,f,!0)},children:(f,S)=>{var C=oe(),A=d(C);c(A,()=>ar,(pe,N)=>{N(pe,{class:"sm:max-w-xl",children:(i,x)=>{var m=Ws(),k=d(m);c(k,()=>sr,(F,p)=>{p(F,{children:(v,Pe)=>{var D=Js(),J=d(D);c(J,()=>or,(de,R)=>{R(de,{children:(h,T)=>{u();var _=z();ee(()=>{var E;return w(_,`Run Container on ${((E=e(n))==null?void 0:E.hostname)??""}`)}),r(h,_)},$$slots:{default:!0}})});var ie=t(J,2);c(ie,()=>lr,(de,R)=>{R(de,{children:(h,T)=>{u();var _=z("Quickly start a container from an image");r(h,_)},$$slots:{default:!0}})}),r(v,D)},$$slots:{default:!0}})});var O=t(k,2);La(O,{get agentId(){return I},onClose:()=>g(lt,!1),onRun:H}),r(i,m)},$$slots:{default:!0}})}),r(f,C)},$$slots:{default:!0}})}),ee(()=>{var o;w(pt,((o=e(n))==null?void 0:o.hostname)||"Agent Details"),w(ht,e(n)?`Agent ID: ${e(n).id}`:"Loading agent information...")}),r(_t,le),er()}export{Bo as component};
