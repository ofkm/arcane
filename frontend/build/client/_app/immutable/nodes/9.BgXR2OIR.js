import{d as xr,f,a,c as R,t as B,s as O}from"../chunks/zguDtZw-.js";import{p as hr,d as br,i as yr,f as u,a as kr,s,c as r,g as e,u as h,r as t,h as w,t as J,b as ge,e as I}from"../chunks/SIFgIYqZ.js";import{i as K}from"../chunks/D4OMRqmI.js";import{e as Ke,i as Nt,a as Sr,b as pt,r as Pr}from"../chunks/CCdH-GF7.js";import{c as d}from"../chunks/BmbK19Nn.js";import{b as wr}from"../chunks/D1n4spDD.js";import{b as Cr}from"../chunks/C7TZ37ch.js";import{C as ae}from"../chunks/BUTdIsFV.js";import{C as se,a as Me,b as We}from"../chunks/B9HEA4Xl.js";import{B as oe}from"../chunks/DsjzulNM.js";import{A as Ar}from"../chunks/m9ItHG6J.js";import{A as zr,a as Lr}from"../chunks/iMjrFJrG.js";import{I as Dr}from"../chunks/87Ty6o0e.js";import{L as Tt}from"../chunks/DUYgD2_s.js";import{A as jr,L as Er}from"../chunks/vd7J2FIp.js";import{S as _t}from"../chunks/mAxAJ61f.js";import{s as Ot}from"../chunks/CXuQMvfN.js";import{c as gt}from"../chunks/DVaDWjV4.js";import{i as Ft,g as Ir}from"../chunks/CGNubMbN.js";import{t as Pe}from"../chunks/BJCWvCOq.js";import"../chunks/CWlk9DSI.js";import{Y as Nr,E as Tr}from"../chunks/BZp3mCew.js";import{h as Or,t as Fr}from"../chunks/CHemGuYG.js";import{S as Rr}from"../chunks/TMHAhBh7.js";import{A as Br}from"../chunks/DJtaXGK5.js";import{D as Ur,a as Vr,b as Yr,c as qr,R as Hr}from"../chunks/UVnX9grY.js";import{R as Jr,S as Kr,a as Mr,b as Wr}from"../chunks/C73rBIzk.js";import{D as Gr}from"../chunks/BNz4MoZq.js";import{L as Qr}from"../chunks/BjTWgG3-.js";import{S as Rt}from"../chunks/xg94FB6W.js";import{A as Bt}from"../chunks/-0Ble-HS.js";import{F as Ge}from"../chunks/C5X3i-BG.js";import{L as we}from"../chunks/0Kkvs01K.js";import{S as Ut}from"../chunks/CHbZ4NRu.js";import{T as Vt}from"../chunks/CWPqODAu.js";import{A as Xr}from"../chunks/66aVjmWj.js";import{A as Zr}from"../chunks/BZMdbj5w.js";import{R as ea}from"../chunks/B877H2_W.js";import{C as ta}from"../chunks/CX4OS9M0.js";import{E as ra}from"../chunks/GAc1BGJd.js";var aa=f("<!> Back",1),sa=f("<!> Deploy to Agent",1),oa=f("<!> <!> <!>",1),na=f('<div class="max-w-full px-4 py-4"><!></div>'),la=($t,T,Qe)=>T(e(Qe).id),ia=f('<span class="ml-auto text-xs bg-muted px-1.5 py-0.5 rounded shrink-0"> </span>'),da=f('<button><!> <span class="truncate"> </span> <!></button>'),va=f('<div><p class="text-sm font-medium text-muted-foreground">Services</p> <p class="text-2xl font-bold"> </p></div> <div class="bg-primary/10 p-3 rounded-full"><!></div>',1),ca=f('<div><p class="text-sm font-medium text-muted-foreground">Running</p> <p class="text-2xl font-bold"> </p></div> <div class="bg-green-500/10 p-3 rounded-full"><!></div>',1),ua=f('<div><p class="text-sm font-medium text-muted-foreground">Created</p> <p class="text-lg font-medium"> </p></div> <div class="bg-blue-500/10 p-3 rounded-full"><!></div>',1),ma=f('<a target="_blank" rel="noopener noreferrer" class="inline-flex items-center px-3 py-2 rounded-md bg-blue-500/10 text-blue-600 dark:text-blue-400 font-medium hover:bg-blue-500/20 transition-colors"> <!></a>'),fa=f('<div class="flex flex-wrap gap-2"></div>'),pa=f("<!> <!>",1),_a=f('<a class="flex items-center justify-between p-4 border rounded-lg hover:bg-muted/50 transition-colors"><div class="flex items-center gap-3"><div class="bg-primary/10 p-2 rounded-full"><!></div> <div><p class="font-medium"> </p> <p class="text-sm text-muted-foreground"> </p></div></div> <div class="flex items-center gap-3"><!> <!></div></a>'),ga=f('<div class="flex items-center justify-between p-4 border rounded-lg bg-muted/20"><div class="flex items-center gap-3"><div class="bg-muted/50 p-2 rounded-full"><!></div> <div><p class="font-medium"> </p> <p class="text-sm text-muted-foreground">Not created</p></div></div> <!></div>'),$a=f('<div class="space-y-4"></div>'),xa=f('<div class="text-center py-12"><div class="mb-4 rounded-full bg-muted/50 flex items-center justify-center mx-auto size-16"><!></div> <div class="text-muted-foreground">No services found for this stack</div></div>'),ha=f('<p class="text-sm text-muted-foreground mt-2">Stack name cannot be changed while running. Please stop the stack first.</p>'),ba=f('<div class="max-w-md"><!> <!> <!></div>'),ya=f("<!> <!>",1),ka=f('<div class="w-full h-[590px] rounded-md overflow-hidden flex-shrink-0"><!></div> <p class="text-sm text-muted-foreground flex-shrink-0">Edit your <span class="font-medium">compose.yaml</span> file directly. Syntax errors will be highlighted.</p>',1),Sa=f("<!> <!>",1),Pa=f('<div class="w-full h-[590px] rounded-md overflow-hidden flex-shrink-0"><!></div> <p class="text-sm text-muted-foreground flex-shrink-0">Define environment variables in KEY=value format.</p>',1),wa=f("<!> <!>",1),Ca=f('<div class="flex items-center gap-2"><div class="size-2 bg-green-500 rounded-full animate-pulse"></div> <span class="text-green-600 text-sm font-medium">Live</span></div> <!>',1),Aa=f('<div class="sticky top-0 z-10 bg-background/95 backdrop-blur border-b"><div class="max-w-full px-4 py-3"><div class="flex items-center justify-between"><div class="flex items-center gap-3"><!> <div class="h-4 w-px bg-border"></div> <div class="flex items-center gap-2"><h1 class="text-lg font-semibold truncate max-w-[300px]"> </h1> <!></div></div> <div class="flex items-center gap-2"><!> <!></div></div></div></div> <!> <div class="flex h-[calc(100vh-64px)]"><div class="w-48 shrink-0 border-r bg-background/50"><div class="sticky top-16 p-3"><nav class="space-y-1"></nav></div></div> <div class="flex-1 overflow-y-auto"><div class="p-6 max-w-none"><div class="space-y-8"><section id="overview" class="scroll-mt-20"><h2 class="text-xl font-semibold mb-6 flex items-center gap-2"><!> Overview</h2> <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6"><!> <!> <!></div> <!></section> <section id="services" class="scroll-mt-20"><h2 class="text-xl font-semibold mb-6 flex items-center gap-2"><!> </h2> <!></section> <section id="config" class="scroll-mt-20"><div class="flex items-center justify-between mb-6"><h2 class="text-xl font-semibold flex items-center gap-2"><!> Configuration</h2> <!></div> <!> <div class="grid grid-cols-1 lg:grid-cols-3 gap-6"><div class="lg:col-span-2"><!></div> <div class="lg:col-span-1"><!></div></div></section> <section id="logs" class="scroll-mt-20"><div class="flex items-center justify-between mb-6"><h2 class="text-xl font-semibold flex items-center gap-2"><!> Stack Logs</h2> <div class="flex items-center gap-3"><label class="flex items-center gap-2"><input type="checkbox" class="size-4"/> Auto-scroll</label> <!> <!> <!></div></div> <!></section></div></div></div></div>',1),za=f("<!> Back to Stacks",1),La=f('<div class="min-h-screen flex items-center justify-center"><div class="text-center"><div class="rounded-full bg-muted/50 p-6 mb-6 inline-flex"><!></div> <h2 class="text-2xl font-medium mb-3">Stack Not Found</h2> <p class="text-center text-muted-foreground max-w-md mb-8">Could not load stack data. It may have been removed or the Docker engine is not accessible.</p> <!></div></div>'),Da=f("<!> <!>",1),ja=f('<div class="flex items-center gap-2"><div class="size-2 rounded-full bg-green-500"></div> <span> </span> <span class="text-xs text-muted-foreground"> </span></div>'),Ea=f("<!> <!>",1),Ia=f("<!> Deploy",1),Na=f("<!> <!>",1),Ta=f('<!> <div class="space-y-4 py-4"><div class="space-y-2"><!> <!> <p class="text-xs text-muted-foreground">This will deploy the current stack configuration to the selected agent.</p></div></div> <!>',1),Oa=f('<div class="min-h-screen bg-background"><!></div> <!>',1);function Ss($t,T){hr(T,!0);const Qe=new Rr;let A=h(()=>T.data.stack),$e=h(()=>T.data.editorState),Xe=h(()=>T.data.servicePorts),Yt=h(()=>T.data.settings),z=br({deploying:!1,stopping:!1,restarting:!1,removing:!1,importing:!1,redeploying:!1,destroying:!1,pulling:!1,saving:!1}),Ce=h(()=>e($e).name),Ae=h(()=>e($e).composeContent),ze=h(()=>e($e).envContent||""),xt=h(()=>e($e).originalName),ht=h(()=>e($e).originalComposeContent),bt=h(()=>e($e).originalEnvContent||""),Ze=h(()=>e(Ce)!==e(xt)||e(Ae)!==e(ht)||e(ze)!==e(bt));const yt=h(()=>{var b;return((b=e(Yt))==null?void 0:b.baseServerUrl)||"localhost"});let kt=ge("overview"),Ve=ge(!0),et=ge(!1),me=ge(void 0),Le=ge(!1),xe=ge(!1),ne=ge("");const tt=h(()=>(T.data.agents||[]).filter(b=>b.status==="online"));yr(()=>{z.deploying=!1,z.stopping=!1,z.restarting=!1,z.removing=!1,z.saving=!1});async function qt(){if(!e(A)||!e(Ze))return;const b=e(A).id;Or({result:await Fr(Qe.save(b,e(Ce),e(Ae),e(ze))),message:"Failed to Save Compose Project",setLoadingState:m=>z.saving=m,onSuccess:async m=>{console.log("Compose Project save successful",m),Pe.success("Compose Project updated successfully!"),I(xt,m.name,!0),I(ht,e(Ae),!0),I(bt,e(ze),!0),await new Promise(_=>setTimeout(_,200)),m&&m.id!==b?(console.log(`Stack ID changed from ${b} to ${m.id}. Navigating...`),await Ir(`/compose/${e(Ce)}`,{invalidateAll:!0})):await Ft()}})}async function Ht(){var m;if(!e(ne)){Pe.error("Please select an agent for deployment");return}const b=e(tt).find(_=>_.id===e(ne));if(!b){Pe.error("Selected agent not found or offline");return}if(!T.data.stack){Pe.error("Stack data not available");return}I(xe,!0);try{const _=await fetch(`/api/agents/${e(ne)}/deploy/stack`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({stackName:T.data.stack.name,composeContent:T.data.stack.composeContent,envContent:T.data.stack.envContent,mode:"compose"})});if(!_.ok){const L=await _.json().catch(()=>({}));throw new Error(L.error||`Failed to deploy stack: ${_.statusText}`)}const F=await _.json();Pe.success(`Stack "${((m=T.data.stack)==null?void 0:m.name)||"Unknown"}" deployed to agent ${b.hostname}!`),I(Le,!1),I(ne,"")}catch(_){console.error("Deploy error:",_),Pe.error(_ instanceof Error?_.message:"Failed to deploy stack")}finally{I(xe,!1)}}function Jt(b){var _;if(!b||!((_=b.networkSettings)!=null&&_.Networks))return e(yt);const m=b.networkSettings.Networks;for(const F in m){const L=m[F];if((L.Driver==="macvlan"||L.Driver==="ipvlan")&&L.IPAddress)return L.IPAddress}return e(yt)}function Kt(b,m,_="http"){const F=Jt(b);if(typeof m=="string"){const L=m.split("/"),Z=parseInt(L[0],10);return L.length>1&&L[1]==="udp"&&(_="udp"),`${_}://${F}:${Z}`}if(typeof m=="number")return`${_}://${F}:${m}`;if(m&&typeof m=="object"){const L=m.PublicPort||m.PrivatePort||80;return m.Type&&(_=m.Type.toLowerCase()==="tcp"?"http":"https"),`${_}://${F}:${L}`}return`${_}://${F}:80`}function Mt(){I(et,!0)}function Wt(){I(et,!1)}function Gt(){}function Qt(){}const Xt=[{id:"overview",label:"Overview",icon:Ge},{id:"services",label:"Services",icon:we},{id:"config",label:"Configuration",icon:Ut},{id:"logs",label:"Logs",icon:Vt}];function Zt(b){I(kt,b,!0);const m=document.getElementById(b);m&&m.scrollIntoView({behavior:"smooth",block:"start"})}var St=Oa(),rt=u(St),er=r(rt);{var tr=b=>{var m=Aa(),_=u(m),F=r(_),L=r(F),Z=r(L),le=r(Z);oe(le,{variant:"ghost",size:"sm",href:"/compose",children:(o,l)=>{var i=aa(),D=u(i);Bt(D,{class:"size-4 mr-2"}),w(),a(o,i)},$$slots:{default:!0}});var he=s(le,4),ie=r(he),Ye=r(ie,!0);t(ie);var De=s(ie,2);{var fe=o=>{const l=h(()=>Ot[e(A).status.toLowerCase()]||"gray"),i=h(()=>gt(e(A).status));_t(o,{get variant(){return e(l)},get text(){return e(i)}})};K(De,o=>{e(A).status&&o(fe)})}t(he),t(Z);var de=s(Z,2),je=r(de);const qe=h(()=>({start:z.deploying,stop:z.stopping,restart:z.restarting,remove:z.removing}));jr(je,{get id(){return e(A).id},type:"stack",get itemState(){return e(A).status},get loading(){return e(qe)},onActionComplete:()=>Ft()});var at=s(je,2);{var st=o=>{const l=h(()=>Object.values(z).some(Boolean));oe(o,{variant:"outline",size:"sm",onclick:()=>I(Le,!0),get disabled(){return e(l)},children:(i,D)=>{var c=sa(),$=u(c);Rt($,{class:"size-4 mr-2"}),w(),a(i,c)},$$slots:{default:!0}})};K(at,o=>{e(tt).length>0&&o(st)})}t(de),t(L),t(F),t(_);var ee=s(_,2);{var ve=o=>{var l=na(),i=r(l);d(i,()=>Ar,(D,c)=>{c(D,{variant:"destructive",children:($,j)=>{var C=oa(),y=u(C);ta(y,{class:"size-4"});var S=s(y,2);d(S,()=>zr,(n,p)=>{p(n,{children:(P,g)=>{w();var v=B("Error Loading Stack");a(P,v)},$$slots:{default:!0}})});var k=s(S,2);d(k,()=>Lr,(n,p)=>{p(n,{children:(P,g)=>{w();var v=B();J(()=>O(v,T.data.error)),a(P,v)},$$slots:{default:!0}})}),a($,C)},$$slots:{default:!0}})}),t(l),a(o,l)};K(ee,o=>{T.data.error&&o(ve)})}var M=s(ee,2),be=r(M),Q=r(be),X=r(Q);Ke(X,21,()=>Xt,Nt,(o,l)=>{var i=da();const D=h(()=>e(l).icon);i.__click=[la,Zt,l];var c=r(i);d(c,()=>e(D),(S,k)=>{k(S,{class:"size-4 shrink-0"})});var $=s(c,2),j=r($,!0);t($);var C=s($,2);{var y=S=>{var k=ia(),n=r(k,!0);t(k),J(()=>O(n,e(A).serviceCount)),a(S,k)};K(C,S=>{e(l).id==="services"&&e(A).serviceCount&&S(y)})}t(i),J(()=>{Sr(i,1,`w-full flex items-center gap-2 px-3 py-2 text-sm font-medium rounded-md transition-colors
									${e(kt)===e(l).id?"bg-primary/10 text-primary border border-primary/20":"text-muted-foreground hover:text-foreground hover:bg-muted/50"}`),O(j,e(l).label)}),a(o,i)}),t(X),t(Q),t(be);var ce=s(be,2),W=r(ce),U=r(W),Y=r(U),G=r(Y),V=r(G);Ge(V,{class:"size-5"}),w(),t(G);var te=s(G,2),ye=r(te);d(ye,()=>ae,(o,l)=>{l(o,{class:"border",children:(i,D)=>{var c=R(),$=u(c);d($,()=>se,(j,C)=>{C(j,{class:"p-6 flex items-center justify-between",children:(y,S)=>{var k=va(),n=u(k),p=s(r(n),2),P=r(p,!0);t(p),t(n);var g=s(n,2),v=r(g);we(v,{class:"text-primary size-5"}),t(g),J(()=>O(P,e(A).serviceCount)),a(y,k)},$$slots:{default:!0}})}),a(i,c)},$$slots:{default:!0}})});var q=s(ye,2);d(q,()=>ae,(o,l)=>{l(o,{class:"border",children:(i,D)=>{var c=R(),$=u(c);d($,()=>se,(j,C)=>{C(j,{class:"p-6 flex items-center justify-between",children:(y,S)=>{var k=ca(),n=u(k),p=s(r(n),2),P=r(p,!0);t(p),t(n);var g=s(n,2),v=r(g);Xr(v,{class:"text-green-500 size-5"}),t(g),J(()=>O(P,e(A).runningCount)),a(y,k)},$$slots:{default:!0}})}),a(i,c)},$$slots:{default:!0}})});var He=s(q,2);d(He,()=>ae,(o,l)=>{l(o,{class:"border",children:(i,D)=>{var c=R(),$=u(c);d($,()=>se,(j,C)=>{C(j,{class:"p-6 flex items-center justify-between",children:(y,S)=>{var k=ua(),n=u(k),p=s(r(n),2),P=r(p,!0);t(p),t(n);var g=s(n,2),v=r(g);Ge(v,{class:"text-blue-500 size-5"}),t(g),J(E=>O(P,E),[()=>new Date(e(A).createdAt??"").toLocaleDateString()]),a(y,k)},$$slots:{default:!0}})}),a(i,c)},$$slots:{default:!0}})}),t(te);var ot=s(te,2);{var nt=o=>{var l=R();const i=h(()=>[...new Set(Object.values(e(Xe)).flat())]);var D=u(l);d(D,()=>ae,(c,$)=>{$(c,{class:"border",children:(j,C)=>{var y=pa(),S=u(y);d(S,()=>Me,(n,p)=>{p(n,{class:"pb-4",children:(P,g)=>{var v=R(),E=u(v);d(E,()=>We,(x,N)=>{N(x,{children:(H,Re)=>{w();var Be=B("Exposed Ports");a(H,Be)},$$slots:{default:!0}})}),a(P,v)},$$slots:{default:!0}})});var k=s(S,2);d(k,()=>se,(n,p)=>{p(n,{children:(P,g)=>{var v=fa();Ke(v,20,()=>e(i),E=>E,(E,x)=>{var N=ma(),H=r(N),Re=s(H);ra(Re,{class:"size-4 ml-2"}),t(N),J(Be=>{pt(N,"href",Be),O(H,`Port ${x??""} `)},[()=>Kt(e(A),x)]),a(E,N)}),t(v),a(P,v)},$$slots:{default:!0}})}),a(j,y)},$$slots:{default:!0}})}),a(o,l)};K(ot,o=>{e(Xe)&&Object.keys(e(Xe)).length>0&&o(nt)})}t(Y);var Ee=s(Y,2),Ie=r(Ee),lt=r(Ie);we(lt,{class:"size-5"});var Ne=s(lt);t(Ie);var Te=s(Ie,2);d(Te,()=>ae,(o,l)=>{l(o,{class:"border",children:(i,D)=>{var c=R(),$=u(c);d($,()=>se,(j,C)=>{C(j,{class:"p-6",children:(y,S)=>{var k=R(),n=u(k);{var p=g=>{var v=$a();Ke(v,21,()=>e(A).services,E=>E.id||E.name,(E,x)=>{var N=R();const H=h(()=>{var re;return((re=e(x).state)==null?void 0:re.Status)||"unknown"}),Re=h(()=>Ot[e(H).toLowerCase()]||"gray");var Be=u(N);{var fr=re=>{var ue=_a(),pe=r(ue),_e=r(pe),ut=r(_e);we(ut,{class:"text-primary size-4"}),t(_e);var Ue=s(_e,2),Se=r(Ue),mt=r(Se,!0);t(Se);var Je=s(Se,2),ft=r(Je);t(Je),t(Ue),t(pe);var Et=s(pe,2),It=r(Et);const _r=h(()=>gt(e(H)));_t(It,{get variant(){return e(Re)},get text(){return e(_r)}});var gr=s(It,2);Zr(gr,{class:"size-4 text-primary"}),t(Et),t(ue),J($r=>{pt(ue,"href",`/containers/${e(x).id}`),O(mt,e(x).name),O(ft,`ID: ${$r??""}`)},[()=>e(x).id.substring(0,12)]),a(re,ue)},pr=re=>{var ue=ga(),pe=r(ue),_e=r(pe),ut=r(_e);we(ut,{class:"text-muted-foreground size-4"}),t(_e);var Ue=s(_e,2),Se=r(Ue),mt=r(Se,!0);t(Se),w(2),t(Ue),t(pe);var Je=s(pe,2);const ft=h(()=>gt(e(H)));_t(Je,{get variant(){return e(Re)},get text(){return e(ft)}}),t(ue),J(()=>O(mt,e(x).name)),a(re,ue)};K(Be,re=>{e(x).id?re(fr):re(pr,!1)})}a(E,N)}),t(v),a(g,v)},P=g=>{var v=xa(),E=r(v),x=r(E);we(x,{class:"size-6 text-muted-foreground"}),t(E),w(2),t(v),a(g,v)};K(n,g=>{e(A).services&&e(A).services.length>0?g(p):g(P,!1)})}a(y,k)},$$slots:{default:!0}})}),a(i,c)},$$slots:{default:!0}})}),t(Ee);var Oe=s(Ee,2),ke=r(Oe),Fe=r(ke),sr=r(Fe);Ut(sr,{class:"size-5"}),w(),t(Fe);var or=s(Fe,2);{var nr=o=>{const l=h(()=>!e(Ze));Br(o,{action:"save",get loading(){return z.saving},onClick:qt,get disabled(){return e(l)},label:"Save Changes",loadingLabel:"Saving...",class:"bg-green-600 hover:bg-green-700 text-white"})};K(or,o=>{e(Ze)&&o(nr)})}t(ke);var Pt=s(ke,2);d(Pt,()=>ae,(o,l)=>{l(o,{class:"border mb-6",children:(i,D)=>{var c=ya(),$=u(c);d($,()=>Me,(C,y)=>{y(C,{class:"pb-4",children:(S,k)=>{var n=R(),p=u(n);d(p,()=>We,(P,g)=>{g(P,{children:(v,E)=>{w();var x=B("Stack Settings");a(v,x)},$$slots:{default:!0}})}),a(S,n)},$$slots:{default:!0}})});var j=s($,2);d(j,()=>se,(C,y)=>{y(C,{children:(S,k)=>{var n=ba(),p=r(n);Tt(p,{for:"name",class:"mb-2 block",children:(x,N)=>{w();var H=B("Stack Name");a(x,H)},$$slots:{default:!0}});var P=s(p,2);const g=h(()=>{var x,N;return z.saving||((x=e(A))==null?void 0:x.status)==="running"||((N=e(A))==null?void 0:N.status)==="partially running"});Dr(P,{type:"text",id:"name",name:"name",required:!0,get disabled(){return e(g)},get value(){return e(Ce)},set value(x){I(Ce,x,!0)}});var v=s(P,2);{var E=x=>{var N=ha();a(x,N)};K(v,x=>{var N,H;(((N=e(A))==null?void 0:N.status)==="running"||((H=e(A))==null?void 0:H.status)==="partially running")&&x(E)})}t(n),a(S,n)},$$slots:{default:!0}})}),a(i,c)},$$slots:{default:!0}})});var wt=s(Pt,2),it=r(wt),lr=r(it);d(lr,()=>ae,(o,l)=>{l(o,{class:"border h-full",children:(i,D)=>{var c=Sa(),$=u(c);d($,()=>Me,(C,y)=>{y(C,{class:"pb-4 flex-shrink-0",children:(S,k)=>{var n=R(),p=u(n);d(p,()=>We,(P,g)=>{g(P,{children:(v,E)=>{w();var x=B("Docker Compose File");a(v,x)},$$slots:{default:!0}})}),a(S,n)},$$slots:{default:!0}})});var j=s($,2);d(j,()=>se,(C,y)=>{y(C,{class:"p-4 flex flex-col h-full",children:(S,k)=>{var n=ka(),p=u(n),P=r(p);const g=h(()=>z.saving||z.deploying||z.stopping||z.restarting||z.removing);Nr(P,{get readOnly(){return e(g)},get value(){return e(Ae)},set value(v){I(Ae,v,!0)}}),t(p),w(2),a(S,n)},$$slots:{default:!0}})}),a(i,c)},$$slots:{default:!0}})}),t(it);var Ct=s(it,2),ir=r(Ct);d(ir,()=>ae,(o,l)=>{l(o,{class:"border h-full",children:(i,D)=>{var c=wa(),$=u(c);d($,()=>Me,(C,y)=>{y(C,{class:"pb-4 flex-shrink-0",children:(S,k)=>{var n=R(),p=u(n);d(p,()=>We,(P,g)=>{g(P,{children:(v,E)=>{w();var x=B("Environment (.env)");a(v,x)},$$slots:{default:!0}})}),a(S,n)},$$slots:{default:!0}})});var j=s($,2);d(j,()=>se,(C,y)=>{y(C,{class:"p-4 flex flex-col h-full",children:(S,k)=>{var n=Pa(),p=u(n),P=r(p);const g=h(()=>z.saving||z.deploying||z.stopping||z.restarting||z.removing);Tr(P,{get readOnly(){return e(g)},get value(){return e(ze)},set value(v){I(ze,v,!0)}}),t(p),w(2),a(S,n)},$$slots:{default:!0}})}),a(i,c)},$$slots:{default:!0}})}),t(Ct),t(wt),t(Oe);var At=s(Oe,2),dt=r(At),vt=r(dt),dr=r(vt);Vt(dr,{class:"size-5"}),w(),t(vt);var zt=s(vt,2),ct=r(zt),Lt=r(ct);Pr(Lt),w(),t(ct);var Dt=s(ct,2);oe(Dt,{variant:"outline",size:"sm",onclick:()=>{var o;return(o=e(me))==null?void 0:o.clearLogs()},children:(o,l)=>{w();var i=B("Clear");a(o,i)},$$slots:{default:!0}});var jt=s(Dt,2);{var vr=o=>{var l=Ca(),i=s(u(l),2);oe(i,{variant:"outline",size:"sm",onclick:()=>{var D;return(D=e(me))==null?void 0:D.stopLogStream()},children:(D,c)=>{w();var $=B("Stop");a(D,$)},$$slots:{default:!0}}),a(o,l)},cr=o=>{const l=h(()=>{var i;return!((i=e(A))!=null&&i.id)});oe(o,{variant:"outline",size:"sm",onclick:()=>{var i;return(i=e(me))==null?void 0:i.startLogStream()},get disabled(){return e(l)},children:(i,D)=>{w();var c=B("Start");a(i,c)},$$slots:{default:!0}})};K(jt,o=>{e(et)?o(vr):o(cr,!1)})}var ur=s(jt,2);oe(ur,{variant:"outline",size:"sm",onclick:()=>{var o,l;(o=e(me))==null||o.stopLogStream(),(l=e(me))==null||l.startLogStream()},children:(o,l)=>{ea(o,{class:"size-4"})},$$slots:{default:!0}}),t(zt),t(dt);var mr=s(dt,2);d(mr,()=>ae,(o,l)=>{l(o,{class:"border",children:(i,D)=>{var c=R(),$=u(c);d($,()=>se,(j,C)=>{C(j,{class:"p-0",children:(y,S)=>{const k=h(()=>{var n;return(n=e(A))==null?void 0:n.id});Cr(Er(y,{get stackId(){return e(k)},type:"stack",maxLines:500,showTimestamps:!0,height:"600px",onStart:Mt,onStop:Wt,onClear:Gt,onToggleAutoScroll:Qt,get autoScroll(){return e(Ve)},set autoScroll(n){I(Ve,n,!0)}}),n=>I(me,n,!0),()=>e(me))},$$slots:{default:!0}})}),a(i,c)},$$slots:{default:!0}})}),t(At),t(U),t(W),t(ce),t(M),J(()=>{pt(ie,"title",e(A).name),O(Ye,e(A).name),O(Ne,` Services (${e(A).serviceCount??""})`)}),wr(Lt,()=>e(Ve),o=>I(Ve,o)),a(b,m)},rr=(b,m)=>{{var _=F=>{var L=La(),Z=r(L),le=r(Z),he=r(le);Ge(he,{class:"text-muted-foreground size-10"}),t(le);var ie=s(le,6);oe(ie,{variant:"outline",href:"/compose",children:(Ye,De)=>{var fe=za(),de=u(fe);Bt(de,{class:"mr-2 size-4"}),w(),a(Ye,fe)},$$slots:{default:!0}}),t(Z),t(L),a(F,L)};K(b,F=>{T.data.error||F(_)},m)}};K(er,b=>{e(A)?b(tr):b(rr,!1)})}t(rt);var ar=s(rt,2);d(ar,()=>Hr,(b,m)=>{m(b,{get open(){return e(Le)},set open(_){I(Le,_,!0)},children:(_,F)=>{var L=R(),Z=u(L);d(Z,()=>Ur,(le,he)=>{he(le,{children:(ie,Ye)=>{var De=Ta(),fe=u(De);d(fe,()=>Vr,(ee,ve)=>{ve(ee,{children:(M,be)=>{var Q=Da(),X=u(Q);d(X,()=>Yr,(W,U)=>{U(W,{children:(Y,G)=>{w();var V=B("Deploy Stack to Agent");a(Y,V)},$$slots:{default:!0}})});var ce=s(X,2);d(ce,()=>Gr,(W,U)=>{U(W,{children:(Y,G)=>{w();var V=B();J(()=>{var te;return O(V,`Deploy "${((te=T.data.stack)==null?void 0:te.name)||"Unknown Stack"}" to a remote agent`)}),a(Y,V)},$$slots:{default:!0}})}),a(M,Q)},$$slots:{default:!0}})});var de=s(fe,2),je=r(de),qe=r(je);Tt(qe,{for:"agent-select",children:(ee,ve)=>{w();var M=B("Select Agent");a(ee,M)},$$slots:{default:!0}});var at=s(qe,2);d(at,()=>Jr,(ee,ve)=>{ve(ee,{type:"single",get disabled(){return e(xe)},get value(){return e(ne)},set value(M){I(ne,M,!0)},children:(M,be)=>{var Q=Ea(),X=u(Q);d(X,()=>Kr,(W,U)=>{U(W,{children:(Y,G)=>{w();var V=B();J(()=>O(V,e(ne))),a(Y,V)},$$slots:{default:!0}})});var ce=s(X,2);d(ce,()=>Mr,(W,U)=>{U(W,{children:(Y,G)=>{var V=R(),te=u(V);Ke(te,17,()=>e(tt),Nt,(ye,q)=>{var He=R(),ot=u(He);d(ot,()=>Wr,(nt,Ee)=>{Ee(nt,{get value(){return e(q).id},children:(Ie,lt)=>{var Ne=ja(),Te=s(r(Ne),2),Oe=r(Te,!0);t(Te);var ke=s(Te,2),Fe=r(ke);t(ke),t(Ne),J(()=>{O(Oe,e(q).hostname),O(Fe,`(${e(q).platform??""})`)}),a(Ie,Ne)},$$slots:{default:!0}})}),a(ye,He)}),a(Y,V)},$$slots:{default:!0}})}),a(M,Q)},$$slots:{default:!0}})}),w(2),t(je),t(de);var st=s(de,2);d(st,()=>qr,(ee,ve)=>{ve(ee,{children:(M,be)=>{var Q=Na(),X=u(Q);oe(X,{variant:"outline",onclick:()=>I(Le,!1),get disabled(){return e(xe)},children:(U,Y)=>{w();var G=B("Cancel");a(U,G)},$$slots:{default:!0}});var ce=s(X,2);const W=h(()=>!e(ne)||e(xe));oe(ce,{onclick:Ht,get disabled(){return e(W)},children:(U,Y)=>{var G=Ia(),V=u(G);{var te=q=>{Qr(q,{class:"size-4 mr-2 animate-spin"})},ye=q=>{Rt(q,{class:"size-4 mr-2"})};K(V,q=>{e(xe)?q(te):q(ye,!1)})}w(),a(U,G)},$$slots:{default:!0}}),a(M,Q)},$$slots:{default:!0}})}),a(ie,De)},$$slots:{default:!0}})}),a(_,L)},$$slots:{default:!0}})}),a($t,St),kr()}xr(["click"]);export{Ss as component};
