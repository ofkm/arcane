{"version":3,"file":"_page.svelte-BD7BfXeO.js","sources":["../../../.svelte-kit/adapter-node/entries/pages/agents/_page.svelte.js"],"sourcesContent":["import { b as attr, k as escape_html, l as ensure_array_like, d as attr_class, n as stringify, a as pop, p as push } from \"../../../chunks/index3.js\";\nimport { g as goto, i as invalidateAll } from \"../../../chunks/client.js\";\nimport { formatDistanceToNow } from \"date-fns\";\nimport { a as toast } from \"../../../chunks/Toaster.svelte_svelte_type_style_lang.js\";\nimport { g as getActualAgentStatus } from \"../../../chunks/agent-status.utils.js\";\nimport { o as openConfirmDialog } from \"../../../chunks/index8.js\";\nimport { h as handleApiResultWithCallbacks } from \"../../../chunks/api.util.js\";\nimport { t as tryCatch } from \"../../../chunks/try-catch.js\";\nimport \"../../../chunks/button.js\";\nimport { A as Arcane_button } from \"../../../chunks/arcane-button.js\";\nimport { R as Refresh_cw } from \"../../../chunks/refresh-cw.js\";\nimport { M as Monitor } from \"../../../chunks/monitor.js\";\nimport { C as Container } from \"../../../chunks/container.js\";\nimport { H as Hard_drive } from \"../../../chunks/hard-drive.js\";\nimport { C as Circle_check_big } from \"../../../chunks/circle-check-big.js\";\nfunction _page($$payload, $$props) {\n  push();\n  let { data } = $$props;\n  let agents = data.agents || [];\n  let loading = false;\n  async function deleteAgent(agentId, hostname) {\n    openConfirmDialog({\n      title: `Confirm Removal`,\n      message: `Are you sure you want to remove this Agent? This action cannot be undone.`,\n      confirm: {\n        label: \"Remove\",\n        destructive: true,\n        action: async () => {\n          handleApiResultWithCallbacks({\n            result: await tryCatch(fetch(`/api/agents/${agentId}`, { method: \"DELETE\", credentials: \"include\" })),\n            message: \"Failed to Remove Agent\",\n            onSuccess: async () => {\n              toast.success(\"Agent Removed Successfully\");\n              await invalidateAll();\n            }\n          });\n        }\n      }\n    });\n  }\n  function getStatusColor(agent) {\n    const actualStatus = getActualAgentStatus(agent);\n    if (actualStatus === \"online\") return \"bg-green-500\";\n    return \"bg-red-500\";\n  }\n  function getStatusText(agent) {\n    const actualStatus = getActualAgentStatus(agent);\n    if (actualStatus === \"online\") return \"Online\";\n    return \"Offline\";\n  }\n  function viewAgentDetails(agentId) {\n    goto();\n  }\n  $$payload.out += `<div class=\"container mx-auto px-6 py-8\"><div class=\"flex justify-between items-center mb-8\"><div><h1 class=\"text-3xl font-bold text-gray-900 dark:text-white\">Agent Management</h1> <p class=\"text-gray-600 dark:text-gray-400 mt-1\">Manage and monitor your remote agents</p></div> <button class=\"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"${attr(\"disabled\", loading, true)}>`;\n  {\n    $$payload.out += \"<!--[!-->\";\n    Refresh_cw($$payload, { class: \"h-4 w-4\" });\n  }\n  $$payload.out += `<!--]--> ${escape_html(\"Refresh\")}</button></div> `;\n  {\n    $$payload.out += \"<!--[!-->\";\n  }\n  $$payload.out += `<!--]--> `;\n  if (agents.length === 0) {\n    $$payload.out += \"<!--[-->\";\n    $$payload.out += `<div class=\"text-center py-16\">`;\n    Monitor($$payload, { class: \"h-16 w-16 text-gray-400 mx-auto mb-4\" });\n    $$payload.out += `<!----> <h3 class=\"text-lg font-medium text-gray-900 dark:text-white mb-2\">No agents registered</h3> <p class=\"text-gray-600 dark:text-gray-400 mb-4\">Get started by connecting your first agent</p> <div class=\"bg-gray-50 dark:bg-gray-800 rounded-lg p-4 max-w-md mx-auto\"><p class=\"text-sm text-gray-600 dark:text-gray-400\">Make sure your Go agent is running and connecting to:</p> <code class=\"text-sm font-mono bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200 px-2 py-1 rounded mt-2 inline-block\">http://localhost:3000/agent/register</code></div></div>`;\n  } else {\n    $$payload.out += \"<!--[!-->\";\n    const each_array = ensure_array_like(agents);\n    $$payload.out += `<div class=\"grid gap-6 md:grid-cols-2 lg:grid-cols-3\"><!--[-->`;\n    for (let $$index_1 = 0, $$length = each_array.length; $$index_1 < $$length; $$index_1++) {\n      let agent = each_array[$$index_1];\n      const each_array_1 = ensure_array_like(agent.capabilities);\n      $$payload.out += `<div class=\"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6 hover:shadow-lg transition-shadow\"><div class=\"flex items-start justify-between mb-4\"><div class=\"flex items-center gap-3\"><div class=\"relative\"><div class=\"w-12 h-12 bg-gray-100 dark:bg-gray-700 rounded-lg flex items-center justify-center\">`;\n      Monitor($$payload, {\n        class: \"h-6 w-6 text-gray-600 dark:text-gray-400\"\n      });\n      $$payload.out += `<!----></div> <div${attr_class(`absolute -top-1 -right-1 w-4 h-4 ${stringify(getStatusColor(agent))} rounded-full border-2 border-white dark:border-gray-800`)}></div></div> <div><h3 class=\"font-semibold text-gray-900 dark:text-white\">${escape_html(agent.hostname)}</h3> <p class=\"text-xs text-gray-500 dark:text-gray-400 font-mono\">${escape_html(agent.id)}</p></div></div> <span${attr_class(`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${stringify(getActualAgentStatus(agent) === \"online\" ? \"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400\" : \"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400\")}`)}>${escape_html(getStatusText(agent))}</span></div> <div class=\"space-y-3\"><div class=\"grid grid-cols-2 gap-4 text-sm\"><div><span class=\"text-gray-500 dark:text-gray-400\">Platform</span> <p class=\"font-medium text-gray-900 dark:text-white capitalize\">${escape_html(agent.platform)}</p></div> <div><span class=\"text-gray-500 dark:text-gray-400\">Version</span> <p class=\"font-medium text-gray-900 dark:text-white\">${escape_html(agent.version)}</p></div></div> `;\n      if (agent.metrics) {\n        $$payload.out += \"<!--[-->\";\n        $$payload.out += `<div class=\"grid grid-cols-2 gap-2 py-3 border-t border-gray-100 dark:border-gray-700\"><div class=\"text-center\"><div class=\"flex items-center justify-center gap-1 mb-1\">`;\n        Container($$payload, {\n          class: \"h-3 w-3 text-blue-600 dark:text-blue-400\"\n        });\n        $$payload.out += `<!----> <span class=\"text-xs text-gray-500 dark:text-gray-400\">Containers</span></div> <p class=\"text-sm font-semibold text-gray-900 dark:text-white\">${escape_html(agent.metrics.containerCount ?? 0)}</p></div> <div class=\"text-center\"><div class=\"flex items-center justify-center gap-1 mb-1\">`;\n        Hard_drive($$payload, {\n          class: \"h-3 w-3 text-green-600 dark:text-green-400\"\n        });\n        $$payload.out += `<!----> <span class=\"text-xs text-gray-500 dark:text-gray-400\">Images</span></div> <p class=\"text-sm font-semibold text-gray-900 dark:text-white\">${escape_html(agent.metrics.imageCount ?? 0)}</p></div></div>`;\n      } else {\n        $$payload.out += \"<!--[!-->\";\n        $$payload.out += `<div class=\"py-3 border-t border-gray-100 dark:border-gray-700\"><p class=\"text-xs text-gray-400 text-center\">No metrics data available</p></div>`;\n      }\n      $$payload.out += `<!--]--> <div><span class=\"text-gray-500 dark:text-gray-400 text-sm\">Capabilities</span> <div class=\"flex flex-wrap gap-1 mt-1\">`;\n      if (each_array_1.length !== 0) {\n        $$payload.out += \"<!--[-->\";\n        for (let $$index = 0, $$length2 = each_array_1.length; $$index < $$length2; $$index++) {\n          let capability = each_array_1[$$index];\n          $$payload.out += `<span class=\"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400\">${escape_html(capability)}</span>`;\n        }\n      } else {\n        $$payload.out += \"<!--[!-->\";\n        $$payload.out += `<span class=\"text-gray-400 dark:text-gray-500 text-sm\">None</span>`;\n      }\n      $$payload.out += `<!--]--></div></div> <div class=\"pt-3 border-t border-gray-100 dark:border-gray-700\"><p class=\"text-xs text-gray-500 dark:text-gray-400\">Last seen: ${escape_html(formatDistanceToNow(new Date(agent.lastSeen)))} ago</p></div></div> `;\n      if (getActualAgentStatus(agent) === \"online\") {\n        $$payload.out += \"<!--[-->\";\n        $$payload.out += `<div class=\"mt-4 p-3 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-800\"><div class=\"flex items-center gap-2\">`;\n        Circle_check_big($$payload, {\n          class: \"h-4 w-4 text-green-600 dark:text-green-400\"\n        });\n        $$payload.out += `<!----> <p class=\"text-sm font-medium text-green-700 dark:text-green-400\">Ready to receive commands</p></div></div>`;\n      } else {\n        $$payload.out += \"<!--[!-->\";\n      }\n      $$payload.out += `<!--]--> <div class=\"mt-4 flex gap-2\">`;\n      Arcane_button($$payload, {\n        action: \"inspect\",\n        onClick: () => viewAgentDetails(agent.id),\n        label: \"View Details\",\n        class: \"flex-1\"\n      });\n      $$payload.out += `<!----> `;\n      if (getActualAgentStatus(agent) === \"online\") {\n        $$payload.out += \"<!--[-->\";\n        Arcane_button($$payload, {\n          action: \"edit\",\n          onClick: () => viewAgentDetails(agent.id),\n          label: \"Manage\",\n          class: \"flex-1\"\n        });\n      } else {\n        $$payload.out += \"<!--[!-->\";\n      }\n      $$payload.out += `<!--]--> `;\n      Arcane_button($$payload, {\n        action: \"remove\",\n        onClick: () => deleteAgent(agent.id, agent.hostname),\n        label: \"Delete\",\n        loadingLabel: \"Deleting...\",\n        class: \"flex-1\"\n      });\n      $$payload.out += `<!----></div></div>`;\n    }\n    $$payload.out += `<!--]--></div>`;\n  }\n  $$payload.out += `<!--]--> `;\n  {\n    $$payload.out += \"<!--[!-->\";\n  }\n  $$payload.out += `<!--]--></div>`;\n  pop();\n}\nexport {\n  _page as default\n};\n"],"names":[],"mappings":"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"}