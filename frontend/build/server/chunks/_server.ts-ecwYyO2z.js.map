{"version":3,"file":"_server.ts-ecwYyO2z.js","sources":["../../../.svelte-kit/adapter-node/entries/endpoints/api/system/auto-update/_server.ts.js"],"sourcesContent":["import { j as json } from \"../../../../../chunks/index.js\";\nimport { g as getSettings } from \"../../../../../chunks/settings-service.js\";\nimport { c as checkAndUpdateContainers, a as checkAndUpdateStacks } from \"../../../../../chunks/auto-update-service.js\";\nimport { A as ApiErrorCode } from \"../../../../../chunks/errors.type.js\";\nimport { t as tryCatch } from \"../../../../../chunks/try-catch.js\";\nconst GET = async () => {\n  const settingsResult = await tryCatch(getSettings());\n  if (settingsResult.error) {\n    console.error(\"Error getting auto-update status:\", settingsResult.error);\n    const response = {\n      success: false,\n      error: settingsResult.error.message || \"Failed to get auto-update status\",\n      code: ApiErrorCode.INTERNAL_SERVER_ERROR,\n      details: settingsResult.error\n    };\n    return json(response, { status: 500 });\n  }\n  const settings = settingsResult.data;\n  return json({\n    success: true,\n    enabled: settings.autoUpdate,\n    interval: settings.autoUpdateInterval || 60,\n    message: settings.autoUpdate ? `Auto-update is enabled and checks every ${settings.autoUpdateInterval || 60} minutes` : \"Auto-update is disabled\"\n  });\n};\nconst POST = async () => {\n  const containerResult = await tryCatch(checkAndUpdateContainers());\n  const stackResult = await tryCatch(checkAndUpdateStacks());\n  if (containerResult.error || stackResult.error) {\n    console.error(\"Error running manual update check:\", containerResult.error || stackResult.error);\n    const response = {\n      success: false,\n      error: containerResult.error?.message || stackResult.error?.message || \"Failed to run update check\",\n      code: ApiErrorCode.INTERNAL_SERVER_ERROR,\n      details: containerResult.error || stackResult.error\n    };\n    return json(response, { status: 500 });\n  }\n  return json({\n    success: true,\n    containers: containerResult.data,\n    stacks: stackResult.data\n  });\n};\nexport {\n  GET,\n  POST\n};\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAKK,MAAC,GAAG,GAAG,YAAY;AACxB,EAAE,MAAM,cAAc,GAAG,MAAM,QAAQ,CAAC,WAAW,EAAE,CAAC;AACtD,EAAE,IAAI,cAAc,CAAC,KAAK,EAAE;AAC5B,IAAI,OAAO,CAAC,KAAK,CAAC,mCAAmC,EAAE,cAAc,CAAC,KAAK,CAAC;AAC5E,IAAI,MAAM,QAAQ,GAAG;AACrB,MAAM,OAAO,EAAE,KAAK;AACpB,MAAM,KAAK,EAAE,cAAc,CAAC,KAAK,CAAC,OAAO,IAAI,kCAAkC;AAC/E,MAAM,IAAI,EAAE,YAAY,CAAC,qBAAqB;AAC9C,MAAM,OAAO,EAAE,cAAc,CAAC;AAC9B,KAAK;AACL,IAAI,OAAO,IAAI,CAAC,QAAQ,EAAE,EAAE,MAAM,EAAE,GAAG,EAAE,CAAC;AAC1C;AACA,EAAE,MAAM,QAAQ,GAAG,cAAc,CAAC,IAAI;AACtC,EAAE,OAAO,IAAI,CAAC;AACd,IAAI,OAAO,EAAE,IAAI;AACjB,IAAI,OAAO,EAAE,QAAQ,CAAC,UAAU;AAChC,IAAI,QAAQ,EAAE,QAAQ,CAAC,kBAAkB,IAAI,EAAE;AAC/C,IAAI,OAAO,EAAE,QAAQ,CAAC,UAAU,GAAG,CAAC,wCAAwC,EAAE,QAAQ,CAAC,kBAAkB,IAAI,EAAE,CAAC,QAAQ,CAAC,GAAG;AAC5H,GAAG,CAAC;AACJ;AACK,MAAC,IAAI,GAAG,YAAY;AACzB,EAAE,MAAM,eAAe,GAAG,MAAM,QAAQ,CAAC,wBAAwB,EAAE,CAAC;AACpE,EAAE,MAAM,WAAW,GAAG,MAAM,QAAQ,CAAC,oBAAoB,EAAE,CAAC;AAC5D,EAAE,IAAI,eAAe,CAAC,KAAK,IAAI,WAAW,CAAC,KAAK,EAAE;AAClD,IAAI,OAAO,CAAC,KAAK,CAAC,oCAAoC,EAAE,eAAe,CAAC,KAAK,IAAI,WAAW,CAAC,KAAK,CAAC;AACnG,IAAI,MAAM,QAAQ,GAAG;AACrB,MAAM,OAAO,EAAE,KAAK;AACpB,MAAM,KAAK,EAAE,eAAe,CAAC,KAAK,EAAE,OAAO,IAAI,WAAW,CAAC,KAAK,EAAE,OAAO,IAAI,4BAA4B;AACzG,MAAM,IAAI,EAAE,YAAY,CAAC,qBAAqB;AAC9C,MAAM,OAAO,EAAE,eAAe,CAAC,KAAK,IAAI,WAAW,CAAC;AACpD,KAAK;AACL,IAAI,OAAO,IAAI,CAAC,QAAQ,EAAE,EAAE,MAAM,EAAE,GAAG,EAAE,CAAC;AAC1C;AACA,EAAE,OAAO,IAAI,CAAC;AACd,IAAI,OAAO,EAAE,IAAI;AACjB,IAAI,UAAU,EAAE,eAAe,CAAC,IAAI;AACpC,IAAI,MAAM,EAAE,WAAW,CAAC;AACxB,GAAG,CAAC;AACJ;;;;"}