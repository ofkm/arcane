{"version":3,"file":"scheduler-service-BkX7_vyx.js","sources":["../../../.svelte-kit/adapter-node/chunks/scheduler-service.js"],"sourcesContent":["import { g as getSettings } from \"./settings-service.js\";\nimport { c as checkAndUpdateContainers, a as checkAndUpdateStacks } from \"./auto-update-service.js\";\nlet autoUpdateTimer = null;\nasync function initAutoUpdateScheduler() {\n  const settings = await getSettings();\n  if (autoUpdateTimer) {\n    clearInterval(autoUpdateTimer);\n    autoUpdateTimer = null;\n  }\n  if (!settings.autoUpdate) {\n    console.log(\"Auto-update is disabled in settings\");\n    return;\n  }\n  const intervalMinutes = settings.autoUpdateInterval || 60;\n  const intervalMs = intervalMinutes * 60 * 1e3;\n  console.log(`Starting auto-update scheduler with interval of ${intervalMinutes} minutes`);\n  await runAutoUpdateChecks();\n  autoUpdateTimer = setInterval(runAutoUpdateChecks, intervalMs);\n}\nasync function runAutoUpdateChecks() {\n  console.log(\"Running scheduled auto-update checks...\");\n  try {\n    const containerResults = await checkAndUpdateContainers();\n    console.log(`Auto-update check completed for containers: Checked ${containerResults.checked}, Updated ${containerResults.updated}, Errors ${containerResults.errors.length}`);\n    const stackResults = await checkAndUpdateStacks();\n    console.log(`Auto-update check completed for stacks: Checked ${stackResults.checked}, Updated ${stackResults.updated}, Errors ${stackResults.errors.length}`);\n  } catch (error) {\n    console.error(\"Error during auto-update check:\", error);\n  }\n}\nasync function stopAutoUpdateScheduler() {\n  if (autoUpdateTimer) {\n    clearInterval(autoUpdateTimer);\n    autoUpdateTimer = null;\n    console.log(\"Auto-update scheduler stopped\");\n  }\n}\nexport {\n  initAutoUpdateScheduler,\n  stopAutoUpdateScheduler\n};\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA,IAAI,eAAe,GAAG,IAAI;AAC1B,eAAe,uBAAuB,GAAG;AACzC,EAAE,MAAM,QAAQ,GAAG,MAAM,WAAW,EAAE;AACtC,EAAE,IAAI,eAAe,EAAE;AACvB,IAAI,aAAa,CAAC,eAAe,CAAC;AAClC,IAAI,eAAe,GAAG,IAAI;AAC1B;AACA,EAAE,IAAI,CAAC,QAAQ,CAAC,UAAU,EAAE;AAC5B,IAAI,OAAO,CAAC,GAAG,CAAC,qCAAqC,CAAC;AACtD,IAAI;AACJ;AACA,EAAE,MAAM,eAAe,GAAG,QAAQ,CAAC,kBAAkB,IAAI,EAAE;AAC3D,EAAE,MAAM,UAAU,GAAG,eAAe,GAAG,EAAE,GAAG,GAAG;AAC/C,EAAE,OAAO,CAAC,GAAG,CAAC,CAAC,gDAAgD,EAAE,eAAe,CAAC,QAAQ,CAAC,CAAC;AAC3F,EAAE,MAAM,mBAAmB,EAAE;AAC7B,EAAE,eAAe,GAAG,WAAW,CAAC,mBAAmB,EAAE,UAAU,CAAC;AAChE;AACA,eAAe,mBAAmB,GAAG;AACrC,EAAE,OAAO,CAAC,GAAG,CAAC,yCAAyC,CAAC;AACxD,EAAE,IAAI;AACN,IAAI,MAAM,gBAAgB,GAAG,MAAM,wBAAwB,EAAE;AAC7D,IAAI,OAAO,CAAC,GAAG,CAAC,CAAC,oDAAoD,EAAE,gBAAgB,CAAC,OAAO,CAAC,UAAU,EAAE,gBAAgB,CAAC,OAAO,CAAC,SAAS,EAAE,gBAAgB,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC;AACjL,IAAI,MAAM,YAAY,GAAG,MAAM,oBAAoB,EAAE;AACrD,IAAI,OAAO,CAAC,GAAG,CAAC,CAAC,gDAAgD,EAAE,YAAY,CAAC,OAAO,CAAC,UAAU,EAAE,YAAY,CAAC,OAAO,CAAC,SAAS,EAAE,YAAY,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC;AACjK,GAAG,CAAC,OAAO,KAAK,EAAE;AAClB,IAAI,OAAO,CAAC,KAAK,CAAC,iCAAiC,EAAE,KAAK,CAAC;AAC3D;AACA;AACA,eAAe,uBAAuB,GAAG;AACzC,EAAE,IAAI,eAAe,EAAE;AACvB,IAAI,aAAa,CAAC,eAAe,CAAC;AAClC,IAAI,eAAe,GAAG,IAAI;AAC1B,IAAI,OAAO,CAAC,GAAG,CAAC,+BAA+B,CAAC;AAChD;AACA;;;;"}