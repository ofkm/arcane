{"version":3,"file":"settings-store-Cucc9Cev.js","sources":["../../../.svelte-kit/adapter-node/chunks/settings-store.js"],"sourcesContent":["import { w as writable, g as get } from \"./index2.js\";\nfunction deepClone(obj) {\n  if (obj === null || typeof obj !== \"object\") {\n    return obj;\n  }\n  if (obj instanceof Date) {\n    return new Date(obj.getTime());\n  }\n  if (Array.isArray(obj)) {\n    return obj.map((item) => deepClone(item));\n  }\n  const clonedObj = {};\n  for (const key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n      clonedObj[key] = deepClone(obj[key]);\n    }\n  }\n  return clonedObj;\n}\nconst settingsStore = writable({\n  dockerHost: \"\",\n  stacksDirectory: \"\",\n  autoUpdate: false,\n  autoUpdateInterval: 60,\n  pollingEnabled: false,\n  pollingInterval: 10,\n  pruneMode: \"all\",\n  registryCredentials: [],\n  templateRegistries: [],\n  auth: {\n    localAuthEnabled: true,\n    oidcEnabled: false,\n    sessionTimeout: 30,\n    passwordPolicy: \"strong\",\n    rbacEnabled: false\n  },\n  maturityThresholdDays: 30\n});\nfunction updateSettingsStore(serverData) {\n  const dataToUpdate = deepClone(serverData);\n  settingsStore.update((current) => {\n    return {\n      ...current,\n      ...dataToUpdate,\n      auth: {\n        ...current.auth || {},\n        ...dataToUpdate.auth || {}\n      }\n    };\n  });\n}\nfunction getSettings() {\n  return get(settingsStore);\n}\nasync function saveSettingsToServer() {\n  try {\n    const settings = getSettings();\n    const response = await fetch(\"/api/settings\", {\n      method: \"PUT\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(settings)\n    });\n    if (!response.ok) {\n      const data = await response.json();\n      throw new Error(data.error || `HTTP error! status: ${response.status}`);\n    }\n    return true;\n  } catch (error) {\n    console.error(\"Failed to save settings:\", error);\n    throw error;\n  }\n}\nexport {\n  saveSettingsToServer as a,\n  settingsStore as s,\n  updateSettingsStore as u\n};\n"],"names":[],"mappings":"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"}