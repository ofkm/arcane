{"version":3,"file":"table-store-C93SAwyA.js","sources":["../../../.svelte-kit/adapter-node/chunks/table-store.js"],"sourcesContent":["import { q as defaultWindow } from \"./create-id.js\";\nimport \"clsx\";\nimport { c as createSubscriber } from \"./index-server.js\";\nfunction getStorage(storageType, window) {\n  switch (storageType) {\n    case \"local\":\n      return window.localStorage;\n    case \"session\":\n      return window.sessionStorage;\n  }\n}\nclass PersistedState {\n  #current;\n  #key;\n  #serializer;\n  #storage;\n  #subscribe;\n  #version = 0;\n  constructor(key, initialValue, options = {}) {\n    const {\n      storage: storageType = \"local\",\n      serializer = {\n        serialize: JSON.stringify,\n        deserialize: JSON.parse\n      },\n      syncTabs = true\n    } = options;\n    const window = \"window\" in options ? options.window : defaultWindow;\n    this.#current = initialValue;\n    this.#key = key;\n    this.#serializer = serializer;\n    if (window === void 0) return;\n    const storage = getStorage(storageType, window);\n    this.#storage = storage;\n    const existingValue = storage.getItem(key);\n    if (existingValue !== null) {\n      this.#current = this.#deserialize(existingValue);\n    } else {\n      this.#serialize(initialValue);\n    }\n    if (syncTabs && storageType === \"local\") {\n      this.#subscribe = createSubscriber();\n    }\n  }\n  get current() {\n    this.#subscribe?.();\n    this.#version;\n    const storageItem = this.#storage?.getItem(this.#key);\n    const root = storageItem ? this.#deserialize(storageItem) : this.#current;\n    const proxies = /* @__PURE__ */ new WeakMap();\n    const proxy = (value) => {\n      if (value === null || value?.constructor.name === \"Date\" || typeof value !== \"object\") {\n        return value;\n      }\n      let p = proxies.get(value);\n      if (!p) {\n        p = new Proxy(value, {\n          get: (target, property) => {\n            this.#version;\n            return proxy(Reflect.get(target, property));\n          },\n          set: (target, property, value2) => {\n            this.#version += 1;\n            Reflect.set(target, property, value2);\n            this.#serialize(root);\n            return true;\n          }\n        });\n        proxies.set(value, p);\n      }\n      return p;\n    };\n    return proxy(root);\n  }\n  set current(newValue) {\n    this.#serialize(newValue);\n    this.#version += 1;\n  }\n  #handleStorageEvent = (event) => {\n    if (event.key !== this.#key || event.newValue === null) return;\n    this.#current = this.#deserialize(event.newValue);\n    this.#version += 1;\n  };\n  #deserialize(value) {\n    try {\n      return this.#serializer.deserialize(value);\n    } catch (error) {\n      console.error(`Error when parsing \"${value}\" from persisted store \"${this.#key}\"`, error);\n      return;\n    }\n  }\n  #serialize(value) {\n    try {\n      if (value != void 0) {\n        this.#storage?.setItem(this.#key, this.#serializer.serialize(value));\n      }\n    } catch (error) {\n      console.error(`Error when writing value from persisted store \"${this.#key}\" to ${this.#storage}`, error);\n    }\n  }\n}\nconst DEFAULT_PAGE_SIZES = {\n  default: 10,\n  containers: 10,\n  images: 10,\n  volumes: 10,\n  networks: 10,\n  stacks: 10\n};\nconst tablePageSizes = new PersistedState(\"arcane-table-page-sizes\", DEFAULT_PAGE_SIZES, {\n  storage: \"local\",\n  syncTabs: true\n});\nconst tablePersistence = {\n  // Get a page size value for a specific table\n  getPageSize: (tableKey) => {\n    return tablePageSizes.current[tableKey] || 10;\n  },\n  // Set a page size value for a specific table\n  setPageSize: (tableKey, value) => {\n    tablePageSizes.current = {\n      ...tablePageSizes.current,\n      [tableKey]: value\n    };\n  }\n};\nexport {\n  tablePersistence as t\n};\n"],"names":[],"mappings":"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"}