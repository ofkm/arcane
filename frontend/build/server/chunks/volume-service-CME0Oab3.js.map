{"version":3,"file":"volume-service-CME0Oab3.js","sources":["../../../.svelte-kit/adapter-node/chunks/volume-service.js"],"sourcesContent":["import { g as getDockerClient, d as dockerHost } from \"./core.js\";\nimport { C as ConflictError, D as DockerApiError, N as NotFoundError } from \"./errors.js\";\nasync function listVolumes() {\n  try {\n    const docker = await getDockerClient();\n    const volumeResponse = await docker.listVolumes();\n    return volumeResponse.Volumes || [];\n  } catch (error) {\n    console.error(\"Docker Service: Error listing volumes:\", error);\n    const errorMessage = error instanceof Error ? error.message : String(error);\n    throw new Error(`Failed to list Docker volumes using host \"${dockerHost}\". ${errorMessage}`);\n  }\n}\nasync function isVolumeInUse(volumeName) {\n  try {\n    const docker = await getDockerClient();\n    const containers = await docker.listContainers({ all: true });\n    for (const containerInfo of containers) {\n      const details = await docker.getContainer(containerInfo.Id).inspect();\n      if (details.Mounts?.some((m) => m.Type === \"volume\" && m.Name === volumeName)) {\n        return true;\n      }\n    }\n    return false;\n  } catch (error) {\n    console.error(`Error checking if volume ${volumeName} is in use:`, error);\n    const errorMessage = error instanceof Error ? error.message : String(error);\n    throw new Error(`Failed to check if volume ${volumeName} is in use: ${errorMessage}`);\n  }\n}\nasync function getVolume(volumeName) {\n  try {\n    const docker = await getDockerClient();\n    const volume = docker.getVolume(volumeName);\n    const inspectInfo = await volume.inspect();\n    console.log(`Docker Service: Inspected volume \"${volumeName}\" successfully.`);\n    return inspectInfo;\n  } catch (error) {\n    console.error(`Docker Service: Error inspecting volume \"${volumeName}\":`, error);\n    if (error.statusCode === 404) {\n      throw new NotFoundError(`Volume \"${volumeName}\" not found.`);\n    }\n    const errorMessage = error.message || error.reason || \"Unknown Docker error\";\n    throw new DockerApiError(`Failed to inspect volume \"${volumeName}\": ${errorMessage}`, error.statusCode);\n  }\n}\nasync function createVolume(options) {\n  try {\n    const docker = await getDockerClient();\n    const volumeInfo = await docker.createVolume(options);\n    console.log(`Docker Service: Volume \"${options.Name}\" created successfully.`);\n    return volumeInfo;\n  } catch (error) {\n    console.error(`Docker Service: Error creating volume \"${options.Name}\":`, error);\n    if (error.statusCode === 409) {\n      throw new ConflictError(`Volume \"${options.Name}\" already exists.`);\n    }\n    const errorMessage = error.message || error.reason || \"Unknown Docker error\";\n    throw new DockerApiError(`Failed to create volume \"${options.Name}\" using host \"${dockerHost}\". ${errorMessage}`, error.statusCode);\n  }\n}\nasync function removeVolume(name, force = false) {\n  try {\n    const docker = await getDockerClient();\n    const volume = docker.getVolume(name);\n    await volume.remove({ force });\n    console.log(`Docker Service: Volume \"${name}\" removed successfully (force=${force}).`);\n  } catch (error) {\n    console.error(`Docker Service: Error removing volume \"${name}\" (force=${force}):`, error);\n    if (error.statusCode === 404) {\n      throw new NotFoundError(`Volume \"${name}\" not found.`);\n    }\n    if (error.statusCode === 409) {\n      throw new ConflictError(`Volume \"${name}\" is in use. Use the force option to remove if necessary.`);\n    }\n    const errorMessage = error.message || error.reason || \"Unknown Docker error\";\n    throw new DockerApiError(`Failed to remove volume \"${name}\": ${errorMessage}`, error.statusCode);\n  }\n}\nexport {\n  createVolume as c,\n  getVolume as g,\n  isVolumeInUse as i,\n  listVolumes as l,\n  removeVolume as r\n};\n"],"names":[],"mappings":"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"}